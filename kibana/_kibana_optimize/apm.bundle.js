/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["apm"]=function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedChunks={1:0};var deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([4142,0]);return checkDeferredModules()}({1550:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _templateObject(){var data=_taggedTemplateLiteral(["\n  min-width: ",";\n  padding: ",";\n  min-height: calc(100vh - ",");\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_dom_1=tslib_1.__importDefault(__webpack_require__(17));var react_router_dom_1=__webpack_require__(23);var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var history_1=__webpack_require__(298);var LocationContext_1=__webpack_require__(1552);var UrlParamsContext_1=__webpack_require__(409);var variables_1=__webpack_require__(53);var LoadingIndicatorContext_1=__webpack_require__(1554);var LicenseContext_1=__webpack_require__(970);var UpdateBreadcrumbs_1=__webpack_require__(4153);var routeConfig_1=__webpack_require__(1555);var ScrollToTopOnPathChange_1=__webpack_require__(4248);var useUpdateBadgeEffect_1=__webpack_require__(4249);exports.REACT_APP_ROOT_ID="react-apm-root";var MainContainer=styled_components_1.default.div(_templateObject(),variables_1.px(variables_1.unit*50),variables_1.px(variables_1.units.plus),variables_1.topNavHeight);function App(){useUpdateBadgeEffect_1.useUpdateBadgeEffect();return react_1.default.createElement(UrlParamsContext_1.UrlParamsProvider,null,react_1.default.createElement(LoadingIndicatorContext_1.LoadingIndicatorProvider,null,react_1.default.createElement(MainContainer,{"data-test-subj":"apmMainContainer"},react_1.default.createElement(UpdateBreadcrumbs_1.UpdateBreadcrumbs,null),react_1.default.createElement(react_router_dom_1.Route,{component:ScrollToTopOnPathChange_1.ScrollToTopOnPathChange}),react_1.default.createElement(LicenseContext_1.LicenseProvider,null,react_1.default.createElement(react_router_dom_1.Switch,null,routeConfig_1.routes.map(function(route,i){return react_1.default.createElement(react_router_dom_1.Route,Object.assign({key:i},route))}))))))}var Plugin=function(){function Plugin(){_classCallCheck(this,Plugin)}_createClass(Plugin,[{key:"setup",value:function setup(core){var i18n=core.i18n;react_dom_1.default.render(react_1.default.createElement(i18n.Context,null,react_1.default.createElement(react_router_dom_1.Router,{history:history_1.history},react_1.default.createElement(LocationContext_1.LocationProvider,null,react_1.default.createElement(App,null)))),document.getElementById(exports.REACT_APP_ROOT_ID))}}]);return Plugin}();exports.Plugin=Plugin},1552:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importStar(__webpack_require__(0));var react_router_dom_1=__webpack_require__(23);var initialLocation={};var LocationContext=react_1.createContext(initialLocation);exports.LocationContext=LocationContext;var LocationProvider=react_router_dom_1.withRouter(function(_ref){var location=_ref.location,children=_ref.children;return react_1.default.createElement(LocationContext.Provider,{children:children,value:location})});exports.LocationProvider=LocationProvider},1553:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var lodash_1=__webpack_require__(3);var datemath_1=tslib_1.__importDefault(__webpack_require__(55));function getParsedDate(rawDate){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(rawDate){var parsed=datemath_1.default.parse(rawDate,opts);if(parsed){return parsed.toISOString()}}}exports.getParsedDate=getParsedDate;function getStart(prevState,rangeFrom){if(prevState.rangeFrom!==rangeFrom){return getParsedDate(rangeFrom)}return prevState.start}exports.getStart=getStart;function getEnd(prevState,rangeTo){if(prevState.rangeTo!==rangeTo){return getParsedDate(rangeTo,{roundUp:true})}return prevState.end}exports.getEnd=getEnd;function toNumber(value){if(value!==undefined){return parseInt(value,10)}}exports.toNumber=toNumber;function toString(value){if(value===""||value==="null"||value==="undefined"){return}return value}exports.toString=toString;function toBoolean(value){return value==="true"}exports.toBoolean=toBoolean;function getPathAsArray(){var pathname=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return lodash_1.compact(pathname.split("/"))}exports.getPathAsArray=getPathAsArray;function removeUndefinedProps(obj){return lodash_1.pick(obj,function(value){return value!==undefined})}exports.removeUndefinedProps=removeUndefinedProps;function getPathParams(){var pathname=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var paths=getPathAsArray(pathname);var pageName=paths.length>1?paths[1]:paths[0];switch(pageName){case"transactions":return{processorEvent:"transaction",serviceName:paths[0],transactionType:paths[2],transactionName:paths[3]};case"errors":return{processorEvent:"error",serviceName:paths[0],errorGroupId:paths[2]};case"metrics":return{processorEvent:"metric",serviceName:paths[0]};case"services":case"traces":return{processorEvent:"transaction",serviceName:undefined};default:return{processorEvent:"transaction",serviceName:paths[0]}}}exports.getPathParams=getPathParams},1554:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importStar(__webpack_require__(0));var useDelayedVisibility_1=__webpack_require__(4147);exports.LoadingIndicatorContext=react_1.default.createContext({statuses:{},dispatchStatus:function dispatchStatus(action){return undefined}});function reducer(statuses,action){if(action.isLoading){return _objectSpread({},statuses,_defineProperty({},action.id,true))}var statusToRemove=statuses[action.id],restStatuses=_objectWithoutProperties(statuses,[action.id].map(_toPropertyKey));return restStatuses}function getIsAnyLoading(statuses){return Object.values(statuses).some(function(isLoading){return isLoading})}function LoadingIndicatorProvider(_ref){var children=_ref.children;var _react_1$useReducer=react_1.useReducer(reducer,{}),_react_1$useReducer2=_slicedToArray(_react_1$useReducer,2),statuses=_react_1$useReducer2[0],dispatchStatus=_react_1$useReducer2[1];var isLoading=react_1.useMemo(function(){return getIsAnyLoading(statuses)},[statuses]);var shouldShowLoadingIndicator=useDelayedVisibility_1.useDelayedVisibility(isLoading);var contextValue=react_1.default.useMemo(function(){return{statuses:statuses,dispatchStatus:dispatchStatus}},[statuses]);return react_1.default.createElement(react_1.Fragment,null,shouldShowLoadingIndicator&&react_1.default.createElement(eui_1.EuiPortal,null,react_1.default.createElement(eui_1.EuiProgress,{size:"xs",position:"fixed"})),react_1.default.createElement(exports.LoadingIndicatorContext.Provider,{value:contextValue,children:children}))}exports.LoadingIndicatorProvider=LoadingIndicatorProvider},1555:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_router_dom_1=__webpack_require__(23);var url_helpers_1=__webpack_require__(219);var ErrorGroupDetails_1=__webpack_require__(4155);var ServiceDetails_1=__webpack_require__(4183);var TransactionDetails_1=__webpack_require__(4210);var Home_1=__webpack_require__(4241);var renderAsRedirectTo=function renderAsRedirectTo(to){return function(_ref){var location=_ref.location;return react_1.default.createElement(react_router_dom_1.Redirect,{to:_objectSpread({},location,{pathname:to})})}};exports.routes=[{exact:true,path:"/",render:renderAsRedirectTo("/services"),breadcrumb:"APM"},{exact:true,path:"/services",component:Home_1.Home,breadcrumb:i18n_1.i18n.translate("xpack.apm.breadcrumb.servicesTitle",{defaultMessage:"Services"})},{exact:true,path:"/traces",component:Home_1.Home,breadcrumb:i18n_1.i18n.translate("xpack.apm.breadcrumb.tracesTitle",{defaultMessage:"Traces"})},{exact:true,path:"/:serviceName",breadcrumb:function breadcrumb(_ref2){var match=_ref2.match;return match.params.serviceName},render:function render(props){return renderAsRedirectTo("/".concat(props.match.params.serviceName,"/transactions"))(props)}},{exact:true,path:"/:serviceName/errors/:groupId",component:ErrorGroupDetails_1.ErrorGroupDetails,breadcrumb:function breadcrumb(_ref3){var match=_ref3.match;return match.params.groupId}},{exact:true,path:"/:serviceName/errors",component:ServiceDetails_1.ServiceDetails,breadcrumb:i18n_1.i18n.translate("xpack.apm.breadcrumb.errorsTitle",{defaultMessage:"Errors"})},{exact:true,path:"/:serviceName/transactions",component:ServiceDetails_1.ServiceDetails,breadcrumb:i18n_1.i18n.translate("xpack.apm.breadcrumb.transactionsTitle",{defaultMessage:"Transactions"})},{exact:true,path:"/:serviceName/transactions/:transactionType",component:ServiceDetails_1.ServiceDetails,breadcrumb:null},{exact:true,path:"/:serviceName/metrics",component:ServiceDetails_1.ServiceDetails,breadcrumb:i18n_1.i18n.translate("xpack.apm.breadcrumb.metricsTitle",{defaultMessage:"Metrics"})},{exact:true,path:"/:serviceName/transactions/:transactionType/:transactionName",component:TransactionDetails_1.TransactionDetails,breadcrumb:function breadcrumb(_ref4){var match=_ref4.match;return url_helpers_1.legacyDecodeURIComponent(match.params.transactionName)||""}}]},1556:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(341);var get_ui_filters_es_1=__webpack_require__(597);function loadErrorGroupList(_x){return _loadErrorGroupList.apply(this,arguments)}function _loadErrorGroupList(){_loadErrorGroupList=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var serviceName,start,end,uiFilters,sortField,sortDirection;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:serviceName=_ref.serviceName,start=_ref.start,end=_ref.end,uiFilters=_ref.uiFilters,sortField=_ref.sortField,sortDirection=_ref.sortDirection;_context.t0=callApi_1;_context.t1="/api/apm/services/".concat(serviceName,"/errors");_context.t2=start;_context.t3=end;_context.t4=sortField;_context.t5=sortDirection;_context.next=9;return get_ui_filters_es_1.getUiFiltersES(uiFilters);case 9:_context.t6=_context.sent;_context.t7={start:_context.t2,end:_context.t3,sortField:_context.t4,sortDirection:_context.t5,uiFiltersES:_context.t6};_context.t8={pathname:_context.t1,query:_context.t7};return _context.abrupt("return",_context.t0.callApi.call(_context.t0,_context.t8));case 13:case"end":return _context.stop()}}},_callee)}));return _loadErrorGroupList.apply(this,arguments)}exports.loadErrorGroupList=loadErrorGroupList;function loadErrorGroupDetails(_x2){return _loadErrorGroupDetails.apply(this,arguments)}function _loadErrorGroupDetails(){_loadErrorGroupDetails=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref2){var serviceName,start,end,uiFilters,errorGroupId;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:serviceName=_ref2.serviceName,start=_ref2.start,end=_ref2.end,uiFilters=_ref2.uiFilters,errorGroupId=_ref2.errorGroupId;_context2.t0=callApi_1;_context2.t1="/api/apm/services/".concat(serviceName,"/errors/").concat(errorGroupId);_context2.t2=start;_context2.t3=end;_context2.next=7;return get_ui_filters_es_1.getUiFiltersES(uiFilters);case 7:_context2.t4=_context2.sent;_context2.t5={start:_context2.t2,end:_context2.t3,uiFiltersES:_context2.t4};_context2.t6={pathname:_context2.t1,query:_context2.t5};return _context2.abrupt("return",_context2.t0.callApi.call(_context2.t0,_context2.t6));case 11:case"end":return _context2.stop()}}},_callee2)}));return _loadErrorGroupDetails.apply(this,arguments)}exports.loadErrorGroupDetails=loadErrorGroupDetails;function loadErrorDistribution(_x3){return _loadErrorDistribution.apply(this,arguments)}function _loadErrorDistribution(){_loadErrorDistribution=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(_ref3){var serviceName,start,end,uiFilters,errorGroupId,pathname;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:serviceName=_ref3.serviceName,start=_ref3.start,end=_ref3.end,uiFilters=_ref3.uiFilters,errorGroupId=_ref3.errorGroupId;pathname=errorGroupId?"/api/apm/services/".concat(serviceName,"/errors/").concat(errorGroupId,"/distribution"):"/api/apm/services/".concat(serviceName,"/errors/distribution");_context3.t0=callApi_1;_context3.t1=pathname;_context3.t2=start;_context3.t3=end;_context3.next=8;return get_ui_filters_es_1.getUiFiltersES(uiFilters);case 8:_context3.t4=_context3.sent;_context3.t5={start:_context3.t2,end:_context3.t3,uiFiltersES:_context3.t4};_context3.t6={pathname:_context3.t1,query:_context3.t5};return _context3.abrupt("return",_context3.t0.callApi.call(_context3.t0,_context3.t6));case 12:case"end":return _context3.stop()}}},_callee3)}));return _loadErrorDistribution.apply(this,arguments)}exports.loadErrorDistribution=loadErrorDistribution},1557:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ENVIRONMENT_ALL="ENVIRONMENT_ALL";exports.ENVIRONMENT_NOT_DEFINED="ENVIRONMENT_NOT_DEFINED"},1558:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var es_query_1=__webpack_require__(38);var autocomplete_providers_1=__webpack_require__(430);var static_utils_1=__webpack_require__(564);var savedObjects_1=__webpack_require__(971);function convertKueryToEsQuery(kuery,indexPattern){var ast=es_query_1.fromKueryExpression(kuery);return es_query_1.toElasticsearchQuery(ast,indexPattern)}exports.convertKueryToEsQuery=convertKueryToEsQuery;function getSuggestions(_x,_x2,_x3,_x4){return _getSuggestions.apply(this,arguments)}function _getSuggestions(){_getSuggestions=_asyncToGenerator(regeneratorRuntime.mark(function _callee(query,selectionStart,apmIndexPattern,boolFilter){var autocompleteProvider,config,getAutocompleteSuggestions;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:autocompleteProvider=autocomplete_providers_1.getAutocompleteProvider("kuery");if(autocompleteProvider){_context.next=3;break}return _context.abrupt("return",[]);case 3:config={get:function get(){return true}};getAutocompleteSuggestions=autocompleteProvider({config:config,indexPatterns:[apmIndexPattern],boolFilter:boolFilter});return _context.abrupt("return",getAutocompleteSuggestions({query:query,selectionStart:selectionStart,selectionEnd:selectionStart}));case 6:case"end":return _context.stop()}}},_callee)}));return _getSuggestions.apply(this,arguments)}exports.getSuggestions=getSuggestions;function getAPMIndexPatternForKuery(){return _getAPMIndexPatternForKuery.apply(this,arguments)}function _getAPMIndexPatternForKuery(){_getAPMIndexPatternForKuery=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var apmIndexPattern;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return savedObjects_1.getAPMIndexPattern();case 2:apmIndexPattern=_context2.sent;if(apmIndexPattern){_context2.next=5;break}return _context2.abrupt("return");case 5:return _context2.abrupt("return",static_utils_1.getFromSavedObject(apmIndexPattern));case 6:case"end":return _context2.stop()}}},_callee2)}));return _getAPMIndexPatternForKuery.apply(this,arguments)}exports.getAPMIndexPatternForKuery=getAPMIndexPatternForKuery},1559:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var constants_1=__webpack_require__(969);var url_helpers_1=__webpack_require__(219);function getTimepickerRisonData(currentSearch){var currentQuery=url_helpers_1.toQuery(currentSearch);var nextQuery=_objectSpread({},constants_1.TIMEPICKER_DEFAULTS,currentQuery);return{time:{from:encodeURIComponent(nextQuery.rangeFrom),to:encodeURIComponent(nextQuery.rangeTo)},refreshInterval:{pause:String(nextQuery.refreshPaused),value:String(nextQuery.refreshInterval)}}}exports.getTimepickerRisonData=getTimepickerRisonData},1560:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var lodash_1=__webpack_require__(3);var eui_2=__webpack_require__(1);var i18n_1=__webpack_require__(4);var DottedKeyValueTable_1=__webpack_require__(1561);var ElasticDocsLink_1=__webpack_require__(973);function MetadataTable(_ref){var item=_ref.item,sections=_ref.sections;var filteredSections=sections.filter(function(_ref2){var key=_ref2.key,required=_ref2.required;return required||lodash_1.has(item,key)});return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"flexEnd"},react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(ElasticDocsLink_1.ElasticDocsLink,{section:"/apm/get-started",path:"/metadata.html"},react_1.default.createElement(eui_2.EuiText,{size:"s"},react_1.default.createElement(eui_1.EuiIcon,{type:"help"})," How to add labels and other data")))),filteredSections.map(function(section){return react_1.default.createElement("div",{key:section.key},react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("h6",null,section.label)),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"}),react_1.default.createElement(Section,{propData:lodash_1.get(item,section.key),propKey:section.key}),react_1.default.createElement(eui_1.EuiSpacer,{size:"xl"}))}))}exports.MetadataTable=MetadataTable;function Section(_ref3){var propData=_ref3.propData,propKey=_ref3.propKey;return react_1.default.createElement(react_1.default.Fragment,null,propData?react_1.default.createElement(DottedKeyValueTable_1.DottedKeyValueTable,{data:propData,parentKey:propKey,maxDepth:5}):react_1.default.createElement(eui_2.EuiText,{size:"s"},i18n_1.i18n.translate("xpack.apm.propertiesTable.agentFeature.noDataAvailableLabel",{defaultMessage:"No data available"})))}},1561:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var lodash_1=__webpack_require__(3);var eui_1=__webpack_require__(1);var FormattedValue_1=__webpack_require__(4171);function pathify(item,_ref){var maxDepth=_ref.maxDepth,_ref$parentKey=_ref.parentKey,parentKey=_ref$parentKey===void 0?"":_ref$parentKey,_ref$depth=_ref.depth,depth=_ref$depth===void 0?0:_ref$depth;return Object.keys(item).sort().reduce(function(pathified,key){var currentKey=lodash_1.compact([parentKey,key]).join(".");if((!maxDepth||depth+1<=maxDepth)&&lodash_1.isObject(item[key])){return _objectSpread({},pathified,pathify(item[key],{maxDepth:maxDepth,parentKey:currentKey,depth:depth+1}))}else{return _objectSpread({},pathified,_defineProperty({},currentKey,item[key]))}},{})}exports.pathify=pathify;function DottedKeyValueTable(_ref2){var data=_ref2.data,parentKey=_ref2.parentKey,maxDepth=_ref2.maxDepth,_ref2$tableProps=_ref2.tableProps,tableProps=_ref2$tableProps===void 0?{}:_ref2$tableProps;var pathified=pathify(data,{maxDepth:maxDepth,parentKey:parentKey});var rows=Object.keys(pathified).sort().map(function(k){return[k,pathified[k]]});return react_1.default.createElement(eui_1.EuiTable,Object.assign({compressed:true},tableProps),react_1.default.createElement(eui_1.EuiTableBody,null,rows.map(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return react_1.default.createElement(eui_1.EuiTableRow,{key:key},react_1.default.createElement(eui_1.EuiTableRowCell,null,react_1.default.createElement("strong",{"data-testid":"dot-key"},key)),react_1.default.createElement(eui_1.EuiTableRowCell,{"data-testid":"value"},react_1.default.createElement(FormattedValue_1.FormattedValue,{value:value})))})))}exports.DottedKeyValueTable=DottedKeyValueTable},1562:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var i18n_1=__webpack_require__(4);exports.LABELS=i18n_1.i18n.translate("xpack.apm.metadataTable.section.labelsLabel",{defaultMessage:"Labels"});exports.HTTP=i18n_1.i18n.translate("xpack.apm.metadataTable.section.httpLabel",{defaultMessage:"HTTP"});exports.HOST=i18n_1.i18n.translate("xpack.apm.metadataTable.section.hostLabel",{defaultMessage:"Host"});exports.CONTAINER=i18n_1.i18n.translate("xpack.apm.metadataTable.section.containerLabel",{defaultMessage:"Container"});exports.SERVICE=i18n_1.i18n.translate("xpack.apm.metadataTable.section.serviceLabel",{defaultMessage:"Service"});exports.PROCESS=i18n_1.i18n.translate("xpack.apm.metadataTable.section.processLabel",{defaultMessage:"Process"});exports.AGENT=i18n_1.i18n.translate("xpack.apm.metadataTable.section.agentLabel",{defaultMessage:"Agent"});exports.URL=i18n_1.i18n.translate("xpack.apm.metadataTable.section.urlLabel",{defaultMessage:"URL"});exports.USER=i18n_1.i18n.translate("xpack.apm.metadataTable.section.userLabel",{defaultMessage:"User"});exports.CUSTOM=i18n_1.i18n.translate("xpack.apm.metadataTable.section.customLabel",{defaultMessage:"Custom"})},1563:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var lodash_1=__webpack_require__(3);var react_1=tslib_1.__importStar(__webpack_require__(0));var EmptyMessage_1=__webpack_require__(710);var LibraryStackFrames_1=__webpack_require__(4173);var Stackframe_1=__webpack_require__(1564);function Stacktrace(_ref){var _ref$stackframes=_ref.stackframes,stackframes=_ref$stackframes===void 0?[]:_ref$stackframes,codeLanguage=_ref.codeLanguage;if(lodash_1.isEmpty(stackframes)){return react_1.default.createElement(EmptyMessage_1.EmptyMessage,{heading:i18n_1.i18n.translate("xpack.apm.stacktraceTab.noStacktraceAvailableLabel",{defaultMessage:"No stacktrace available."}),hideSubheading:true})}var groups=getGroupedStackframes(stackframes);return react_1.default.createElement(react_1.Fragment,null,groups.map(function(group,i){if(group.isLibraryFrame){var hasMultipleStackframes=group.stackframes.length>1;var hasLeadingSpacer=hasMultipleStackframes&&i!==0;var hasTrailingSpacer=hasMultipleStackframes&&i!==groups.length-1;return react_1.default.createElement(react_1.Fragment,{key:i},hasLeadingSpacer&&react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}),react_1.default.createElement(LibraryStackFrames_1.LibraryStackFrames,{initialVisiblity:!hasMultipleStackframes,stackframes:group.stackframes,codeLanguage:codeLanguage}),hasTrailingSpacer&&react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}))}return group.stackframes.map(function(stackframe,idx){return react_1.default.createElement(react_1.Fragment,{key:"".concat(i,"-").concat(idx)},idx>0&&react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}),react_1.default.createElement(Stackframe_1.Stackframe,{codeLanguage:codeLanguage,stackframe:stackframe}))})}),react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}))}exports.Stacktrace=Stacktrace;function getGroupedStackframes(stackframes){return stackframes.reduce(function(acc,stackframe){var prevGroup=lodash_1.last(acc);var shouldAppend=prevGroup&&prevGroup.isLibraryFrame===stackframe.library_frame&&!prevGroup.excludeFromGrouping&&!stackframe.exclude_from_grouping;if(shouldAppend){prevGroup.stackframes.push(stackframe);return acc}acc.push({isLibraryFrame:Boolean(stackframe.library_frame),excludeFromGrouping:Boolean(stackframe.exclude_from_grouping),stackframes:[stackframe]});return acc},[])}exports.getGroupedStackframes=getGroupedStackframes},1564:function(module,exports,__webpack_require__){"use strict";function _templateObject2(){var data=_taggedTemplateLiteral(["\n  position: relative;\n  font-family: ",";\n  font-size: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  background: ",";\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  border-bottom: 1px solid ",";\n  border-radius: "," "," 0 0;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var variables_1=__webpack_require__(53);var FrameHeading_1=__webpack_require__(4174);var Context_1=__webpack_require__(4175);var Variables_1=__webpack_require__(4179);var CodeHeader=styled_components_1.default.div(_templateObject(),eui_theme_light_json_1.default.euiColorLightShade,variables_1.borderRadius,variables_1.borderRadius);var Container=styled_components_1.default.div(_templateObject2(),variables_1.fontFamilyCode,variables_1.fontSize,eui_theme_light_json_1.default.euiColorLightShade,variables_1.borderRadius,function(props){return props.isLibraryFrame?eui_theme_light_json_1.default.euiColorEmptyShade:eui_theme_light_json_1.default.euiColorLightestShade});function Stackframe(_ref){var stackframe=_ref.stackframe,codeLanguage=_ref.codeLanguage,_ref$isLibraryFrame=_ref.isLibraryFrame,isLibraryFrame=_ref$isLibraryFrame===void 0?false:_ref$isLibraryFrame;if(!hasLineContext(stackframe)){return react_1.default.createElement(FrameHeading_1.FrameHeading,{stackframe:stackframe,isLibraryFrame:isLibraryFrame})}return react_1.default.createElement(Container,{isLibraryFrame:isLibraryFrame},react_1.default.createElement(CodeHeader,null,react_1.default.createElement(FrameHeading_1.FrameHeading,{stackframe:stackframe,isLibraryFrame:isLibraryFrame})),react_1.default.createElement(Context_1.Context,{stackframe:stackframe,codeLanguage:codeLanguage,isLibraryFrame:isLibraryFrame}),react_1.default.createElement(Variables_1.Variables,{vars:stackframe.vars}))}exports.Stackframe=Stackframe;function hasLineContext(stackframe){return stackframe.line.hasOwnProperty("context")}},1565:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3968)},1566:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var Histogram_1=tslib_1.__importDefault(__webpack_require__(1567));var EmptyMessage_1=__webpack_require__(710);function getFormattedBuckets(buckets,bucketSize){if(!buckets){return null}return buckets.map(function(_ref){var count=_ref.count,key=_ref.key;return{x0:key,x:key+bucketSize,y:count}})}exports.getFormattedBuckets=getFormattedBuckets;function ErrorDistribution(_ref2){var distribution=_ref2.distribution,title=_ref2.title;var buckets=getFormattedBuckets(distribution.buckets,distribution.bucketSize);var isEmpty=distribution.totalHits===0;if(isEmpty){return react_1.default.createElement(EmptyMessage_1.EmptyMessage,{heading:i18n_1.i18n.translate("xpack.apm.errorGroupDetails.noErrorsLabel",{defaultMessage:"No errors were found"})})}return react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("span",null,title)),react_1.default.createElement(Histogram_1.default,{verticalLineHover:function verticalLineHover(bucket){return bucket.x},xType:"time",buckets:buckets,bucketSize:distribution.bucketSize,formatYShort:function formatYShort(value){return i18n_1.i18n.translate("xpack.apm.errorGroupDetails.occurrencesShortLabel",{defaultMessage:"{occCount} occ.",values:{occCount:value}})},formatYLong:function formatYLong(value){return i18n_1.i18n.translate("xpack.apm.errorGroupDetails.occurrencesLongLabel",{defaultMessage:"{occCount} occurrences",values:{occCount:value}})}}))}exports.ErrorDistribution=ErrorDistribution},1567:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.HistogramInner=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _d=_interopRequireDefault(__webpack_require__(27));var _lodash=__webpack_require__(3);var _propTypes=_interopRequireDefault(__webpack_require__(6));var _d3Scale=__webpack_require__(445);var _styledComponents=_interopRequireDefault(__webpack_require__(13));var _SingleRect=_interopRequireDefault(__webpack_require__(4182));var _reactVis=__webpack_require__(343);var _variables=__webpack_require__(53);var _Tooltip=_interopRequireDefault(__webpack_require__(1568));var _eui_theme_light=_interopRequireDefault(__webpack_require__(41));var _polished=__webpack_require__(232);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _templateObject(){var data=_taggedTemplateLiteral(["\n  user-select: none;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var XY_HEIGHT=_variables.unit*10;var XY_MARGIN={top:_variables.unit,left:_variables.unit*5,right:_variables.unit,bottom:_variables.unit*2};var X_TICK_TOTAL=8;var ChartsWrapper=_styledComponents.default.div(_templateObject());var HistogramInner=function(_PureComponent){_inherits(HistogramInner,_PureComponent);function HistogramInner(props){var _this;_classCallCheck(this,HistogramInner);_this=_possibleConstructorReturn(this,_getPrototypeOf(HistogramInner).call(this,props));_defineProperty(_assertThisInitialized(_this),"onClick",function(bucket){if(_this.props.onClick){_this.props.onClick(bucket)}});_defineProperty(_assertThisInitialized(_this),"onHover",function(bucket){_this.setState({hoveredBucket:bucket})});_defineProperty(_assertThisInitialized(_this),"onBlur",function(){_this.setState({hoveredBucket:{}})});_this.state={hoveredBucket:{}};return _this}_createClass(HistogramInner,[{key:"getChartData",value:function getChartData(items,selectedItem){var yMax=_d.default.max(items,function(d){return d.y});var MINIMUM_BUCKET_SIZE=yMax*.02;return items.map(function(item){var padding=(item.x-item.x0)/20;return _objectSpread({},item,{color:item===selectedItem?_eui_theme_light.default.euiColorVis1:(0,_polished.tint)(.5,_eui_theme_light.default.euiColorVis1),x0:item.x0+padding,x:item.x-padding,y:item.y>0?Math.max(item.y,MINIMUM_BUCKET_SIZE):0})})}},{key:"render",value:function render(){var _this$props=this.props,backgroundHover=_this$props.backgroundHover,bucketIndex=_this$props.bucketIndex,buckets=_this$props.buckets,bucketSize=_this$props.bucketSize,formatX=_this$props.formatX,formatYShort=_this$props.formatYShort,formatYLong=_this$props.formatYLong,tooltipFooter=_this$props.tooltipFooter,tooltipHeader=_this$props.tooltipHeader,verticalLineHover=_this$props.verticalLineHover,XY_WIDTH=_this$props.width;var hoveredBucket=this.state.hoveredBucket;if((0,_lodash.isEmpty)(buckets)||XY_WIDTH===0){return null}var xMin=_d.default.min(buckets,function(d){return d.x0});var xMax=_d.default.max(buckets,function(d){return d.x});var yMin=0;var yMax=_d.default.max(buckets,function(d){return d.y});var selectedBucket=buckets[bucketIndex];var chartData=this.getChartData(buckets,selectedBucket);var _x=(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([XY_MARGIN.left,XY_WIDTH-XY_MARGIN.right]);var y=(0,_d3Scale.scaleLinear)().domain([yMin,yMax]).range([XY_HEIGHT,0]).nice();var xDomain=_x.domain();var yDomain=y.domain();var yTickValues=[0,yDomain[1]/2,yDomain[1]];var isTimeSeries=this.props.xType==="time";var shouldShowTooltip=hoveredBucket.x>0&&(hoveredBucket.y>0||isTimeSeries);var showVerticalLineHover=verticalLineHover(hoveredBucket);var showBackgroundHover=backgroundHover(hoveredBucket);return _react.default.createElement(ChartsWrapper,null,_react.default.createElement(_reactVis.XYPlot,{xType:this.props.xType,width:XY_WIDTH,height:XY_HEIGHT,margin:XY_MARGIN,xDomain:xDomain,yDomain:yDomain},_react.default.createElement(_reactVis.HorizontalGridLines,{tickValues:yTickValues}),_react.default.createElement(_reactVis.XAxis,{style:{strokeWidth:"1px"},marginRight:10,tickSizeOuter:10,tickSizeInner:0,tickTotal:X_TICK_TOTAL,tickFormat:formatX}),_react.default.createElement(_reactVis.YAxis,{tickSize:0,hideLine:true,tickValues:yTickValues,tickFormat:formatYShort}),showBackgroundHover&&_react.default.createElement(_SingleRect.default,{x:_x(hoveredBucket.x0),width:_x(bucketSize)-_x(0),style:{fill:_eui_theme_light.default.euiColorLightestShade}}),shouldShowTooltip&&_react.default.createElement(_Tooltip.default,{style:{marginLeft:"1%",marginRight:"1%"},header:tooltipHeader(hoveredBucket),footer:tooltipFooter(hoveredBucket),tooltipPoints:[{value:formatYLong(hoveredBucket.y)}],x:hoveredBucket.xCenter,y:yDomain[1]/2}),selectedBucket&&_react.default.createElement(_SingleRect.default,{x:_x(selectedBucket.x0),width:_x(bucketSize)-_x(0),style:{fill:"transparent",stroke:_eui_theme_light.default.euiColorVis1,rx:"0px",ry:"0px"}}),_react.default.createElement(_reactVis.VerticalRectSeries,{colorType:"literal",data:chartData,style:{rx:"0px",ry:"0px"}}),showVerticalLineHover&&_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:[hoveredBucket.x]}),_react.default.createElement(_reactVis.Voronoi,{extent:[[XY_MARGIN.left,XY_MARGIN.top],[XY_WIDTH,XY_HEIGHT]],nodes:this.props.buckets.map(function(bucket){return _objectSpread({},bucket,{xCenter:(bucket.x0+bucket.x)/2})}),onClick:this.onClick,onHover:this.onHover,onBlur:this.onBlur,x:function x(d){return _x(d.xCenter)},y:function y(){return 1}})))}}]);return HistogramInner}(_react.PureComponent);exports.HistogramInner=HistogramInner;HistogramInner.propTypes={backgroundHover:_propTypes.default.func,bucketIndex:_propTypes.default.number,buckets:_propTypes.default.array.isRequired,bucketSize:_propTypes.default.number.isRequired,formatX:_propTypes.default.func,formatYLong:_propTypes.default.func,formatYShort:_propTypes.default.func,onClick:_propTypes.default.func,tooltipFooter:_propTypes.default.func,tooltipHeader:_propTypes.default.func,verticalLineHover:_propTypes.default.func,width:_propTypes.default.number.isRequired,xType:_propTypes.default.string};HistogramInner.defaultProps={backgroundHover:function backgroundHover(){return null},formatYLong:function formatYLong(value){return value},formatYShort:function formatYShort(value){return value},tooltipFooter:function tooltipFooter(){return null},tooltipHeader:function tooltipHeader(){return null},verticalLineHover:function verticalLineHover(){return null},xType:"linear"};var _default=(0,_reactVis.makeWidthFlexible)(HistogramInner);exports.default=_default},1568:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=Tooltip;var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(3);var _reactVis=__webpack_require__(343);var _moment=_interopRequireDefault(__webpack_require__(16));var _styledComponents=_interopRequireDefault(__webpack_require__(13));var _propTypes=_interopRequireDefault(__webpack_require__(6));var _variables=__webpack_require__(53);var _Legend=_interopRequireDefault(__webpack_require__(712));var _eui_theme_light=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _templateObject7(){var data=_taggedTemplateLiteral(["\n  color: ",";\n  font-size: ",";\n"]);_templateObject7=function _templateObject7(){return data};return data}function _templateObject6(){var data=_taggedTemplateLiteral(["\n  color: ",";\n  padding-bottom: 0;\n"]);_templateObject6=function _templateObject6(){return data};return data}function _templateObject5(){var data=_taggedTemplateLiteral(["\n  display: flex;\n  align-items: center;\n  margin-bottom: ",";\n  justify-content: space-between;\n"]);_templateObject5=function _templateObject5(){return data};return data}function _templateObject4(){var data=_taggedTemplateLiteral(["\n  color: ",";\n  margin: ",";\n  font-size: ",";\n"]);_templateObject4=function _templateObject4(){return data};return data}function _templateObject3(){var data=_taggedTemplateLiteral(["\n  margin: ",";\n  margin-right: ",";\n  font-size: ",";\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  background: ",";\n  border-bottom: 1px solid ",";\n  border-radius: "," "," 0 0;\n  padding: ",";\n  color: ",";\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  margin: 0 ",";\n  transform: translateY(-50%);\n  border: 1px solid ",";\n  background: ",";\n  border-radius: ",";\n  font-size: ",";\n  color: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var TooltipElm=_styledComponents.default.div(_templateObject(),(0,_variables.px)(_variables.unit),_eui_theme_light.default.euiColorLightShade,_eui_theme_light.default.euiColorEmptyShade,_variables.borderRadius,_variables.fontSize,_eui_theme_light.default.euiColorFullShade);var Header=_styledComponents.default.div(_templateObject2(),_eui_theme_light.default.euiColorLightestShade,_eui_theme_light.default.euiColorLightShade,_variables.borderRadius,_variables.borderRadius,(0,_variables.px)(_variables.units.half),_eui_theme_light.default.euiColorMediumShade);var Content=_styledComponents.default.div(_templateObject3(),(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit),_variables.fontSizes.small);var Footer=_styledComponents.default.div(_templateObject4(),_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.units.half),_variables.fontSizes.small);var LegendContainer=_styledComponents.default.div(_templateObject5(),(0,_variables.px)(_variables.units.quarter));var LegendGray=(0,_styledComponents.default)(_Legend.default)(_templateObject6(),_eui_theme_light.default.euiColorMediumShade);var Value=_styledComponents.default.div(_templateObject7(),_eui_theme_light.default.euiColorDarkShade,_variables.fontSize);function Tooltip(_ref){var header=_ref.header,footer=_ref.footer,tooltipPoints=_ref.tooltipPoints,x=_ref.x,y=_ref.y,props=_objectWithoutProperties(_ref,["header","footer","tooltipPoints","x","y"]);if((0,_lodash.isEmpty)(tooltipPoints)){return null}var showLegends=tooltipPoints.length>1;return _react.default.createElement(_reactVis.Hint,_extends({},props,{value:{x:x,y:y}}),_react.default.createElement(TooltipElm,null,_react.default.createElement(Header,null,header||(0,_moment.default)(x).format("MMMM Do YYYY, HH:mm:ss")),_react.default.createElement(Content,null,showLegends?tooltipPoints.map(function(point,i){return _react.default.createElement(LegendContainer,{key:i},_react.default.createElement(LegendGray,{fontSize:_variables.fontSize.tiny,radius:_variables.units.half,color:point.color,text:point.text}),_react.default.createElement(Value,null,point.value))}):_react.default.createElement(Value,null,tooltipPoints[0].value)),_react.default.createElement(Footer,null,footer)))}Tooltip.propTypes={header:_propTypes.default.string,tooltipPoints:_propTypes.default.array.isRequired,x:_propTypes.default.number,y:_propTypes.default.number};Tooltip.defaultProps={};module.exports=exports.default},1569:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(341);var get_ui_filters_es_1=__webpack_require__(597);function loadServiceList(_x){return _loadServiceList.apply(this,arguments)}function _loadServiceList(){_loadServiceList=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var start,end,uiFilters;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:start=_ref.start,end=_ref.end,uiFilters=_ref.uiFilters;_context.t0=callApi_1;_context.t1=start;_context.t2=end;_context.next=6;return get_ui_filters_es_1.getUiFiltersES(uiFilters);case 6:_context.t3=_context.sent;_context.t4={start:_context.t1,end:_context.t2,uiFiltersES:_context.t3};_context.t5={pathname:"/api/apm/services",query:_context.t4};return _context.abrupt("return",_context.t0.callApi.call(_context.t0,_context.t5));case 10:case"end":return _context.stop()}}},_callee)}));return _loadServiceList.apply(this,arguments)}exports.loadServiceList=loadServiceList;function loadServiceDetails(_x2){return _loadServiceDetails.apply(this,arguments)}function _loadServiceDetails(){_loadServiceDetails=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref2){var serviceName,start,end,uiFilters;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:serviceName=_ref2.serviceName,start=_ref2.start,end=_ref2.end,uiFilters=_ref2.uiFilters;_context2.t0=callApi_1;_context2.t1="/api/apm/services/".concat(serviceName);_context2.t2=start;_context2.t3=end;_context2.next=7;return get_ui_filters_es_1.getUiFiltersES(uiFilters);case 7:_context2.t4=_context2.sent;_context2.t5={start:_context2.t2,end:_context2.t3,uiFiltersES:_context2.t4};_context2.t6={pathname:_context2.t1,query:_context2.t5};return _context2.abrupt("return",_context2.t0.callApi.call(_context2.t0,_context2.t6));case 11:case"end":return _context2.stop()}}},_callee2)}));return _loadServiceDetails.apply(this,arguments)}exports.loadServiceDetails=loadServiceDetails},1570:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_router_dom_1=__webpack_require__(23);var useLocation_1=__webpack_require__(319);var history_1=__webpack_require__(298);function isTabSelected(tab,currentPath){if(tab.routePath){return!!react_router_dom_1.matchPath(currentPath,{path:tab.routePath,exact:true})}return currentPath===tab.path}function HistoryTabs(_ref){var tabs=_ref.tabs;var location=useLocation_1.useLocation();return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiTabs,null,tabs.map(function(tab,i){return react_1.default.createElement(eui_1.EuiTab,{onClick:function onClick(){return history_1.history.push(_objectSpread({},location,{pathname:tab.path}))},isSelected:isTabSelected(tab,location.pathname),key:"".concat(tab.path,"--").concat(i)},tab.name)})),react_1.default.createElement(eui_1.EuiSpacer,null),tabs.map(function(tab){return tab.render?react_1.default.createElement(react_router_dom_1.Route,{path:tab.routePath||tab.path,render:tab.render,key:tab.path}):null}))}exports.HistoryTabs=HistoryTabs},1571:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var i18n_1=__webpack_require__(4);var lodash_1=__webpack_require__(3);var lodash_mean_1=tslib_1.__importDefault(__webpack_require__(4190));var polished_1=__webpack_require__(232);var formatters_1=__webpack_require__(299);var INITIAL_DATA={apmTimeseries:{totalHits:0,responseTimes:{avg:[],p95:[],p99:[]},tpmBuckets:[],overallAvgDuration:undefined},anomalyTimeseries:undefined};function getTransactionCharts(_ref){var transactionType=_ref.transactionType;var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:INITIAL_DATA,apmTimeseries=_ref2.apmTimeseries,anomalyTimeseries=_ref2.anomalyTimeseries;var noHits=apmTimeseries.totalHits===0;var tpmSeries=getTpmSeries(apmTimeseries,transactionType);var responseTimeSeries=getResponseTimeSeries({apmTimeseries:apmTimeseries,anomalyTimeseries:anomalyTimeseries});return{noHits:noHits,tpmSeries:tpmSeries,responseTimeSeries:responseTimeSeries}}exports.getTransactionCharts=getTransactionCharts;function getResponseTimeSeries(_ref3){var apmTimeseries=_ref3.apmTimeseries,anomalyTimeseries=_ref3.anomalyTimeseries;var overallAvgDuration=apmTimeseries.overallAvgDuration;var _apmTimeseries$respon=apmTimeseries.responseTimes,avg=_apmTimeseries$respon.avg,p95=_apmTimeseries$respon.p95,p99=_apmTimeseries$respon.p99;var series=[{title:i18n_1.i18n.translate("xpack.apm.transactions.chart.averageLabel",{defaultMessage:"Avg."}),data:avg,legendValue:formatters_1.asMillis(overallAvgDuration),type:"linemark",color:eui_theme_light_json_1.default.euiColorVis1},{title:i18n_1.i18n.translate("xpack.apm.transactions.chart.95thPercentileLabel",{defaultMessage:"95th percentile"}),titleShort:"95th",data:p95,type:"linemark",color:eui_theme_light_json_1.default.euiColorVis5},{title:i18n_1.i18n.translate("xpack.apm.transactions.chart.99thPercentileLabel",{defaultMessage:"99th percentile"}),titleShort:"99th",data:p99,type:"linemark",color:eui_theme_light_json_1.default.euiColorVis7}];if(anomalyTimeseries){series.splice(1,0,getAnomalyBoundariesSeries(anomalyTimeseries.anomalyBoundaries),getAnomalyScoreSeries(anomalyTimeseries.anomalyScore))}return series}exports.getResponseTimeSeries=getResponseTimeSeries;function getAnomalyScoreSeries(data){return{title:i18n_1.i18n.translate("xpack.apm.transactions.chart.anomalyScoreLabel",{defaultMessage:"Anomaly score"}),hideLegend:true,hideTooltipValue:true,data:data,type:"areaMaxHeight",color:"none",areaColor:polished_1.rgba(eui_theme_light_json_1.default.euiColorVis9,.1)}}exports.getAnomalyScoreSeries=getAnomalyScoreSeries;function getAnomalyBoundariesSeries(data){return{title:i18n_1.i18n.translate("xpack.apm.transactions.chart.anomalyBoundariesLabel",{defaultMessage:"Anomaly Boundaries"}),hideLegend:true,hideTooltipValue:true,data:data,type:"area",color:"none",areaColor:polished_1.rgba(eui_theme_light_json_1.default.euiColorVis1,.1)}}function getTpmSeries(apmTimeseries,transactionType){var tpmBuckets=apmTimeseries.tpmBuckets;var bucketKeys=tpmBuckets.map(function(_ref4){var key=_ref4.key;return key});var getColor=getColorByKey(bucketKeys);return tpmBuckets.map(function(bucket){var avg=lodash_mean_1.default(bucket.dataPoints.map(function(p){return p.y}));return{title:bucket.key,data:bucket.dataPoints,legendValue:"".concat(formatters_1.asDecimal(avg)," ").concat(formatters_1.tpmUnit(transactionType||"")),type:"linemark",color:getColor(bucket.key)}})}exports.getTpmSeries=getTpmSeries;function getColorByKey(keys){var assignedColors={"HTTP 2xx":eui_theme_light_json_1.default.euiColorVis0,"HTTP 3xx":eui_theme_light_json_1.default.euiColorVis5,"HTTP 4xx":eui_theme_light_json_1.default.euiColorVis7,"HTTP 5xx":eui_theme_light_json_1.default.euiColorVis2};var unknownKeys=lodash_1.difference(keys,Object.keys(assignedColors));var unassignedColors=lodash_1.zipObject(unknownKeys,[eui_theme_light_json_1.default.euiColorVis1,eui_theme_light_json_1.default.euiColorVis3,eui_theme_light_json_1.default.euiColorVis4,eui_theme_light_json_1.default.euiColorVis6,eui_theme_light_json_1.default.euiColorVis2,eui_theme_light_json_1.default.euiColorVis8]);return function(key){return assignedColors[key]||unassignedColors[key]}}},1572:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  position: relative;\n  top: 5px;\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  padding-right: 5px;\n  position: relative;\n  top: -1px;\n  display: inline-block;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importStar(__webpack_require__(0));var lodash_1=__webpack_require__(3);var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var formatters_1=__webpack_require__(299);var MLJobLink_1=__webpack_require__(976);var CustomPlot_1=tslib_1.__importDefault(__webpack_require__(1575));var SyncChartGroup_1=__webpack_require__(1576);var LicenseContext_1=__webpack_require__(970);var getEmptySeries_1=__webpack_require__(1577);var ShiftedIconWrapper=styled_components_1.default.span(_templateObject());var ShiftedEuiText=styled_components_1.default(eui_1.EuiText)(_templateObject2());var msTimeUnitLabel=i18n_1.i18n.translate("xpack.apm.metrics.transactionChart.msTimeUnitLabel",{defaultMessage:"ms"});var TransactionCharts=function(_react_1$Component){_inherits(TransactionCharts,_react_1$Component);function TransactionCharts(){var _this;_classCallCheck(this,TransactionCharts);_this=_possibleConstructorReturn(this,_getPrototypeOf(TransactionCharts).apply(this,arguments));_this.getResponseTimeTickFormatter=function(t){return _this.props.charts.noHits?"- ".concat(msTimeUnitLabel):formatters_1.asMillis(t)};_this.getResponseTimeTooltipFormatter=function(p){return _this.props.charts.noHits||!p?"- ".concat(msTimeUnitLabel):formatters_1.asMillis(p.y)};_this.getTPMFormatter=function(t){var _this$props=_this.props,urlParams=_this$props.urlParams,charts=_this$props.charts;var unit=formatters_1.tpmUnit(urlParams.transactionType);return charts.noHits||t===null?"- ".concat(unit):"".concat(formatters_1.asInteger(t)," ").concat(unit)};_this.getTPMTooltipFormatter=function(p){return _this.getTPMFormatter(p.y)};return _this}_createClass(TransactionCharts,[{key:"renderMLHeader",value:function renderMLHeader(hasValidMlLicense){var hasMLJob=this.props.hasMLJob;if(!hasValidMlLicense||!hasMLJob){return null}var _this$props$urlParams=this.props.urlParams,serviceName=_this$props$urlParams.serviceName,transactionType=_this$props$urlParams.transactionType,kuery=_this$props$urlParams.kuery;if(!serviceName){return null}var hasKuery=!lodash_1.isEmpty(kuery);var icon=hasKuery?react_1.default.createElement(eui_1.EuiIconTip,{"aria-label":"Warning",type:"alert",color:"warning",content:"The Machine learning results are hidden when the search bar is used for filtering"}):react_1.default.createElement(eui_1.EuiIconTip,{content:i18n_1.i18n.translate("xpack.apm.metrics.transactionChart.machineLearningTooltip",{defaultMessage:"The stream around the average duration shows the expected bounds. An annotation is shown for anomaly scores >= 75."})});return react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(ShiftedEuiText,{size:"xs"},react_1.default.createElement(ShiftedIconWrapper,null,icon),react_1.default.createElement("span",null,i18n_1.i18n.translate("xpack.apm.metrics.transactionChart.machineLearningLabel",{defaultMessage:"Machine learning:"})," "),react_1.default.createElement(MLJobLink_1.MLJobLink,{serviceName:serviceName,transactionType:transactionType},"View Job")))}},{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,charts=_this$props2.charts,urlParams=_this$props2.urlParams;var noHits=charts.noHits,responseTimeSeries=charts.responseTimeSeries,tpmSeries=charts.tpmSeries;var transactionType=urlParams.transactionType,start=urlParams.start,end=urlParams.end;return react_1.default.createElement(SyncChartGroup_1.SyncChartGroup,{render:function render(hoverXHandlers){return react_1.default.createElement(eui_1.EuiFlexGrid,{columns:2,gutterSize:"s"},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiPanel,null,react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"spaceBetween"},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("span",null,responseTimeLabel(transactionType)))),react_1.default.createElement(LicenseContext_1.LicenseContext.Consumer,null,function(license){return _this2.renderMLHeader(license.features.ml.is_available)})),react_1.default.createElement(CustomPlot_1.default,Object.assign({noHits:noHits,series:noHits?getEmptySeries_1.getEmptySeries(start,end):responseTimeSeries},hoverXHandlers,{tickFormatY:_this2.getResponseTimeTickFormatter,formatTooltipValue:_this2.getResponseTimeTooltipFormatter}))))),react_1.default.createElement(eui_1.EuiFlexItem,{style:{flexShrink:1}},react_1.default.createElement(eui_1.EuiPanel,null,react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("span",null,tpmLabel(transactionType))),react_1.default.createElement(CustomPlot_1.default,Object.assign({noHits:noHits,series:noHits?getEmptySeries_1.getEmptySeries(start,end):tpmSeries},hoverXHandlers,{tickFormatY:_this2.getTPMFormatter,formatTooltipValue:_this2.getTPMTooltipFormatter,truncateLegends:true}))))))}})}}]);return TransactionCharts}(react_1.Component);exports.TransactionCharts=TransactionCharts;function tpmLabel(type){return type==="request"?i18n_1.i18n.translate("xpack.apm.metrics.transactionChart.requestsPerMinuteLabel",{defaultMessage:"Requests per minute"}):i18n_1.i18n.translate("xpack.apm.metrics.transactionChart.transactionsPerMinuteLabel",{defaultMessage:"Transactions per minute"})}function responseTimeLabel(type){switch(type){case"page-load":return i18n_1.i18n.translate("xpack.apm.metrics.transactionChart.pageLoadTimesLabel",{defaultMessage:"Page load times"});case"route-change":return i18n_1.i18n.translate("xpack.apm.metrics.transactionChart.routeChangeTimesLabel",{defaultMessage:"Route change times"});default:return i18n_1.i18n.translate("xpack.apm.metrics.transactionChart.transactionDurationLabel",{defaultMessage:"Transaction duration"})}}},1573:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function getMlPrefix(serviceName,transactionType){var maybeTransactionType=transactionType?"".concat(transactionType,"-"):"";return"".concat(serviceName,"-").concat(maybeTransactionType).toLowerCase()}exports.getMlPrefix=getMlPrefix;function getMlJobId(serviceName,transactionType){return"".concat(getMlPrefix(serviceName,transactionType),"high_mean_response_time")}exports.getMlJobId=getMlJobId;function getMlIndex(serviceName,transactionType){return".ml-anomalies-".concat(getMlJobId(serviceName,transactionType))}exports.getMlIndex=getMlIndex},1574:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var url_1=tslib_1.__importDefault(__webpack_require__(31));var rison_node_1=tslib_1.__importDefault(__webpack_require__(239));var useLocation_1=__webpack_require__(319);var rison_helpers_1=__webpack_require__(1559);function MLLink(_ref){var children=_ref.children,_ref$path=_ref.path,path=_ref$path===void 0?"":_ref$path,_ref$query=_ref.query,query=_ref$query===void 0?{}:_ref$query;var location=useLocation_1.useLocation();var risonQuery=rison_helpers_1.getTimepickerRisonData(location.search);if(query.ml){risonQuery.ml=query.ml}var href=url_1.default.format({pathname:chrome_1.default.addBasePath("/app/ml"),hash:"".concat(path,"?_g=").concat(rison_node_1.default.encode(risonQuery))});return react_1.default.createElement(eui_1.EuiLink,{children:children,href:href})}exports.MLLink=MLLink},1575:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.InnerCustomPlot=void 0;var _lodash=__webpack_require__(3);var _reactVis=__webpack_require__(343);var _propTypes=_interopRequireDefault(__webpack_require__(6));var _react=_interopRequireWildcard(__webpack_require__(0));var _Legends=_interopRequireDefault(__webpack_require__(4191));var _StaticPlot=_interopRequireDefault(__webpack_require__(4192));var _InteractivePlot=_interopRequireDefault(__webpack_require__(4194));var _VoronoiPlot=_interopRequireDefault(__webpack_require__(4196));var _reselect=__webpack_require__(62);var _plotUtils=__webpack_require__(714);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VISIBLE_LEGEND_COUNT=4;function getHiddenLegendCount(series){return series.filter(function(serie){return serie.hideLegend}).length}var InnerCustomPlot=function(_PureComponent){_inherits(InnerCustomPlot,_PureComponent);function InnerCustomPlot(){var _getPrototypeOf2;var _this;_classCallCheck(this,InnerCustomPlot);for(var _len=arguments.length,_args=new Array(_len),_key=0;_key<_len;_key++){_args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InnerCustomPlot)).call.apply(_getPrototypeOf2,[this].concat(_args)));_defineProperty(_assertThisInitialized(_this),"state",{seriesEnabledState:[],isDrawing:false,selectionStart:null,selectionEnd:null});_defineProperty(_assertThisInitialized(_this),"getEnabledSeries",(0,_reselect.createSelector)(function(state){return state.visibleSeries},function(state){return state.seriesEnabledState},function(visibleSeries,seriesEnabledState){return visibleSeries.filter(function(serie,i){return!seriesEnabledState[i]})}));_defineProperty(_assertThisInitialized(_this),"getOptions",(0,_reselect.createSelector)(function(state){return state.width},function(state){return state.yMin},function(state){return state.yMax},function(width,yMin,yMax){return{width:width,yMin:yMin,yMax:yMax}}));_defineProperty(_assertThisInitialized(_this),"getPlotValues",(0,_reselect.createSelector)(function(state){return state.visibleSeries},function(state){return state.enabledSeries},function(state){return state.options},_plotUtils.getPlotValues));_defineProperty(_assertThisInitialized(_this),"getVisibleSeries",(0,_reselect.createSelector)(function(state){return state.series},function(series){return series.slice(0,VISIBLE_LEGEND_COUNT+getHiddenLegendCount(series))}));_defineProperty(_assertThisInitialized(_this),"clickLegend",function(i){_this.setState(function(_ref){var seriesEnabledState=_ref.seriesEnabledState;var nextSeriesEnabledState=_this.props.series.map(function(value,_i){var disabledValue=seriesEnabledState[_i];return i===_i?!disabledValue:!!disabledValue});return{seriesEnabledState:nextSeriesEnabledState}})});_defineProperty(_assertThisInitialized(_this),"onMouseLeave",function(){var _this$props;(_this$props=_this.props).onMouseLeave.apply(_this$props,arguments)});_defineProperty(_assertThisInitialized(_this),"onMouseDown",function(node){return _this.setState({isDrawing:true,selectionStart:node.x,selectionEnd:null})});_defineProperty(_assertThisInitialized(_this),"onMouseUp",function(){if(_this.state.isDrawing&&_this.state.selectionEnd!==null){var _sort=[_this.state.selectionStart,_this.state.selectionEnd].sort(),_sort2=_slicedToArray(_sort,2),start=_sort2[0],end=_sort2[1];_this.props.onSelectionEnd({start:start,end:end})}_this.setState({isDrawing:false})});_defineProperty(_assertThisInitialized(_this),"onHover",function(node){_this.props.onHover(node.x);if(_this.state.isDrawing){_this.setState({selectionEnd:node.x})}});return _this}_createClass(InnerCustomPlot,[{key:"componentDidMount",value:function componentDidMount(){document.body.addEventListener("mouseup",this.onMouseUp)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.body.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function render(){var _this$props2=this.props,series=_this$props2.series,truncateLegends=_this$props2.truncateLegends,noHits=_this$props2.noHits,width=_this$props2.width;if((0,_lodash.isEmpty)(series)||!width){return null}var hiddenSeriesCount=Math.max(series.length-VISIBLE_LEGEND_COUNT-getHiddenLegendCount(series),0);var visibleSeries=this.getVisibleSeries({series:series});var enabledSeries=this.getEnabledSeries({visibleSeries:visibleSeries,seriesEnabledState:this.state.seriesEnabledState});var options=this.getOptions(this.props);var plotValues=this.getPlotValues({visibleSeries:visibleSeries,enabledSeries:enabledSeries,options:options});if((0,_lodash.isEmpty)(plotValues)){return null}return _react.default.createElement(_react.Fragment,null,_react.default.createElement("div",{style:{position:"relative",height:plotValues.XY_HEIGHT}},_react.default.createElement(_StaticPlot.default,{noHits:noHits,plotValues:plotValues,series:enabledSeries,tickFormatY:this.props.tickFormatY,tickFormatX:this.props.tickFormatX}),_react.default.createElement(_InteractivePlot.default,{plotValues:plotValues,hoverX:this.props.hoverX,series:enabledSeries,formatTooltipValue:this.props.formatTooltipValue,isDrawing:this.state.isDrawing,selectionStart:this.state.selectionStart,selectionEnd:this.state.selectionEnd}),_react.default.createElement(_VoronoiPlot.default,{noHits:noHits,plotValues:plotValues,series:enabledSeries,onHover:this.onHover,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown})),_react.default.createElement(_Legends.default,{noHits:noHits,truncateLegends:truncateLegends,series:visibleSeries,hiddenSeriesCount:hiddenSeriesCount,clickLegend:this.clickLegend,seriesEnabledState:this.state.seriesEnabledState}))}}]);return InnerCustomPlot}(_react.PureComponent);exports.InnerCustomPlot=InnerCustomPlot;InnerCustomPlot.propTypes={formatTooltipValue:_propTypes.default.func,hoverX:_propTypes.default.number,noHits:_propTypes.default.bool.isRequired,onHover:_propTypes.default.func.isRequired,onMouseLeave:_propTypes.default.func.isRequired,onSelectionEnd:_propTypes.default.func.isRequired,series:_propTypes.default.array.isRequired,tickFormatY:_propTypes.default.func,truncateLegends:_propTypes.default.bool,width:_propTypes.default.number.isRequired};InnerCustomPlot.defaultProps={formatTooltipValue:function formatTooltipValue(p){return p.y},tickFormatX:undefined,tickFormatY:function tickFormatY(y){return y},truncateLegends:false};var _default=(0,_reactVis.makeWidthFlexible)(InnerCustomPlot);exports.default=_default},1576:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var url_helpers_1=__webpack_require__(219);var history_1=__webpack_require__(298);var SyncChartGroup=function(_react_1$default$Comp){_inherits(SyncChartGroup,_react_1$default$Comp);function SyncChartGroup(){var _this;_classCallCheck(this,SyncChartGroup);_this=_possibleConstructorReturn(this,_getPrototypeOf(SyncChartGroup).apply(this,arguments));_this.state={hoverX:null};_this.onHover=function(hoverX){return _this.setState({hoverX:hoverX})};_this.onMouseLeave=function(){return _this.setState({hoverX:null})};_this.onSelectionEnd=function(range){_this.setState({hoverX:null});var currentSearch=url_helpers_1.toQuery(history_1.history.location.search);var nextSearch={rangeFrom:new Date(range.start).toISOString(),rangeTo:new Date(range.end).toISOString()};history_1.history.push(_objectSpread({},history_1.history.location,{search:url_helpers_1.fromQuery(_objectSpread({},currentSearch,nextSearch))}))};return _this}_createClass(SyncChartGroup,[{key:"render",value:function render(){return this.props.render({onHover:this.onHover,onMouseLeave:this.onMouseLeave,onSelectionEnd:this.onSelectionEnd,hoverX:this.state.hoverX})}}]);return SyncChartGroup}(react_1.default.Component);exports.SyncChartGroup=SyncChartGroup},1577:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var lodash_1=__webpack_require__(3);var d3_1=tslib_1.__importDefault(__webpack_require__(27));exports.getEmptySeries=lodash_1.memoize(function(){var start=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Date.now()-36e5;var end=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Date.now();var dates=d3_1.default.time.scale().domain([new Date(start),new Date(end)]).ticks();return[{data:dates.map(function(x){return{x:x.getTime(),y:1}})}]},function(start,end){return[start,end].join("_")})},1578:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));function ImpactBar(_ref){var value=_ref.value,_ref$max=_ref.max,max=_ref$max===void 0?100:_ref$max,rest=_objectWithoutProperties(_ref,["value","max"]);return react_1.default.createElement(eui_1.EuiProgress,Object.assign({size:"l",value:value,max:max,color:"primary"},rest))}exports.ImpactBar=ImpactBar},1579:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var agentNames={python:"python",java:"java",nodejs:"nodejs","js-base":"js-base","rum-js":"rum-js",dotnet:"dotnet",ruby:"ruby",go:"go"};function isAgentName(agentName){return Object.values(agentNames).includes(agentName)}exports.isAgentName=isAgentName;function isRumAgentName(agentName){if(!agentName){return false}return[agentNames["js-base"],agentNames["rum-js"]].includes(agentName)}exports.isRumAgentName=isRumAgentName},1580:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(341);var get_ui_filters_es_1=__webpack_require__(597);function loadTrace(_x){return _loadTrace.apply(this,arguments)}function _loadTrace(){_loadTrace=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var traceId,start,end;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:traceId=_ref.traceId,start=_ref.start,end=_ref.end;return _context.abrupt("return",callApi_1.callApi({pathname:"/api/apm/traces/".concat(traceId),query:{start:start,end:end}}));case 2:case"end":return _context.stop()}}},_callee)}));return _loadTrace.apply(this,arguments)}exports.loadTrace=loadTrace;function loadTraceList(_x2){return _loadTraceList.apply(this,arguments)}function _loadTraceList(){_loadTraceList=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref2){var start,end,uiFilters;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:start=_ref2.start,end=_ref2.end,uiFilters=_ref2.uiFilters;_context2.t0=callApi_1;_context2.t1=start;_context2.t2=end;_context2.next=6;return get_ui_filters_es_1.getUiFiltersES(uiFilters);case 6:_context2.t3=_context2.sent;_context2.t4={start:_context2.t1,end:_context2.t2,uiFiltersES:_context2.t3};_context2.t5={pathname:"/api/apm/traces",query:_context2.t4};return _context2.abrupt("return",_context2.t0.callApi.call(_context2.t0,_context2.t5));case 10:case"end":return _context2.stop()}}},_callee2)}));return _loadTraceList.apply(this,arguments)}exports.loadTraceList=loadTraceList},1581:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var url_1=tslib_1.__importDefault(__webpack_require__(31));var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importStar(__webpack_require__(0));var lodash_1=__webpack_require__(3);var DiscoverTransactionLink_1=__webpack_require__(4217);var InfraLink_1=__webpack_require__(4218);var useUrlParams_1=__webpack_require__(374);var url_helpers_1=__webpack_require__(219);function getInfraMetricsQuery(transaction){var plus5=new Date(transaction["@timestamp"]);var minus5=new Date(plus5.getTime());plus5.setMinutes(plus5.getMinutes()+5);minus5.setMinutes(minus5.getMinutes()-5);return{from:minus5.getTime(),to:plus5.getTime()}}function ActionMenuButton(_ref){var onClick=_ref.onClick;return react_1.default.createElement(eui_1.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",onClick:onClick},i18n_1.i18n.translate("xpack.apm.transactionActionMenu.actionsButtonLabel",{defaultMessage:"Actions"}))}exports.TransactionActionMenu=function(props){var transaction=props.transaction;var _react_1$useState=react_1.useState(false),_react_1$useState2=_slicedToArray(_react_1$useState,2),isOpen=_react_1$useState2[0],setIsOpen=_react_1$useState2[1];var _useUrlParams_1$useUr=useUrlParams_1.useUrlParams(),urlParams=_useUrlParams_1$useUr.urlParams;var hostName=transaction!=null&&transaction.host!=null?transaction.host.hostname:undefined;var podId=transaction!=null&&transaction.kubernetes!=null&&transaction.kubernetes.pod!=null?transaction.kubernetes.pod.uid:undefined;var containerId=transaction!=null&&transaction.container!=null?transaction.container.id:undefined;var time=Math.round(transaction.timestamp.us/1e3);var infraMetricsQuery=getInfraMetricsQuery(transaction);var infraConfigItems=[{icon:"loggingApp",label:i18n_1.i18n.translate("xpack.apm.transactionActionMenu.showPodLogsLinkLabel",{defaultMessage:"Show pod logs"}),condition:!!podId,path:"/link-to/pod-logs/".concat(podId),query:{time:time}},{icon:"loggingApp",label:i18n_1.i18n.translate("xpack.apm.transactionActionMenu.showContainerLogsLinkLabel",{defaultMessage:"Show container logs"}),condition:!!containerId,path:"/link-to/container-logs/".concat(containerId),query:{time:time}},{icon:"loggingApp",label:i18n_1.i18n.translate("xpack.apm.transactionActionMenu.showHostLogsLinkLabel",{defaultMessage:"Show host logs"}),condition:!!hostName,path:"/link-to/host-logs/".concat(hostName),query:{time:time}},{icon:"loggingApp",label:i18n_1.i18n.translate("xpack.apm.transactionActionMenu.showTraceLogsLinkLabel",{defaultMessage:"Show trace logs"}),condition:true,path:"/link-to/logs",query:{time:time,filter:"trace.id:".concat(transaction.trace.id)}},{icon:"infraApp",label:i18n_1.i18n.translate("xpack.apm.transactionActionMenu.showPodMetricsLinkLabel",{defaultMessage:"Show pod metrics"}),condition:!!podId,path:"/link-to/pod-detail/".concat(podId),query:infraMetricsQuery},{icon:"infraApp",label:i18n_1.i18n.translate("xpack.apm.transactionActionMenu.showContainerMetricsLinkLabel",{defaultMessage:"Show container metrics"}),condition:!!containerId,path:"/link-to/container-detail/".concat(containerId),query:infraMetricsQuery},{icon:"infraApp",label:i18n_1.i18n.translate("xpack.apm.transactionActionMenu.showHostMetricsLinkLabel",{defaultMessage:"Show host metrics"}),condition:!!hostName,path:"/link-to/host-detail/".concat(hostName),query:infraMetricsQuery}];var infraItems=infraConfigItems.map(function(_ref2,index){var icon=_ref2.icon,label=_ref2.label,condition=_ref2.condition,path=_ref2.path,query=_ref2.query;return{icon:icon,key:"infra-link-".concat(index),child:react_1.default.createElement(InfraLink_1.InfraLink,{path:path,query:query},label),condition:condition}});var uptimeLink=url_1.default.format({pathname:chrome_1.default.addBasePath("/app/uptime"),hash:"/?".concat(url_helpers_1.fromQuery(lodash_1.pick({dateRangeStart:urlParams.rangeFrom,dateRangeEnd:urlParams.rangeTo,search:'url.domain:"'.concat(transaction!=null&&transaction.url!=null?transaction.url.domain:undefined,'"')},function(val){return!!val})))});var menuItems=[].concat(_toConsumableArray(infraItems),[{icon:"discoverApp",key:"discover-transaction",condition:true,child:react_1.default.createElement(DiscoverTransactionLink_1.DiscoverTransactionLink,{transaction:transaction},i18n_1.i18n.translate("xpack.apm.transactionActionMenu.viewSampleDocumentLinkLabel",{defaultMessage:"View sample document"}))},{icon:"uptimeApp",key:"uptime",child:react_1.default.createElement(eui_1.EuiLink,{href:uptimeLink},i18n_1.i18n.translate("xpack.apm.transactionActionMenu.viewInUptime",{defaultMessage:"View monitor status"})),condition:transaction!=null&&transaction.url!=null?transaction.url.domain:undefined}]).filter(function(_ref3){var condition=_ref3.condition;return condition}).map(function(_ref4){var icon=_ref4.icon,key=_ref4.key,child=_ref4.child,condition=_ref4.condition;return condition?react_1.default.createElement(eui_1.EuiContextMenuItem,{icon:icon,key:key},react_1.default.createElement(eui_1.EuiFlexGroup,{gutterSize:"s"},react_1.default.createElement(eui_1.EuiFlexItem,null,child),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiIcon,{type:"popout"})))):null});return react_1.default.createElement(eui_1.EuiPopover,{id:"transactionActionMenu",button:react_1.default.createElement(ActionMenuButton,{onClick:function onClick(){return setIsOpen(!isOpen)}}),isOpen:isOpen,closePopover:function closePopover(){return setIsOpen(false)},anchorPosition:"downRight",panelPaddingSize:"none"},react_1.default.createElement(eui_1.EuiContextMenuPanel,{items:menuItems,title:i18n_1.i18n.translate("xpack.apm.transactionActionMenu.actionsLabel",{defaultMessage:"Actions"})}))}},1582:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var elasticsearch_fieldnames_1=__webpack_require__(320);var i18n_2=__webpack_require__(342);var formatters_1=__webpack_require__(299);var StickyProperties_1=__webpack_require__(711);var ErrorCountBadge_1=__webpack_require__(1583);function StickyTransactionProperties(_ref){var transaction=_ref.transaction,totalDuration=_ref.totalDuration,errorCount=_ref.errorCount;var timestamp=transaction["@timestamp"];var url=(transaction!=null&&transaction.context!=null&&transaction.context.page!=null?transaction.context.page.url:undefined)||(transaction!=null&&transaction.url!=null?transaction.url.full:undefined)||i18n_2.NOT_AVAILABLE_LABEL;var duration=transaction.transaction.duration.us;var noErrorsText=i18n_1.i18n.translate("xpack.apm.transactionDetails.errorsNone",{defaultMessage:"None"});var stickyProperties=[{label:i18n_1.i18n.translate("xpack.apm.transactionDetails.timestampLabel",{defaultMessage:"Timestamp"}),fieldName:"@timestamp",val:timestamp,truncated:true,width:"50%"},{fieldName:elasticsearch_fieldnames_1.URL_FULL,label:"URL",val:url,truncated:true,width:"50%"},{label:i18n_1.i18n.translate("xpack.apm.transactionDetails.durationLabel",{defaultMessage:"Duration"}),fieldName:elasticsearch_fieldnames_1.TRANSACTION_DURATION,val:formatters_1.asTime(duration),width:"25%"},{label:i18n_1.i18n.translate("xpack.apm.transactionDetails.percentOfTraceLabel",{defaultMessage:"% of trace"}),val:formatters_1.asPercent(duration,totalDuration,i18n_2.NOT_AVAILABLE_LABEL),width:"25%"},{label:i18n_1.i18n.translate("xpack.apm.transactionDetails.resultLabel",{defaultMessage:"Result"}),fieldName:elasticsearch_fieldnames_1.TRANSACTION_RESULT,val:(transaction!=null&&transaction.transaction!=null?transaction.transaction.result:undefined)||i18n_2.NOT_AVAILABLE_LABEL,width:"14%"},{label:i18n_1.i18n.translate("xpack.apm.transactionDetails.errorsOverviewLabel",{defaultMessage:"Errors"}),val:errorCount?react_1.default.createElement(ErrorCountBadge_1.ErrorCountBadge,{errorCount:errorCount,transaction:transaction,verbose:true}):noErrorsText,width:"18%"},{label:i18n_1.i18n.translate("xpack.apm.transactionDetails.userIdLabel",{defaultMessage:"User ID"}),fieldName:elasticsearch_fieldnames_1.USER_ID,val:(transaction!=null&&transaction.user!=null?transaction.user.id:undefined)||i18n_2.NOT_AVAILABLE_LABEL,truncated:true,width:"18%"}];return react_1.default.createElement(StickyProperties_1.StickyProperties,{stickyProperties:stickyProperties})}exports.StickyTransactionProperties=StickyTransactionProperties},1583:function(module,exports,__webpack_require__){"use strict";function _templateObject(){var data=_taggedTemplateLiteral(["\n  font-size: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var variables_1=__webpack_require__(53);var APMLink_1=__webpack_require__(410);var url_helpers_1=__webpack_require__(219);var LinkLabel=styled_components_1.default.span(_templateObject(),variables_1.fontSize);exports.ErrorCountBadge=function(_ref){var _ref$errorCount=_ref.errorCount,errorCount=_ref$errorCount===void 0?0:_ref$errorCount,transaction=_ref.transaction,verbose=_ref.verbose;var toolTipContent=i18n_1.i18n.translate("xpack.apm.transactionDetails.errorsOverviewLinkTooltip",{values:{errorCount:errorCount},defaultMessage:"{errorCount, plural, one {View 1 related error} other {View # related errors}}"});var errorCountBadge=react_1.default.createElement(eui_1.EuiBadge,{color:eui_theme_light_json_1.default.euiColorDanger,onClick:function onClick(event){event.stopPropagation()},onClickAriaLabel:toolTipContent},errorCount);return react_1.default.createElement(APMLink_1.APMLink,{path:"/".concat(transaction!=null&&transaction.service!=null?transaction.service.name:undefined,"/errors"),query:{kuery:url_helpers_1.legacyEncodeURIComponent('trace.id : "'.concat(transaction.trace.id,'" and transaction.id : "').concat(transaction.transaction.id,'"'))},color:"danger",style:{textDecoration:"none"}},verbose?react_1.default.createElement(react_1.Fragment,null,errorCountBadge,react_1.default.createElement(LinkLabel,null," ",i18n_1.i18n.translate("xpack.apm.transactionDetails.errorsOverviewLink",{values:{errorCount:errorCount},defaultMessage:"{errorCount, plural, one {Related error} other {Related errors}}"}))):react_1.default.createElement(eui_1.EuiToolTip,{content:toolTipContent},errorCountBadge))}},1584:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var __1=__webpack_require__(1560);var sections_1=__webpack_require__(4220);function TransactionMetadata(_ref){var transaction=_ref.transaction;return react_1.default.createElement(__1.MetadataTable,{item:transaction,sections:sections_1.TRANSACTION_METADATA_SECTIONS})}exports.TransactionMetadata=TransactionMetadata},1585:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var elasticsearch_fieldnames_1=__webpack_require__(320);var APMLink_1=__webpack_require__(410);var TransactionLink_1=__webpack_require__(979);var StickyProperties_1=__webpack_require__(711);function FlyoutTopLevelProperties(_ref){var transaction=_ref.transaction;if(!transaction){return null}var stickyProperties=[{label:i18n_1.i18n.translate("xpack.apm.transactionDetails.serviceLabel",{defaultMessage:"Service"}),fieldName:elasticsearch_fieldnames_1.SERVICE_NAME,val:react_1.default.createElement(APMLink_1.APMLink,{path:"/".concat(transaction.service.name)},transaction.service.name),width:"50%"},{label:i18n_1.i18n.translate("xpack.apm.transactionDetails.transactionLabel",{defaultMessage:"Transaction"}),fieldName:elasticsearch_fieldnames_1.TRANSACTION_NAME,val:react_1.default.createElement(TransactionLink_1.TransactionLink,{transaction:transaction},transaction.transaction.name),width:"50%"}];return react_1.default.createElement(StickyProperties_1.StickyProperties,{stickyProperties:stickyProperties})}exports.FlyoutTopLevelProperties=FlyoutTopLevelProperties},1586:function(module,exports,__webpack_require__){"use strict";function _templateObject(){var data=_taggedTemplateLiteral(["\n  width: 100%;\n\n  @media (min-width: 800px) {\n    width: 90%;\n  }\n\n  @media (min-width: 1000px) {\n    width: 80%;\n  }\n\n  @media (min-width: 1400px) {\n    width: 70%;\n  }\n\n  @media (min-width: 2000px) {\n    width: 60%;\n  }\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));exports.ResponsiveFlyout=styled_components_1.default(eui_1.EuiFlyout)(_templateObject())},1587:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var KibanaLink_1=__webpack_require__(598);var SETUP_INSTRUCTIONS_LABEL=i18n_1.i18n.translate("xpack.apm.setupInstructionsButtonLabel",{defaultMessage:"Setup Instructions"});function SetupInstructionsLink(_ref){var _ref$buttonFill=_ref.buttonFill,buttonFill=_ref$buttonFill===void 0?false:_ref$buttonFill;return react_1.default.createElement(KibanaLink_1.KibanaLink,{path:"/home/tutorial/apm"},buttonFill?react_1.default.createElement(eui_1.EuiButton,{size:"s",color:"primary",fill:buttonFill,iconType:"help"},SETUP_INSTRUCTIONS_LABEL):react_1.default.createElement(eui_1.EuiButtonEmpty,{size:"s",color:"primary",iconType:"help"},SETUP_INSTRUCTIONS_LABEL))}exports.SetupInstructionsLink=SetupInstructionsLink},219:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var querystring_1=tslib_1.__importDefault(__webpack_require__(74));function toQuery(search){return search?querystring_1.default.parse(search.slice(1)):{}}exports.toQuery=toQuery;function fromQuery(query){return querystring_1.default.stringify(query,undefined,undefined,{encodeURIComponent:function(_encodeURIComponent){function encodeURIComponent(_x){return _encodeURIComponent.apply(this,arguments)}encodeURIComponent.toString=function(){return _encodeURIComponent.toString()};return encodeURIComponent}(function(value){return encodeURIComponent(value).replace(/%3A/g,":")})})}exports.fromQuery=fromQuery;function legacyEncodeURIComponent(rawUrl){return rawUrl&&encodeURIComponent(rawUrl).replace(/~/g,"%7E").replace(/%/g,"~")}exports.legacyEncodeURIComponent=legacyEncodeURIComponent;function legacyDecodeURIComponent(encodedUrl){return encodedUrl&&decodeURIComponent(encodedUrl.replace(/~/g,"%"))}exports.legacyDecodeURIComponent=legacyDecodeURIComponent},248:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var LoadingIndicatorContext_1=__webpack_require__(1554);var useComponentId_1=__webpack_require__(4149);var FETCH_STATUS;(function(FETCH_STATUS){FETCH_STATUS["LOADING"]="loading";FETCH_STATUS["SUCCESS"]="success";FETCH_STATUS["FAILURE"]="failure"})(FETCH_STATUS=exports.FETCH_STATUS||(exports.FETCH_STATUS={}));function useFetcher(fn,useEffectKey){var id=useComponentId_1.useComponentId();var _react_1$useContext=react_1.useContext(LoadingIndicatorContext_1.LoadingIndicatorContext),dispatchStatus=_react_1$useContext.dispatchStatus;var _react_1$useState=react_1.useState({}),_react_1$useState2=_slicedToArray(_react_1$useState,2),result=_react_1$useState2[0],setResult=_react_1$useState2[1];react_1.useEffect(function(){var didCancel=false;dispatchStatus({id:id,isLoading:true});setResult({data:result.data,status:FETCH_STATUS.LOADING,error:undefined});function doFetch(){return _doFetch.apply(this,arguments)}function _doFetch(){_doFetch=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var data;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fn();case 3:data=_context.sent;if(!didCancel){dispatchStatus({id:id,isLoading:false});setResult({data:data,status:FETCH_STATUS.SUCCESS,error:undefined})}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);if(!didCancel){dispatchStatus({id:id,isLoading:false});setResult({data:undefined,status:FETCH_STATUS.FAILURE,error:_context.t0})}case 10:case"end":return _context.stop()}}},_callee,null,[[0,7]])}));return _doFetch.apply(this,arguments)}doFetch();return function(){dispatchStatus({id:id,isLoading:false});didCancel=true}},useEffectKey);return result||{}}exports.useFetcher=useFetcher},298:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var createHashHistory_1=tslib_1.__importDefault(__webpack_require__(1551));var history=createHashHistory_1.default();exports.history=history},299:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var numeral_1=tslib_1.__importDefault(__webpack_require__(217));var i18n_1=__webpack_require__(4);var lodash_1=__webpack_require__(3);var i18n_2=__webpack_require__(342);var SECONDS_CUT_OFF=10*1e6;var MILLISECONDS_CUT_OFF=10*1e3;var SPACE=" ";function asSeconds(value){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$withUnit=_ref.withUnit,withUnit=_ref$withUnit===void 0?true:_ref$withUnit,_ref$defaultValue=_ref.defaultValue,defaultValue=_ref$defaultValue===void 0?i18n_2.NOT_AVAILABLE_LABEL:_ref$defaultValue;if(value==null){return defaultValue}var secondsLabel=SPACE+i18n_1.i18n.translate("xpack.apm.formatters.secondsTimeUnitLabel",{defaultMessage:"s"});var formatted=asDecimal(value/1e6);return"".concat(formatted).concat(withUnit?secondsLabel:"")}exports.asSeconds=asSeconds;function asMillis(value){var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref2$withUnit=_ref2.withUnit,withUnit=_ref2$withUnit===void 0?true:_ref2$withUnit,_ref2$defaultValue=_ref2.defaultValue,defaultValue=_ref2$defaultValue===void 0?i18n_2.NOT_AVAILABLE_LABEL:_ref2$defaultValue;if(value==null){return defaultValue}var millisLabel=SPACE+i18n_1.i18n.translate("xpack.apm.formatters.millisTimeUnitLabel",{defaultMessage:"ms"});var formatted=asInteger(value/1e3);return"".concat(formatted).concat(withUnit?millisLabel:"")}exports.asMillis=asMillis;function asMicros(value){var _ref3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref3$withUnit=_ref3.withUnit,withUnit=_ref3$withUnit===void 0?true:_ref3$withUnit,_ref3$defaultValue=_ref3.defaultValue,defaultValue=_ref3$defaultValue===void 0?i18n_2.NOT_AVAILABLE_LABEL:_ref3$defaultValue;if(value==null){return defaultValue}var microsLabel=SPACE+i18n_1.i18n.translate("xpack.apm.formatters.microsTimeUnitLabel",{defaultMessage:"μs"});var formatted=asInteger(value);return"".concat(formatted).concat(withUnit?microsLabel:"")}exports.asMicros=asMicros;exports.getTimeFormatter=lodash_1.memoize(function(max){var unit=timeUnit(max);switch(unit){case"s":return asSeconds;case"ms":return asMillis;case"us":return asMicros}});function timeUnit(max){if(max>SECONDS_CUT_OFF){return"s"}else if(max>MILLISECONDS_CUT_OFF){return"ms"}else{return"us"}}exports.timeUnit=timeUnit;function asTime(value){var _ref4=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref4$withUnit=_ref4.withUnit,withUnit=_ref4$withUnit===void 0?true:_ref4$withUnit,_ref4$defaultValue=_ref4.defaultValue,defaultValue=_ref4$defaultValue===void 0?i18n_2.NOT_AVAILABLE_LABEL:_ref4$defaultValue;if(value==null){return defaultValue}var formatter=exports.getTimeFormatter(value);return formatter(value,{withUnit:withUnit,defaultValue:defaultValue})}exports.asTime=asTime;function asDecimal(value){return numeral_1.default(value).format("0,0.0")}exports.asDecimal=asDecimal;function asInteger(value){return numeral_1.default(value).format("0,0")}exports.asInteger=asInteger;function tpmUnit(type){return type==="request"?i18n_1.i18n.translate("xpack.apm.formatters.requestsPerMinLabel",{defaultMessage:"rpm"}):i18n_1.i18n.translate("xpack.apm.formatters.transactionsPerMinLabel",{defaultMessage:"tpm"})}exports.tpmUnit=tpmUnit;function asPercent(numerator,denominator){var fallbackResult=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(!denominator||isNaN(numerator)){return fallbackResult}var decimal=numerator/denominator;return numeral_1.default(decimal).format("0.0%")}exports.asPercent=asPercent;function asKilobytes(value){if(value===null||isNaN(value)){return""}return"".concat(asDecimal(value/1e3)," KB")}function asMegabytes(value){if(value===null||isNaN(value)){return""}return"".concat(asDecimal(value/1e6)," MB")}function asGigabytes(value){if(value===null||isNaN(value)){return""}return"".concat(asDecimal(value/1e9)," GB")}function asTerabytes(value){if(value===null||isNaN(value)){return""}return"".concat(asDecimal(value/1e12)," TB")}function asBytes(value){if(value===null||isNaN(value)){return""}return"".concat(asDecimal(value)," B")}exports.asBytes=asBytes;function asDynamicBytes(value){if(value===null||isNaN(value)){return""}return unmemoizedFixedByteFormatter(value)(value)}exports.asDynamicBytes=asDynamicBytes;var unmemoizedFixedByteFormatter=function unmemoizedFixedByteFormatter(max){if(max>1e12){return asTerabytes}if(max>1e9){return asGigabytes}if(max>1e6){return asMegabytes}if(max>1e3){return asKilobytes}return asBytes};exports.getFixedByteFormatter=lodash_1.memoize(unmemoizedFixedByteFormatter)},319:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var LocationContext_1=__webpack_require__(1552);function useLocation(){return react_1.useContext(LocationContext_1.LocationContext)}exports.useLocation=useLocation},320:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SERVICE_NAME="service.name";exports.SERVICE_ENVIRONMENT="service.environment";exports.SERVICE_AGENT_NAME="agent.name";exports.URL_FULL="url.full";exports.HTTP_REQUEST_METHOD="http.request.method";exports.USER_ID="user.id";exports.OBSERVER_VERSION_MAJOR="observer.version_major";exports.OBSERVER_LISTENING="observer.listening";exports.PROCESSOR_EVENT="processor.event";exports.TRANSACTION_DURATION="transaction.duration.us";exports.TRANSACTION_TYPE="transaction.type";exports.TRANSACTION_RESULT="transaction.result";exports.TRANSACTION_NAME="transaction.name";exports.TRANSACTION_ID="transaction.id";exports.TRANSACTION_SAMPLED="transaction.sampled";exports.TRACE_ID="trace.id";exports.SPAN_DURATION="span.duration.us";exports.SPAN_TYPE="span.type";exports.SPAN_SUBTYPE="span.subtype";exports.SPAN_ACTION="span.action";exports.SPAN_NAME="span.name";exports.SPAN_ID="span.id";exports.PARENT_ID="parent.id";exports.ERROR_GROUP_ID="error.grouping_key";exports.ERROR_CULPRIT="error.culprit";exports.ERROR_LOG_MESSAGE="error.log.message";exports.ERROR_EXC_MESSAGE="error.exception.message";exports.ERROR_EXC_HANDLED="error.exception.handled";exports.METRIC_SYSTEM_FREE_MEMORY="system.memory.actual.free";exports.METRIC_SYSTEM_TOTAL_MEMORY="system.memory.total";exports.METRIC_SYSTEM_CPU_PERCENT="system.cpu.total.norm.pct";exports.METRIC_PROCESS_CPU_PERCENT="system.process.cpu.total.norm.pct";exports.METRIC_JAVA_HEAP_MEMORY_MAX="jvm.memory.heap.max";exports.METRIC_JAVA_HEAP_MEMORY_COMMITTED="jvm.memory.heap.committed";exports.METRIC_JAVA_HEAP_MEMORY_USED="jvm.memory.heap.used";exports.METRIC_JAVA_NON_HEAP_MEMORY_MAX="jvm.memory.non_heap.max";exports.METRIC_JAVA_NON_HEAP_MEMORY_COMMITTED="jvm.memory.non_heap.committed";exports.METRIC_JAVA_NON_HEAP_MEMORY_USED="jvm.memory.non_heap.used";exports.METRIC_JAVA_THREAD_COUNT="jvm.thread.count"},341:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var lodash_1=__webpack_require__(3);var lru_cache_1=tslib_1.__importDefault(__webpack_require__(1462));var object_hash_1=tslib_1.__importDefault(__webpack_require__(4151));var kfetch_1=__webpack_require__(32);function fetchOptionsWithDebug(fetchOptions){var debugEnabled=sessionStorage.getItem("apm_debug")==="true"&&lodash_1.startsWith(fetchOptions.pathname,"/api/apm");if(!debugEnabled){return fetchOptions}return _objectSpread({},fetchOptions,{query:_objectSpread({},fetchOptions.query,{_debug:true})})}var cache=new lru_cache_1.default({max:100,maxAge:1e3*60*60});function _clearCache(){cache.reset()}exports._clearCache=_clearCache;function callApi(_x,_x2){return _callApi.apply(this,arguments)}function _callApi(){_callApi=_asyncToGenerator(regeneratorRuntime.mark(function _callee(fetchOptions,options){var cacheKey,cacheResponse,combinedFetchOptions,res;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cacheKey=getCacheKey(fetchOptions);cacheResponse=cache.get(cacheKey);if(!cacheResponse){_context.next=4;break}return _context.abrupt("return",cacheResponse);case 4:combinedFetchOptions=fetchOptionsWithDebug(fetchOptions);_context.next=7;return kfetch_1.kfetch(combinedFetchOptions,options);case 7:res=_context.sent;if(isCachable(fetchOptions)){cache.set(cacheKey,res)}return _context.abrupt("return",res);case 10:case"end":return _context.stop()}}},_callee)}));return _callApi.apply(this,arguments)}exports.callApi=callApi;function isCachable(fetchOptions){if(!(fetchOptions.query&&fetchOptions.query.start&&fetchOptions.query.end)){return false}return lodash_1.isString(fetchOptions.query.end)&&new Date(fetchOptions.query.end).getTime()<Date.now()}function getCacheKey(options){return object_hash_1.default(options)}},342:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var i18n_1=__webpack_require__(4);exports.NOT_AVAILABLE_LABEL=i18n_1.i18n.translate("xpack.apm.notAvailableLabel",{defaultMessage:"N/A"})},343:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(4398)},374:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var UrlParamsContext_1=__webpack_require__(409);function useUrlParams(){return react_1.useContext(UrlParamsContext_1.UrlParamsContext)}exports.useUrlParams=useUrlParams},409:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importStar(__webpack_require__(0));var react_router_dom_1=__webpack_require__(23);var lodash_1=__webpack_require__(3);var helpers_1=__webpack_require__(1553);var resolveUrlParams_1=__webpack_require__(4146);function useUiFilters(_ref){var kuery=_ref.kuery,environment=_ref.environment;return react_1.useMemo(function(){return{kuery:kuery,environment:environment}},[kuery,environment])}exports.useUiFilters=useUiFilters;var defaultRefresh=function defaultRefresh(time){};var UrlParamsContext=react_1.createContext({urlParams:{},refreshTimeRange:defaultRefresh,uiFilters:{}});exports.UrlParamsContext=UrlParamsContext;var UrlParamsProvider=react_router_dom_1.withRouter(function(_ref2){var location=_ref2.location,children=_ref2.children;var refUrlParams=react_1.useRef(resolveUrlParams_1.resolveUrlParams(location,{}));var _react_1$useState=react_1.useState(""),_react_1$useState2=_slicedToArray(_react_1$useState,2),forceUpdate=_react_1$useState2[1];var urlParams=react_1.useMemo(function(){return resolveUrlParams_1.resolveUrlParams(location,{start:refUrlParams.current.start,end:refUrlParams.current.end,rangeFrom:refUrlParams.current.rangeFrom,rangeTo:refUrlParams.current.rangeTo})},[location,refUrlParams.current]);refUrlParams.current=urlParams;var refreshTimeRange=react_1.useCallback(function(timeRange){refUrlParams.current=_objectSpread({},refUrlParams.current,{start:helpers_1.getParsedDate(timeRange.rangeFrom),end:helpers_1.getParsedDate(timeRange.rangeTo,{roundUp:true})});forceUpdate(lodash_1.uniqueId())},[forceUpdate]);var uiFilters=useUiFilters(urlParams);var contextValue=react_1.useMemo(function(){return{urlParams:urlParams,refreshTimeRange:refreshTimeRange,uiFilters:uiFilters}},[urlParams,refreshTimeRange,uiFilters]);return react_1.default.createElement(UrlParamsContext.Provider,{children:children,value:contextValue})});exports.UrlParamsProvider=UrlParamsProvider},410:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var url_1=tslib_1.__importDefault(__webpack_require__(31));var lodash_1=__webpack_require__(3);var useLocation_1=__webpack_require__(319);var url_helpers_1=__webpack_require__(219);var constants_1=__webpack_require__(969);exports.PERSISTENT_APM_PARAMS=["kuery","rangeFrom","rangeTo","refreshPaused","refreshInterval","environment"];function getAPMHref(path,currentSearch){var query=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var currentQuery=url_helpers_1.toQuery(currentSearch);var nextQuery=_objectSpread({},constants_1.TIMEPICKER_DEFAULTS,lodash_1.pick(currentQuery,exports.PERSISTENT_APM_PARAMS),query);var nextSearch=url_helpers_1.fromQuery(nextQuery);return url_1.default.format({pathname:"",hash:"".concat(path,"?").concat(nextSearch)})}exports.getAPMHref=getAPMHref;function APMLink(_ref){var _ref$path=_ref.path,path=_ref$path===void 0?"":_ref$path,query=_ref.query,rest=_objectWithoutProperties(_ref,["path","query"]);var _useLocation_1$useLoc=useLocation_1.useLocation(),search=_useLocation_1$useLoc.search;var href=getAPMHref(path,search,query);return react_1.default.createElement(eui_1.EuiLink,Object.assign({},rest,{href:href}))}exports.APMLink=APMLink},4142:function(module,exports,__webpack_require__){"use strict";__webpack_require__(86);__webpack_require__(87);__webpack_require__(88);__webpack_require__(89);__webpack_require__(90);__webpack_require__(91);__webpack_require__(92);__webpack_require__(93);__webpack_require__(94);__webpack_require__(95);__webpack_require__(96);__webpack_require__(97);__webpack_require__(98);__webpack_require__(99);__webpack_require__(100);__webpack_require__(101);__webpack_require__(102);__webpack_require__(103);__webpack_require__(104);__webpack_require__(105);__webpack_require__(106);__webpack_require__(107);__webpack_require__(108);__webpack_require__(109);__webpack_require__(110);__webpack_require__(111);__webpack_require__(112);__webpack_require__(113);__webpack_require__(114);__webpack_require__(115);__webpack_require__(116);__webpack_require__(117);__webpack_require__(118);__webpack_require__(119);__webpack_require__(120);__webpack_require__(121);__webpack_require__(122);__webpack_require__(123);__webpack_require__(124);__webpack_require__(125);__webpack_require__(126);__webpack_require__(127);__webpack_require__(128);__webpack_require__(129);__webpack_require__(130);__webpack_require__(131);__webpack_require__(132);__webpack_require__(133);__webpack_require__(134);__webpack_require__(135);__webpack_require__(136);__webpack_require__(137);__webpack_require__(138);__webpack_require__(139);__webpack_require__(140);__webpack_require__(141);__webpack_require__(142);__webpack_require__(143);__webpack_require__(144);__webpack_require__(145);__webpack_require__(146);__webpack_require__(147);__webpack_require__(148);__webpack_require__(149);__webpack_require__(150);__webpack_require__(151);__webpack_require__(152);__webpack_require__(153);__webpack_require__(154);__webpack_require__(155);__webpack_require__(156);__webpack_require__(157);__webpack_require__(158);__webpack_require__(159);__webpack_require__(160);__webpack_require__(161);__webpack_require__(162);__webpack_require__(163);__webpack_require__(164);__webpack_require__(165);__webpack_require__(166);__webpack_require__(167);__webpack_require__(168);__webpack_require__(169);__webpack_require__(170);__webpack_require__(171);__webpack_require__(172);__webpack_require__(173);__webpack_require__(174);__webpack_require__(175);__webpack_require__(176);__webpack_require__(177);__webpack_require__(178);__webpack_require__(179);__webpack_require__(180);__webpack_require__(181);__webpack_require__(182);__webpack_require__(183);__webpack_require__(184);__webpack_require__(185);__webpack_require__(186);__webpack_require__(187);__webpack_require__(188);__webpack_require__(189);__webpack_require__(190);__webpack_require__(191);__webpack_require__(192);__webpack_require__(193);__webpack_require__(194);__webpack_require__(195);__webpack_require__(196);__webpack_require__(197);__webpack_require__(198);__webpack_require__(199);__webpack_require__(200);__webpack_require__(201);__webpack_require__(202);__webpack_require__(203);__webpack_require__(204);__webpack_require__(205);__webpack_require__(206);__webpack_require__(207);__webpack_require__(208);__webpack_require__(209);__webpack_require__(210);__webpack_require__(211);__webpack_require__(212);__webpack_require__(213);__webpack_require__(214);__webpack_require__(215);__webpack_require__(216);var _i18n=__webpack_require__(4);var _kibanaCore__=__webpack_require__(73);__webpack_require__.nc=window.__kbnNonce__;var injectedMetadata=JSON.parse(document.querySelector("kbn-injected-metadata").getAttribute("data"));_i18n.i18n.load(injectedMetadata.i18n.translationsUrl).catch(function(e){return e}).then(function(i18nError){var coreSystem=new _kibanaCore__.CoreSystem({injectedMetadata:injectedMetadata,rootDomElement:document.body,browserSupportsCsp:!window.__kbnCspNotEnforced__,requireLegacyFiles:function requireLegacyFiles(){__webpack_require__(4143)}});coreSystem.setup().then(function(coreSetup){if(i18nError){coreSetup.fatalErrors.add(i18nError)}return coreSystem.start()})})},4143:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_dom_1=tslib_1.__importDefault(__webpack_require__(17));__webpack_require__(968);__webpack_require__(255);__webpack_require__(278);var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var i18n_1=__webpack_require__(15);__webpack_require__(403);var GlobalHelpExtension_1=__webpack_require__(4144);var new_platform_1=__webpack_require__(4145);var plugin_1=__webpack_require__(1550);__webpack_require__(4250);var index_html_1=tslib_1.__importDefault(__webpack_require__(4251));chrome_1.default.helpExtension.set(function(domElement){react_dom_1.default.render(react_1.default.createElement(GlobalHelpExtension_1.GlobalHelpExtension,null),domElement);return function(){react_dom_1.default.unmountComponentAtNode(domElement)}});chrome_1.default.setRootTemplate(index_html_1.default);var checkForRoot=function checkForRoot(){return new Promise(function(resolve){var ready=!!document.getElementById(plugin_1.REACT_APP_ROOT_ID);if(ready){resolve()}else{setTimeout(function(){return resolve(checkForRoot())},10)}})};checkForRoot().then(function(){var core={i18n:{Context:i18n_1.I18nContext}};new_platform_1.plugin().setup(core)})},4144:function(module,exports,__webpack_require__){"use strict";function _templateObject(){var data=_taggedTemplateLiteral(["\n  margin: "," 0;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var url_1=tslib_1.__importDefault(__webpack_require__(31));var variables_1=__webpack_require__(53);var Container=styled_components_1.default.div(_templateObject(),variables_1.px(variables_1.units.minus));exports.GlobalHelpExtension=function(){return react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(Container,null,react_1.default.createElement(eui_1.EuiLink,{href:"https://discuss.elastic.co/c/apm",target:"_blank",rel:"noopener"},i18n_1.i18n.translate("xpack.apm.feedbackMenu.provideFeedbackTitle",{defaultMessage:"Provide feedback for APM"}))),react_1.default.createElement(Container,null,react_1.default.createElement(eui_1.EuiLink,{href:url_1.default.format({pathname:chrome_1.default.addBasePath("/app/kibana"),hash:"/management/elasticsearch/upgrade_assistant"})},i18n_1.i18n.translate("xpack.apm.helpMenu.upgradeAssistantLink",{defaultMessage:"Upgrade assistant"}))))}},4145:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var plugin_1=__webpack_require__(1550);function plugin(){return new plugin_1.Plugin}exports.plugin=plugin},4146:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var helpers_1=__webpack_require__(1553);var url_helpers_1=__webpack_require__(219);var constants_1=__webpack_require__(969);function resolveUrlParams(location,state){var _helpers_1$getPathPar=helpers_1.getPathParams(location.pathname),processorEvent=_helpers_1$getPathPar.processorEvent,serviceName=_helpers_1$getPathPar.serviceName,transactionName=_helpers_1$getPathPar.transactionName,transactionType=_helpers_1$getPathPar.transactionType,errorGroupId=_helpers_1$getPathPar.errorGroupId;var _url_helpers_1$toQuer=url_helpers_1.toQuery(location.search),traceId=_url_helpers_1$toQuer.traceId,transactionId=_url_helpers_1$toQuer.transactionId,detailTab=_url_helpers_1$toQuer.detailTab,flyoutDetailTab=_url_helpers_1$toQuer.flyoutDetailTab,waterfallItemId=_url_helpers_1$toQuer.waterfallItemId,spanId=_url_helpers_1$toQuer.spanId,page=_url_helpers_1$toQuer.page,sortDirection=_url_helpers_1$toQuer.sortDirection,sortField=_url_helpers_1$toQuer.sortField,kuery=_url_helpers_1$toQuer.kuery,_url_helpers_1$toQuer2=_url_helpers_1$toQuer.refreshPaused,refreshPaused=_url_helpers_1$toQuer2===void 0?constants_1.TIMEPICKER_DEFAULTS.refreshPaused:_url_helpers_1$toQuer2,_url_helpers_1$toQuer3=_url_helpers_1$toQuer.refreshInterval,refreshInterval=_url_helpers_1$toQuer3===void 0?constants_1.TIMEPICKER_DEFAULTS.refreshInterval:_url_helpers_1$toQuer3,_url_helpers_1$toQuer4=_url_helpers_1$toQuer.rangeFrom,rangeFrom=_url_helpers_1$toQuer4===void 0?constants_1.TIMEPICKER_DEFAULTS.rangeFrom:_url_helpers_1$toQuer4,_url_helpers_1$toQuer5=_url_helpers_1$toQuer.rangeTo,rangeTo=_url_helpers_1$toQuer5===void 0?constants_1.TIMEPICKER_DEFAULTS.rangeTo:_url_helpers_1$toQuer5,environment=_url_helpers_1$toQuer.environment;return helpers_1.removeUndefinedProps({start:helpers_1.getStart(state,rangeFrom),end:helpers_1.getEnd(state,rangeTo),rangeFrom:rangeFrom,rangeTo:rangeTo,refreshPaused:helpers_1.toBoolean(refreshPaused),refreshInterval:helpers_1.toNumber(refreshInterval),sortDirection:sortDirection,sortField:sortField,page:helpers_1.toNumber(page)||0,transactionId:helpers_1.toString(transactionId),traceId:helpers_1.toString(traceId),waterfallItemId:helpers_1.toString(waterfallItemId),detailTab:helpers_1.toString(detailTab),flyoutDetailTab:helpers_1.toString(flyoutDetailTab),spanId:helpers_1.toNumber(spanId),kuery:url_helpers_1.legacyDecodeURIComponent(kuery),processorEvent:processorEvent,serviceName:serviceName,transactionType:url_helpers_1.legacyDecodeURIComponent(transactionType),transactionName:url_helpers_1.legacyDecodeURIComponent(transactionName),errorGroupId:errorGroupId,environment:environment})}exports.resolveUrlParams=resolveUrlParams},4147:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var Delayed_1=__webpack_require__(4148);function useDelayedVisibility(visible,hideDelayMs,showDelayMs,minimumVisibleDuration){var _react_1$useState=react_1.useState(false),_react_1$useState2=_slicedToArray(_react_1$useState,2),isVisible=_react_1$useState2[0],setIsVisible=_react_1$useState2[1];var delayedRef=react_1.useRef(null);react_1.useEffect(function(){var delayed=new Delayed_1.Delayed({hideDelayMs:hideDelayMs,showDelayMs:showDelayMs,minimumVisibleDuration:minimumVisibleDuration});delayed.onChange(function(visibility){setIsVisible(visibility)});delayedRef.current=delayed},[hideDelayMs,showDelayMs,minimumVisibleDuration]);react_1.useEffect(function(){if(!delayedRef.current){return}if(visible){delayedRef.current.show()}else{delayedRef.current.hide()}},[visible]);return isVisible}exports.useDelayedVisibility=useDelayedVisibility},4148:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});var Delayed=function(){function Delayed(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$minimumVisibleDu=_ref.minimumVisibleDuration,minimumVisibleDuration=_ref$minimumVisibleDu===void 0?1e3:_ref$minimumVisibleDu,_ref$showDelayMs=_ref.showDelayMs,showDelayMs=_ref$showDelayMs===void 0?50:_ref$showDelayMs,_ref$hideDelayMs=_ref.hideDelayMs,hideDelayMs=_ref$hideDelayMs===void 0?50:_ref$hideDelayMs;_classCallCheck(this,Delayed);this.displayedAt=0;this.isVisible=false;this.onChangeCallback=function(){return null};this.minimumVisibleDuration=minimumVisibleDuration;this.hideDelayMs=hideDelayMs;this.showDelayMs=showDelayMs}_createClass(Delayed,[{key:"updateState",value:function updateState(isVisible){var _this=this;window.clearTimeout(this.timeoutId);var ms=!isVisible?Math.max(this.displayedAt+this.minimumVisibleDuration-Date.now(),this.hideDelayMs):this.showDelayMs;this.timeoutId=window.setTimeout(function(){if(_this.isVisible!==isVisible){_this.isVisible=isVisible;_this.onChangeCallback(isVisible);if(isVisible){_this.displayedAt=Date.now()}}},ms)}},{key:"show",value:function show(){this.updateState(true)}},{key:"hide",value:function hide(){this.updateState(false)}},{key:"onChange",value:function onChange(onChangeCallback){this.onChangeCallback=onChangeCallback}}]);return Delayed}();exports.Delayed=Delayed},4149:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var uniqueId=0;var getUniqueId=function getUniqueId(){return uniqueId++};function useComponentId(){var idRef=react_1.useRef(getUniqueId());return idRef.current}exports.useComponentId=useComponentId},4150:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(341);function loadLicense(){return _loadLicense.apply(this,arguments)}function _loadLicense(){_loadLicense=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",callApi_1.callApi({pathname:"/api/xpack/v1/info"}));case 1:case"end":return _context.stop()}}},_callee)}));return _loadLicense.apply(this,arguments)}exports.loadLicense=loadLicense},4151:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3668)},4152:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var MANAGE_LICENSE_URL="".concat(chrome_1.default.getBasePath(),"/app/kibana#/management/elasticsearch/license_management");function InvalidLicenseNotification(){return react_1.default.createElement(eui_1.EuiEmptyPrompt,{iconType:"alert",iconColor:"warning",title:react_1.default.createElement("h1",null,i18n_1.i18n.translate("xpack.apm.invalidLicense.title",{defaultMessage:"Invalid License"})),body:react_1.default.createElement("p",null,i18n_1.i18n.translate("xpack.apm.invalidLicense.message",{defaultMessage:"The APM UI is not available because your current license has expired or is no longer valid."})),actions:[react_1.default.createElement(eui_1.EuiButton,{href:MANAGE_LICENSE_URL},i18n_1.i18n.translate("xpack.apm.invalidLicense.licenseManagementLink",{defaultMessage:"Manage your license"}))]})}exports.InvalidLicenseNotification=InvalidLicenseNotification},4153:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var lodash_1=__webpack_require__(3);var react_1=tslib_1.__importDefault(__webpack_require__(0));var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var APMLink_1=__webpack_require__(410);var ProvideBreadcrumbs_1=__webpack_require__(4154);var routeConfig_1=__webpack_require__(1555);var UpdateBreadcrumbsComponent=function(_react_1$default$Comp){_inherits(UpdateBreadcrumbsComponent,_react_1$default$Comp);function UpdateBreadcrumbsComponent(){_classCallCheck(this,UpdateBreadcrumbsComponent);return _possibleConstructorReturn(this,_getPrototypeOf(UpdateBreadcrumbsComponent).apply(this,arguments))}_createClass(UpdateBreadcrumbsComponent,[{key:"updateHeaderBreadcrumbs",value:function updateHeaderBreadcrumbs(){var _this=this;var breadcrumbs=this.props.breadcrumbs.map(function(_ref){var value=_ref.value,match=_ref.match;return{text:value,href:APMLink_1.getAPMHref(match.url,_this.props.location.search)}});var current=lodash_1.last(breadcrumbs)||{text:""};document.title=current.text;chrome_1.default.breadcrumbs.set(breadcrumbs)}},{key:"componentDidMount",value:function componentDidMount(){this.updateHeaderBreadcrumbs()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.updateHeaderBreadcrumbs()}},{key:"render",value:function render(){return null}}]);return UpdateBreadcrumbsComponent}(react_1.default.Component);function UpdateBreadcrumbs(){return react_1.default.createElement(ProvideBreadcrumbs_1.ProvideBreadcrumbs,{routes:routeConfig_1.routes,render:function render(_ref2){var breadcrumbs=_ref2.breadcrumbs,location=_ref2.location;return react_1.default.createElement(UpdateBreadcrumbsComponent,{breadcrumbs:breadcrumbs,location:location})}})}exports.UpdateBreadcrumbs=UpdateBreadcrumbs},4154:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}Object.defineProperty(exports,"__esModule",{value:true});var react_router_dom_1=__webpack_require__(23);var parse=function parse(options){var breadcrumb=options.breadcrumb,match=options.match,location=options.location;var value;if(typeof breadcrumb==="function"){value=breadcrumb({match:match,location:location})}else{value=breadcrumb}return{value:value,match:match,location:location}};function getBreadcrumb(_ref){var location=_ref.location,currentPath=_ref.currentPath,routes=_ref.routes;return routes.reduce(function(found,_ref2){var breadcrumb=_ref2.breadcrumb,route=_objectWithoutProperties(_ref2,["breadcrumb"]);if(found){return found}if(!breadcrumb){return null}var match=react_router_dom_1.matchPath(currentPath,route);if(match){return parse({breadcrumb:breadcrumb,match:match,location:location})}return null},null)}exports.getBreadcrumb=getBreadcrumb;function getBreadcrumbs(_ref3){var routes=_ref3.routes,location=_ref3.location;var breadcrumbs=[];var pathname=location.pathname;pathname.split("?")[0].replace(/\/$/,"").split("/").reduce(function(acc,next){var currentPath=!next?"/":"".concat(acc,"/").concat(next);var breadcrumb=getBreadcrumb({location:location,currentPath:currentPath,routes:routes});if(breadcrumb){breadcrumbs.push(breadcrumb)}return currentPath==="/"?"":currentPath},"");return breadcrumbs}exports.getBreadcrumbs=getBreadcrumbs;function ProvideBreadcrumbsComponent(_ref4){var _ref4$routes=_ref4.routes,routes=_ref4$routes===void 0?[]:_ref4$routes,render=_ref4.render,location=_ref4.location,match=_ref4.match,history=_ref4.history;var breadcrumbs=getBreadcrumbs({routes:routes,location:location});return render({breadcrumbs:breadcrumbs,location:location,match:match,history:history})}exports.ProvideBreadcrumbs=react_router_dom_1.withRouter(ProvideBreadcrumbsComponent)},4155:function(module,exports,__webpack_require__){"use strict";function _templateObject4(){var data=_taggedTemplateLiteral(["\n  font-family: ",";\n"]);_templateObject4=function _templateObject4(){return data};return data}function _templateObject3(){var data=_taggedTemplateLiteral(["\n  font-family: ",";\n  font-weight: bold;\n  font-size: ",";\n  margin-bottom: ",";\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  margin-bottom: ",";\n  font-size: ",";\n  color: ",";\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  margin-bottom: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var i18n_2=__webpack_require__(342);var useFetcher_1=__webpack_require__(248);var error_groups_1=__webpack_require__(1556);var variables_1=__webpack_require__(53);var ApmHeader_1=__webpack_require__(709);var DetailView_1=__webpack_require__(4167);var Distribution_1=__webpack_require__(1566);var useLocation_1=__webpack_require__(319);var useUrlParams_1=__webpack_require__(374);var Titles=styled_components_1.default.div(_templateObject(),variables_1.px(variables_1.units.plus));var Label=styled_components_1.default.div(_templateObject2(),variables_1.px(variables_1.units.quarter),variables_1.fontSizes.small,eui_theme_light_json_1.default.euiColorMediumShade);var Message=styled_components_1.default.div(_templateObject3(),variables_1.fontFamilyCode,variables_1.fontSizes.large,variables_1.px(variables_1.units.half));var Culprit=styled_components_1.default.div(_templateObject4(),variables_1.fontFamilyCode);function getShortGroupId(errorGroupId){if(!errorGroupId){return i18n_2.NOT_AVAILABLE_LABEL}return errorGroupId.slice(0,5)}function ErrorGroupDetails(){var location=useLocation_1.useLocation();var _useUrlParams_1$useUr=useUrlParams_1.useUrlParams(),urlParams=_useUrlParams_1$useUr.urlParams,uiFilters=_useUrlParams_1$useUr.uiFilters;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,errorGroupId=urlParams.errorGroupId;var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(serviceName&&start&&end&&errorGroupId){return error_groups_1.loadErrorGroupDetails({serviceName:serviceName,start:start,end:end,errorGroupId:errorGroupId,uiFilters:uiFilters})}},[serviceName,start,end,errorGroupId,uiFilters]),errorGroupData=_useFetcher_1$useFetc.data;var _useFetcher_1$useFetc2=useFetcher_1.useFetcher(function(){if(serviceName&&start&&end&&errorGroupId){return error_groups_1.loadErrorDistribution({serviceName:serviceName,start:start,end:end,errorGroupId:errorGroupId,uiFilters:uiFilters})}},[serviceName,start,end,errorGroupId,uiFilters]),errorDistributionData=_useFetcher_1$useFetc2.data;if(!errorGroupData||!errorDistributionData){return null}var showDetails=errorGroupData.occurrencesCount!==0;var logMessage=errorGroupData!=null&&errorGroupData.error!=null&&errorGroupData.error.error!=null&&errorGroupData.error.error.log!=null?errorGroupData.error.error.log.message:undefined;var excMessage=errorGroupData!=null&&errorGroupData.error!=null&&errorGroupData.error.error!=null&&errorGroupData.error.error.exception!=null&&errorGroupData.error.error.exception[0]!=null?errorGroupData.error.error.exception[0].message:undefined;var culprit=errorGroupData!=null&&errorGroupData.error!=null&&errorGroupData.error.error!=null?errorGroupData.error.error.culprit:undefined;var isUnhandled=(errorGroupData!=null&&errorGroupData.error!=null&&errorGroupData.error.error!=null&&errorGroupData.error.error.exception!=null&&errorGroupData.error.error.exception[0]!=null?errorGroupData.error.error.exception[0].handled:undefined)===false;return react_1.default.createElement("div",null,react_1.default.createElement(ApmHeader_1.ApmHeader,null,react_1.default.createElement(eui_1.EuiFlexGroup,{alignItems:"center"},react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiTitle,null,react_1.default.createElement("h1",null,i18n_1.i18n.translate("xpack.apm.errorGroupDetails.errorGroupTitle",{defaultMessage:"Error group {errorGroupId}",values:{errorGroupId:getShortGroupId(urlParams.errorGroupId)}})))),isUnhandled&&react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiBadge,{color:"warning"},i18n_1.i18n.translate("xpack.apm.errorGroupDetails.unhandledLabel",{defaultMessage:"Unhandled"}))))),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"}),react_1.default.createElement(eui_1.EuiPanel,null,showDetails&&react_1.default.createElement(Titles,null,react_1.default.createElement(eui_1.EuiText,null,logMessage&&react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(Label,null,i18n_1.i18n.translate("xpack.apm.errorGroupDetails.logMessageLabel",{defaultMessage:"Log message"})),react_1.default.createElement(Message,null,logMessage)),react_1.default.createElement(Label,null,i18n_1.i18n.translate("xpack.apm.errorGroupDetails.exceptionMessageLabel",{defaultMessage:"Exception message"})),react_1.default.createElement(Message,null,excMessage||i18n_2.NOT_AVAILABLE_LABEL),react_1.default.createElement(Label,null,i18n_1.i18n.translate("xpack.apm.errorGroupDetails.culpritLabel",{defaultMessage:"Culprit"})),react_1.default.createElement(Culprit,null,culprit||i18n_2.NOT_AVAILABLE_LABEL))),react_1.default.createElement(Distribution_1.ErrorDistribution,{distribution:errorDistributionData,title:i18n_1.i18n.translate("xpack.apm.errorGroupDetails.occurrencesChartLabel",{defaultMessage:"Occurrences"})})),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"}),showDetails&&react_1.default.createElement(DetailView_1.DetailView,{errorGroup:errorGroupData,urlParams:urlParams,location:location}))}exports.ErrorGroupDetails=ErrorGroupDetails},4156:function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var environment_filter_values_1=__webpack_require__(1557);var elasticsearch_fieldnames_1=__webpack_require__(320);function getEnvironmentUiFilterES(environment){if(!environment){return undefined}if(environment===environment_filter_values_1.ENVIRONMENT_NOT_DEFINED){return{bool:{must_not:{exists:{field:elasticsearch_fieldnames_1.SERVICE_ENVIRONMENT}}}}}return{term:_defineProperty({},elasticsearch_fieldnames_1.SERVICE_ENVIRONMENT,environment)}}exports.getEnvironmentUiFilterES=getEnvironmentUiFilterES},4157:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var kuery_1=__webpack_require__(1558);function getKueryUiFilterES(_x){return _getKueryUiFilterES.apply(this,arguments)}function _getKueryUiFilterES(){_getKueryUiFilterES=_asyncToGenerator(regeneratorRuntime.mark(function _callee(kuery){var indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(kuery){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return kuery_1.getAPMIndexPatternForKuery();case 4:indexPattern=_context.sent;if(indexPattern){_context.next=7;break}return _context.abrupt("return");case 7:return _context.abrupt("return",kuery_1.convertKueryToEsQuery(kuery,indexPattern));case 8:case"end":return _context.stop()}}},_callee)}));return _getKueryUiFilterES.apply(this,arguments)}exports.getKueryUiFilterES=getKueryUiFilterES},4158:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _templateObject(){var data=_taggedTemplateLiteral(["\n  margin-bottom: 10px;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importStar(__webpack_require__(0));var lodash_1=__webpack_require__(3);var eui_1=__webpack_require__(1);var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var react_2=__webpack_require__(5);var i18n_1=__webpack_require__(4);var url_helpers_1=__webpack_require__(219);var KibanaLink_1=__webpack_require__(598);var Typeahead_1=__webpack_require__(4159);var kuery_1=__webpack_require__(1558);var get_bool_filter_1=__webpack_require__(4163);var useLocation_1=__webpack_require__(319);var useUrlParams_1=__webpack_require__(374);var history_1=__webpack_require__(298);var Container=styled_components_1.default.div(_templateObject());function KueryBar(){var _react_1$useState=react_1.useState({indexPattern:null,suggestions:[],isLoadingIndexPattern:true,isLoadingSuggestions:false}),_react_1$useState2=_slicedToArray(_react_1$useState,2),state=_react_1$useState2[0],setState=_react_1$useState2[1];var _useUrlParams_1$useUr=useUrlParams_1.useUrlParams(),urlParams=_useUrlParams_1$useUr.urlParams;var location=useLocation_1.useLocation();var apmIndexPatternTitle=chrome_1.default.getInjected("apmIndexPatternTitle");var indexPatternMissing=!state.isLoadingIndexPattern&&!state.indexPattern;var currentRequestCheck;react_1.useEffect(function(){var didCancel=false;function loadIndexPattern(){return _loadIndexPattern.apply(this,arguments)}function _loadIndexPattern(){_loadIndexPattern=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setState(_objectSpread({},state,{isLoadingIndexPattern:true}));_context.next=3;return kuery_1.getAPMIndexPatternForKuery();case 3:indexPattern=_context.sent;if(!didCancel){_context.next=6;break}return _context.abrupt("return");case 6:if(!indexPattern){setState(_objectSpread({},state,{isLoadingIndexPattern:false}))}else{setState(_objectSpread({},state,{indexPattern:indexPattern,isLoadingIndexPattern:false}))}case 7:case"end":return _context.stop()}}},_callee)}));return _loadIndexPattern.apply(this,arguments)}loadIndexPattern();return function(){didCancel=true}},[]);function onChange(_x,_x2){return _onChange.apply(this,arguments)}function _onChange(){_onChange=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(inputValue,selectionStart){var indexPattern,currentRequest,boolFilter,suggestions;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:indexPattern=state.indexPattern;if(!(indexPattern===null)){_context2.next=3;break}return _context2.abrupt("return");case 3:setState(_objectSpread({},state,{suggestions:[],isLoadingSuggestions:true}));currentRequest=lodash_1.uniqueId();currentRequestCheck=currentRequest;boolFilter=get_bool_filter_1.getBoolFilter(urlParams);_context2.prev=7;_context2.next=10;return kuery_1.getSuggestions(inputValue,selectionStart,indexPattern,boolFilter);case 10:_context2.t0=function(suggestion){return!lodash_1.startsWith(suggestion.text,"span.")};suggestions=_context2.sent.filter(_context2.t0).slice(0,15);if(!(currentRequest!==currentRequestCheck)){_context2.next=14;break}return _context2.abrupt("return");case 14:setState(_objectSpread({},state,{suggestions:suggestions,isLoadingSuggestions:false}));_context2.next=20;break;case 17:_context2.prev=17;_context2.t1=_context2["catch"](7);console.error("Error while fetching suggestions",_context2.t1);case 20:case"end":return _context2.stop()}}},_callee2,null,[[7,17]])}));return _onChange.apply(this,arguments)}function onSubmit(inputValue){var indexPattern=state.indexPattern;if(indexPattern===null){return}try{var res=kuery_1.convertKueryToEsQuery(inputValue,indexPattern);if(!res){return}history_1.history.replace(_objectSpread({},location,{search:url_helpers_1.fromQuery(_objectSpread({},url_helpers_1.toQuery(location.search),{kuery:url_helpers_1.legacyEncodeURIComponent(inputValue.trim())}))}))}catch(e){console.log("Invalid kuery syntax")}}return react_1.default.createElement(Container,null,react_1.default.createElement(Typeahead_1.Typeahead,{disabled:indexPatternMissing,isLoading:state.isLoadingSuggestions,initialValue:urlParams.kuery,onChange:onChange,onSubmit:onSubmit,suggestions:state.suggestions}),indexPatternMissing&&react_1.default.createElement(eui_1.EuiCallOut,{style:{display:"inline-block",marginTop:"10px"},title:react_1.default.createElement("div",null,react_1.default.createElement(react_2.FormattedMessage,{id:"xpack.apm.kueryBar.indexPatternMissingWarningMessage",defaultMessage:"There's no APM index pattern with the title {apmIndexPatternTitle} available. To use the Query bar, please choose to import the APM index pattern via the {setupInstructionsLink}.",values:{apmIndexPatternTitle:'"'.concat(apmIndexPatternTitle,'"'),setupInstructionsLink:react_1.default.createElement(KibanaLink_1.KibanaLink,{path:"/home/tutorial/apm"},i18n_1.i18n.translate("xpack.apm.kueryBar.setupInstructionsLinkLabel",{defaultMessage:"Setup Instructions"}))}})),color:"warning",iconType:"alert",size:"s"}))}exports.KueryBar=KueryBar},4159:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Typeahead=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(6));var _Suggestions=_interopRequireDefault(__webpack_require__(4160));var _ClickOutside=_interopRequireDefault(__webpack_require__(4162));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KEY_CODES={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,ESC:27,TAB:9};var Typeahead=function(_Component){_inherits(Typeahead,_Component);function Typeahead(){var _getPrototypeOf2;var _this;_classCallCheck(this,Typeahead);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Typeahead)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSuggestionsVisible:false,index:null,value:"",inputIsPristine:true});_defineProperty(_assertThisInitialized(_this),"incrementIndex",function(currentIndex){var nextIndex=currentIndex+1;if(currentIndex===null||nextIndex>=_this.props.suggestions.length){nextIndex=0}_this.setState({index:nextIndex})});_defineProperty(_assertThisInitialized(_this),"decrementIndex",function(currentIndex){var previousIndex=currentIndex-1;if(previousIndex<0){previousIndex=null}_this.setState({index:previousIndex})});_defineProperty(_assertThisInitialized(_this),"onKeyUp",function(event){var selectionStart=event.target.selectionStart;var value=_this.state.value;switch(event.keyCode){case KEY_CODES.LEFT:_this.setState({isSuggestionsVisible:true});_this.props.onChange(value,selectionStart);break;case KEY_CODES.RIGHT:_this.setState({isSuggestionsVisible:true});_this.props.onChange(value,selectionStart);break}});_defineProperty(_assertThisInitialized(_this),"onKeyDown",function(event){var _this$state=_this.state,isSuggestionsVisible=_this$state.isSuggestionsVisible,index=_this$state.index,value=_this$state.value;switch(event.keyCode){case KEY_CODES.DOWN:event.preventDefault();if(isSuggestionsVisible){_this.incrementIndex(index)}else{_this.setState({isSuggestionsVisible:true,index:0})}break;case KEY_CODES.UP:event.preventDefault();if(isSuggestionsVisible){_this.decrementIndex(index)}break;case KEY_CODES.ENTER:event.preventDefault();if(isSuggestionsVisible&&_this.props.suggestions[index]){_this.selectSuggestion(_this.props.suggestions[index])}else{_this.setState({isSuggestionsVisible:false});_this.props.onSubmit(value)}break;case KEY_CODES.ESC:event.preventDefault();_this.setState({isSuggestionsVisible:false});break;case KEY_CODES.TAB:_this.setState({isSuggestionsVisible:false});break}});_defineProperty(_assertThisInitialized(_this),"selectSuggestion",function(suggestion){var nextInputValue=_this.state.value.substr(0,suggestion.start)+suggestion.text+_this.state.value.substr(suggestion.end);_this.setState({value:nextInputValue,index:null});_this.props.onChange(nextInputValue,nextInputValue.length)});_defineProperty(_assertThisInitialized(_this),"onClickOutside",function(){_this.setState({isSuggestionsVisible:false})});_defineProperty(_assertThisInitialized(_this),"onChangeInputValue",function(event){var _event$target=event.target,value=_event$target.value,selectionStart=_event$target.selectionStart;var hasValue=Boolean(value.trim());_this.setState({value:value,inputIsPristine:false,isSuggestionsVisible:hasValue,index:null});if(!hasValue){_this.props.onSubmit(value)}_this.props.onChange(value,selectionStart)});_defineProperty(_assertThisInitialized(_this),"onClickInput",function(event){var selectionStart=event.target.selectionStart;_this.props.onChange(_this.state.value,selectionStart)});_defineProperty(_assertThisInitialized(_this),"onClickSuggestion",function(suggestion){_this.selectSuggestion(suggestion);_this.inputRef.focus()});_defineProperty(_assertThisInitialized(_this),"onMouseEnterSuggestion",function(index){_this.setState({index:index})});_defineProperty(_assertThisInitialized(_this),"onSubmit",function(){_this.props.onSubmit(_this.state.value);_this.setState({isSuggestionsVisible:false})});return _this}_createClass(Typeahead,[{key:"render",value:function render(){var _this2=this;return _react.default.createElement(_ClickOutside.default,{onClickOutside:this.onClickOutside,style:{position:"relative"}},_react.default.createElement("div",{style:{position:"relative"}},_react.default.createElement(_eui.EuiFieldSearch,{fullWidth:true,style:{backgroundImage:"none"},placeholder:_i18n.i18n.translate("xpack.apm.kueryBar.searchPlaceholder",{defaultMessage:"Search transactions and errors… (E.g. {queryExample})",values:{queryExample:"transaction.duration.us > 300000 AND http.response.status_code >= 400"}}),inputRef:function inputRef(node){if(node){_this2.inputRef=node}},disabled:this.props.disabled,value:this.state.value,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onChange:this.onChangeInputValue,onClick:this.onClickInput,autoComplete:"off",spellCheck:false}),this.props.isLoading&&_react.default.createElement(_eui.EuiProgress,{size:"xs",color:"accent",position:"absolute",style:{bottom:0,top:"initial"}})),_react.default.createElement(_Suggestions.default,{show:this.state.isSuggestionsVisible,suggestions:this.props.suggestions,index:this.state.index,onClick:this.onClickSuggestion,onMouseEnter:this.onMouseEnterSuggestion}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,state){if(state.inputIsPristine&&props.initialValue){return{value:props.initialValue}}return null}}]);return Typeahead}(_react.Component);exports.Typeahead=Typeahead;Typeahead.propTypes={initialValue:_propTypes.default.string,isLoading:_propTypes.default.bool,disabled:_propTypes.default.bool,onChange:_propTypes.default.func.isRequired,onSubmit:_propTypes.default.func.isRequired,suggestions:_propTypes.default.array.isRequired};Typeahead.defaultProps={isLoading:false,disabled:false,suggestions:[]}},4160:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(6));var _styledComponents=_interopRequireDefault(__webpack_require__(13));var _lodash=__webpack_require__(3);var _Suggestion=_interopRequireDefault(__webpack_require__(4161));var _variables=__webpack_require__(53);var _polished=__webpack_require__(232);var _eui_theme_light=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _templateObject(){var data=_taggedTemplateLiteral(["\n  width: 100%;\n  border: 1px solid ",";\n  border-radius: ",";\n  box-shadow: 0px "," ","\n    ",";\n  position: absolute;\n  background: #fff;\n  z-index: 10;\n  left: 0;\n  max-height: ",";\n  overflow: scroll;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var List=_styledComponents.default.ul(_templateObject(),_eui_theme_light.default.euiColorLightShade,(0,_variables.px)(_variables.units.quarter),(0,_variables.px)(_variables.units.quarter),(0,_variables.px)(_variables.units.double),(0,_polished.tint)(.1,_eui_theme_light.default.euiColorFullShade),(0,_variables.px)(_variables.unit*20));var Suggestions=function(_Component){_inherits(Suggestions,_Component);function Suggestions(){var _getPrototypeOf2;var _this;_classCallCheck(this,Suggestions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Suggestions)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"childNodes",[]);_defineProperty(_assertThisInitialized(_this),"scrollIntoView",function(){var parent=_this.parentNode;var child=_this.childNodes[_this.props.index];if(_this.props.index==null||!parent||!child){return}var scrollTop=Math.max(Math.min(parent.scrollTop,child.offsetTop),child.offsetTop+child.offsetHeight-parent.offsetHeight);parent.scrollTop=scrollTop});return _this}_createClass(Suggestions,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.index!==this.props.index){this.scrollIntoView()}}},{key:"render",value:function render(){var _this2=this;if(!this.props.show||(0,_lodash.isEmpty)(this.props.suggestions)){return null}var suggestions=this.props.suggestions.map(function(suggestion,index){var key=suggestion+"_"+index;return _react.default.createElement(_Suggestion.default,{innerRef:function innerRef(node){return _this2.childNodes[index]=node},selected:index===_this2.props.index,suggestion:suggestion,onClick:_this2.props.onClick,onMouseEnter:function onMouseEnter(){return _this2.props.onMouseEnter(index)},key:key})});return _react.default.createElement(List,{innerRef:function innerRef(node){return _this2.parentNode=node}},suggestions)}}]);return Suggestions}(_react.Component);Suggestions.propTypes={index:_propTypes.default.number,onClick:_propTypes.default.func.isRequired,onMouseEnter:_propTypes.default.func.isRequired,show:_propTypes.default.bool,suggestions:_propTypes.default.array.isRequired};var _default=Suggestions;exports.default=_default;module.exports=exports.default},4161:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(6));var _styledComponents=_interopRequireDefault(__webpack_require__(13));var _eui=__webpack_require__(1);var _variables=__webpack_require__(53);var _polished=__webpack_require__(232);var _eui_theme_light=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _templateObject4(){var data=_taggedTemplateLiteral(["\n  flex: 0 0 ",";\n  color: ",";\n  padding: 0 ",";\n"]);_templateObject4=function _templateObject4(){return data};return data}function _templateObject3(){var data=_taggedTemplateLiteral(["\n  flex: 0 0 ",";\n  background: ",";\n  color: ",";\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  line-height: ",";\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  font-size: ",";\n  height: ",";\n  align-items: center;\n  display: flex;\n  background: ",";\n  cursor: pointer;\n  border-radius: ",";\n\n  "," {\n    p span {\n      background: ",";\n    }\n  }\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  color: ",";\n\n  p {\n    display: inline;\n\n    span {\n      font-family: ",";\n      color: ",";\n      padding: 0 ",";\n      display: inline-block;\n    }\n  }\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function getIconColor(type){switch(type){case"field":return _eui_theme_light.default.euiColorVis7;case"value":return _eui_theme_light.default.euiColorVis0;case"operator":return _eui_theme_light.default.euiColorVis1;case"conjunction":return _eui_theme_light.default.euiColorVis3;case"recentSearch":return _eui_theme_light.default.euiColorMediumShade}}var Description=_styledComponents.default.div(_templateObject(),_eui_theme_light.default.euiColorDarkShade,_variables.fontFamilyCode,_eui_theme_light.default.euiColorFullShade,(0,_variables.px)(_variables.units.quarter));var ListItem=_styledComponents.default.li(_templateObject2(),_variables.fontSizes.small,(0,_variables.px)(_variables.units.double),function(props){return props.selected?_eui_theme_light.default.euiColorLightestShade:"initial"},(0,_variables.px)(_variables.units.quarter),Description,function(props){return props.selected?_eui_theme_light.default.euiColorEmptyShade:_eui_theme_light.default.euiColorLightestShade});var Icon=_styledComponents.default.div(_templateObject3(),(0,_variables.px)(_variables.units.double),function(props){return(0,_polished.tint)(.1,getIconColor(props.type))},function(props){return getIconColor(props.type)},(0,_variables.px)(_variables.units.double));var TextValue=_styledComponents.default.div(_templateObject4(),(0,_variables.px)(_variables.unit*16),_eui_theme_light.default.euiColorDarkestShade,(0,_variables.px)(_variables.units.half));function getEuiIconType(type){switch(type){case"field":return"kqlField";case"value":return"kqlValue";case"recentSearch":return"search";case"conjunction":return"kqlSelector";case"operator":return"kqlOperand";default:throw new Error("Unknown type",type)}}function Suggestion(props){return _react.default.createElement(ListItem,{innerRef:props.innerRef,selected:props.selected,onClick:function onClick(){return props.onClick(props.suggestion)},onMouseEnter:props.onMouseEnter},_react.default.createElement(Icon,{type:props.suggestion.type},_react.default.createElement(_eui.EuiIcon,{type:getEuiIconType(props.suggestion.type)})),_react.default.createElement(TextValue,null,props.suggestion.text),_react.default.createElement(Description,null,props.suggestion.description))}Suggestion.propTypes={onClick:_propTypes.default.func.isRequired,onMouseEnter:_propTypes.default.func.isRequired,selected:_propTypes.default.bool,suggestion:_propTypes.default.object.isRequired,innerRef:_propTypes.default.func.isRequired};var _default=Suggestion;exports.default=_default;module.exports=exports.default},4162:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(6));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ClickOutside=function(_Component){_inherits(ClickOutside,_Component);function ClickOutside(){var _getPrototypeOf2;var _this;_classCallCheck(this,ClickOutside);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ClickOutside)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"setNodeRef",function(node){_this.nodeRef=node});_defineProperty(_assertThisInitialized(_this),"onClick",function(event){if(_this.nodeRef&&!_this.nodeRef.contains(event.target)){_this.props.onClickOutside()}});return _this}_createClass(ClickOutside,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("mousedown",this.onClick)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("mousedown",this.onClick)}},{key:"render",value:function render(){var _this$props=this.props,onClickOutside=_this$props.onClickOutside,restProps=_objectWithoutProperties(_this$props,["onClickOutside"]);return _react.default.createElement("div",_extends({ref:this.setNodeRef},restProps),this.props.children)}}]);return ClickOutside}(_react.Component);exports.default=ClickOutside;ClickOutside.propTypes={onClickOutside:_propTypes.default.func.isRequired};module.exports=exports.default},4163:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getBoolFilter=getBoolFilter;var _elasticsearch_fieldnames=__webpack_require__(320);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getBoolFilter(urlParams){var boolFilter=[{range:{"@timestamp":{gte:new Date(urlParams.start).getTime(),lte:new Date(urlParams.end).getTime(),format:"epoch_millis"}}}];if(urlParams.serviceName){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.SERVICE_NAME,urlParams.serviceName)})}switch(urlParams.processorEvent){case"transaction":boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"transaction")});if(urlParams.transactionName){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.TRANSACTION_NAME,urlParams.transactionName)})}if(urlParams.transactionType){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.TRANSACTION_TYPE,urlParams.transactionType)})}break;case"error":boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"error")});if(urlParams.errorGroupId){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.ERROR_GROUP_ID,urlParams.errorGroupId)})}break;default:boolFilter.push({bool:{should:[{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"error")},{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"transaction")}]}})}return boolFilter}},4164:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var url_helpers_1=__webpack_require__(219);var history_1=__webpack_require__(298);var useLocation_1=__webpack_require__(319);var useUrlParams_1=__webpack_require__(374);function DatePicker(){var location=useLocation_1.useLocation();var _useUrlParams_1$useUr=useUrlParams_1.useUrlParams(),urlParams=_useUrlParams_1$useUr.urlParams,refreshTimeRange=_useUrlParams_1$useUr.refreshTimeRange;function updateUrl(nextQuery){history_1.history.push(_objectSpread({},location,{search:url_helpers_1.fromQuery(_objectSpread({},url_helpers_1.toQuery(location.search),nextQuery))}))}function onRefreshChange(_ref){var isPaused=_ref.isPaused,refreshInterval=_ref.refreshInterval;updateUrl({refreshPaused:isPaused,refreshInterval:refreshInterval})}function onTimeChange(_ref2){var start=_ref2.start,end=_ref2.end;updateUrl({rangeFrom:start,rangeTo:end})}var rangeFrom=urlParams.rangeFrom,rangeTo=urlParams.rangeTo,refreshPaused=urlParams.refreshPaused,refreshInterval=urlParams.refreshInterval;return react_1.default.createElement(eui_1.EuiSuperDatePicker,{start:rangeFrom,end:rangeTo,isPaused:refreshPaused,refreshInterval:refreshInterval,onTimeChange:onTimeChange,onRefresh:function onRefresh(_ref3){var start=_ref3.start,end=_ref3.end;refreshTimeRange({rangeFrom:start,rangeTo:end})},onRefreshChange:onRefreshChange,showUpdateButton:true})}exports.DatePicker=DatePicker},4165:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var useFetcher_1=__webpack_require__(248);var ui_filters_1=__webpack_require__(4166);var useLocation_1=__webpack_require__(319);var useUrlParams_1=__webpack_require__(374);var history_1=__webpack_require__(298);var url_helpers_1=__webpack_require__(219);var environment_filter_values_1=__webpack_require__(1557);function updateEnvironmentUrl(location,environment){var nextEnvironmentQueryParam=environment!==environment_filter_values_1.ENVIRONMENT_ALL?environment:undefined;history_1.history.push(_objectSpread({},location,{search:url_helpers_1.fromQuery(_objectSpread({},url_helpers_1.toQuery(location.search),{environment:nextEnvironmentQueryParam}))}))}var ALL_OPTION={value:environment_filter_values_1.ENVIRONMENT_ALL,text:i18n_1.i18n.translate("xpack.apm.filter.environment.allLabel",{defaultMessage:"All"})};var NOT_DEFINED_OPTION={value:environment_filter_values_1.ENVIRONMENT_NOT_DEFINED,text:i18n_1.i18n.translate("xpack.apm.filter.environment.notDefinedLabel",{defaultMessage:"Not defined"})};var SEPARATOR_OPTION={text:"- ".concat(i18n_1.i18n.translate("xpack.apm.filter.environment.selectEnvironmentLabel",{defaultMessage:"Select environment"})," -"),disabled:true};function getOptions(environments){var environmentOptions=environments.filter(function(env){return env!==environment_filter_values_1.ENVIRONMENT_NOT_DEFINED}).map(function(environment){return{value:environment,text:environment}});return[ALL_OPTION].concat(_toConsumableArray(environments.includes(environment_filter_values_1.ENVIRONMENT_NOT_DEFINED)?[NOT_DEFINED_OPTION]:[]),_toConsumableArray(environmentOptions.length>0?[SEPARATOR_OPTION]:[]),_toConsumableArray(environmentOptions))}exports.EnvironmentFilter=function(){var location=useLocation_1.useLocation();var _useUrlParams_1$useUr=useUrlParams_1.useUrlParams(),urlParams=_useUrlParams_1$useUr.urlParams,uiFilters=_useUrlParams_1$useUr.uiFilters;var start=urlParams.start,end=urlParams.end,serviceName=urlParams.serviceName;var environment=uiFilters.environment;var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(start&&end){return ui_filters_1.loadEnvironmentsFilter({start:start,end:end,serviceName:serviceName})}},[start,end,serviceName]),_useFetcher_1$useFetc2=_useFetcher_1$useFetc.data,environments=_useFetcher_1$useFetc2===void 0?[]:_useFetcher_1$useFetc2,_useFetcher_1$useFetc3=_useFetcher_1$useFetc.status,status=_useFetcher_1$useFetc3===void 0?"loading":_useFetcher_1$useFetc3;return react_1.default.createElement(eui_1.EuiSelect,{prepend:react_1.default.createElement(eui_1.EuiFormLabel,null,i18n_1.i18n.translate("xpack.apm.filter.environment.label",{defaultMessage:"environment"})),options:getOptions(environments),value:environment||environment_filter_values_1.ENVIRONMENT_ALL,onChange:function onChange(event){updateEnvironmentUrl(location,event.target.value)},isLoading:status==="loading"})}},4166:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(341);function loadEnvironmentsFilter(_x){return _loadEnvironmentsFilter.apply(this,arguments)}function _loadEnvironmentsFilter(){_loadEnvironmentsFilter=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var serviceName,start,end;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:serviceName=_ref.serviceName,start=_ref.start,end=_ref.end;return _context.abrupt("return",callApi_1.callApi({pathname:"/api/apm/ui_filters/environments",query:{start:start,end:end,serviceName:serviceName}}));case 2:case"end":return _context.stop()}}},_callee)}));return _loadEnvironmentsFilter.apply(this,arguments)}exports.loadEnvironmentsFilter=loadEnvironmentsFilter},4167:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _templateObject(){var data=_taggedTemplateLiteral(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var lodash_1=__webpack_require__(3);var variables_1=__webpack_require__(53);var DiscoverErrorLink_1=__webpack_require__(4168);var url_helpers_1=__webpack_require__(219);var history_1=__webpack_require__(298);var ErrorMetadata_1=__webpack_require__(4170);var Stacktrace_1=__webpack_require__(1563);var ErrorTabs_1=__webpack_require__(4180);var StickyErrorProperties_1=__webpack_require__(4181);var HeaderContainer=styled_components_1.default.div(_templateObject(),variables_1.px(variables_1.unit));function getCurrentTab(){var tabs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var currentTabKey=arguments.length>1?arguments[1]:undefined;var selectedTab=tabs.find(function(_ref){var key=_ref.key;return key===currentTabKey});return selectedTab?selectedTab:lodash_1.first(tabs)||{}}function DetailView(_ref2){var errorGroup=_ref2.errorGroup,urlParams=_ref2.urlParams,location=_ref2.location;var transaction=errorGroup.transaction,error=errorGroup.error,occurrencesCount=errorGroup.occurrencesCount;if(!error){return null}var tabs=ErrorTabs_1.getTabs(error);var currentTab=getCurrentTab(tabs,urlParams.detailTab);return react_1.default.createElement(eui_1.EuiPanel,null,react_1.default.createElement(HeaderContainer,null,react_1.default.createElement(eui_1.EuiTitle,{size:"s"},react_1.default.createElement("h3",null,i18n_1.i18n.translate("xpack.apm.errorGroupDetails.errorOccurrenceTitle",{defaultMessage:"Error occurrence"}))),react_1.default.createElement(DiscoverErrorLink_1.DiscoverErrorLink,{error:error,kuery:urlParams.kuery},react_1.default.createElement(eui_1.EuiButtonEmpty,{iconType:"discoverApp"},i18n_1.i18n.translate("xpack.apm.errorGroupDetails.viewOccurrencesInDiscoverButtonLabel",{defaultMessage:"View {occurrencesCount} occurrences in Discover",values:{occurrencesCount:occurrencesCount}})))),react_1.default.createElement(StickyErrorProperties_1.StickyErrorProperties,{error:error,transaction:transaction}),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(eui_1.EuiTabs,null,tabs.map(function(_ref3){var key=_ref3.key,label=_ref3.label;return react_1.default.createElement(eui_1.EuiTab,{onClick:function onClick(){history_1.history.replace(_objectSpread({},location,{search:url_helpers_1.fromQuery(_objectSpread({},url_helpers_1.toQuery(location.search),{detailTab:key}))}))},isSelected:currentTab.key===key,key:key},label)})),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(TabContent,{error:error,currentTab:currentTab}))}exports.DetailView=DetailView;function TabContent(_ref4){var error=_ref4.error,currentTab=_ref4.currentTab;var codeLanguage=error.service.name;var excStackframes=error!=null&&error.error!=null&&error.error.exception!=null&&error.error.exception[0]!=null?error.error.exception[0].stacktrace:undefined;var logStackframes=error!=null&&error.error!=null&&error.error.exception!=null&&error.error.exception[0]!=null?error.error.exception[0].stacktrace:undefined;switch(currentTab.key){case ErrorTabs_1.logStacktraceTab.key:return react_1.default.createElement(Stacktrace_1.Stacktrace,{stackframes:logStackframes,codeLanguage:codeLanguage});case ErrorTabs_1.exceptionStacktraceTab.key:return react_1.default.createElement(Stacktrace_1.Stacktrace,{stackframes:excStackframes,codeLanguage:codeLanguage});default:return react_1.default.createElement(ErrorMetadata_1.ErrorMetadata,{error:error})}}exports.TabContent=TabContent},4168:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var elasticsearch_fieldnames_1=__webpack_require__(320);var DiscoverLink_1=__webpack_require__(972);function getDiscoverQuery(error,kuery){var serviceName=error.service.name;var groupId=error.error.grouping_key;var query="".concat(elasticsearch_fieldnames_1.SERVICE_NAME,':"').concat(serviceName,'" AND ').concat(elasticsearch_fieldnames_1.ERROR_GROUP_ID,':"').concat(groupId,'"');if(kuery){query+=" AND ".concat(kuery)}return{_a:{interval:"auto",query:{language:"lucene",query:query},sort:{"@timestamp":"desc"}}}}var DiscoverErrorLink=function DiscoverErrorLink(_ref){var error=_ref.error,kuery=_ref.kuery,children=_ref.children;return react_1.default.createElement(DiscoverLink_1.DiscoverLink,{query:getDiscoverQuery(error,kuery),children:children})};exports.DiscoverErrorLink=DiscoverErrorLink},4169:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var savedObjects_1=__webpack_require__(971);function useAPMIndexPattern(){var _react_1$useState=react_1.useState({}),_react_1$useState2=_slicedToArray(_react_1$useState,2),pattern=_react_1$useState2[0],setPattern=_react_1$useState2[1];function fetchPattern(){return _fetchPattern.apply(this,arguments)}function _fetchPattern(){_fetchPattern=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return savedObjects_1.getAPMIndexPattern();case 2:indexPattern=_context.sent;if(indexPattern){setPattern(indexPattern)}case 4:case"end":return _context.stop()}}},_callee)}));return _fetchPattern.apply(this,arguments)}react_1.useEffect(function(){fetchPattern()},[]);return pattern}exports.useAPMIndexPattern=useAPMIndexPattern},4170:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var __1=__webpack_require__(1560);var sections_1=__webpack_require__(4172);function ErrorMetadata(_ref){var error=_ref.error;return react_1.default.createElement(__1.MetadataTable,{item:error,sections:sections_1.ERROR_METADATA_SECTIONS})}exports.ErrorMetadata=ErrorMetadata},4171:function(module,exports,__webpack_require__){"use strict";function _templateObject(){var data=_taggedTemplateLiteral(["\n  color: ",";\n  text-align: left;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var lodash_1=__webpack_require__(3);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var i18n_1=__webpack_require__(342);var EmptyValue=styled_components_1.default.span(_templateObject(),eui_theme_light_json_1.default.euiColorMediumShade);function FormattedKey(_ref){var k=_ref.k,value=_ref.value;if(value==null){return react_1.default.createElement(EmptyValue,null,k)}return react_1.default.createElement(react_1.default.Fragment,null,k)}exports.FormattedKey=FormattedKey;function FormattedValue(_ref2){var value=_ref2.value;if(lodash_1.isObject(value)){return react_1.default.createElement("pre",null,JSON.stringify(value,null,4))}else if(lodash_1.isBoolean(value)||lodash_1.isNumber(value)){return react_1.default.createElement(react_1.default.Fragment,null,String(value))}else if(!value){return react_1.default.createElement(EmptyValue,null,i18n_1.NOT_AVAILABLE_LABEL)}return react_1.default.createElement(react_1.default.Fragment,null,value)}exports.FormattedValue=FormattedValue},4172:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var SECTION_LABELS=tslib_1.__importStar(__webpack_require__(1562));exports.ERROR_METADATA_SECTIONS=[{key:"labels",label:SECTION_LABELS.LABELS,required:true},{key:"http",label:SECTION_LABELS.HTTP},{key:"host",label:SECTION_LABELS.HOST},{key:"container",label:SECTION_LABELS.CONTAINER},{key:"service",label:SECTION_LABELS.SERVICE},{key:"process",label:SECTION_LABELS.PROCESS},{key:"agent",label:SECTION_LABELS.AGENT},{key:"url",label:SECTION_LABELS.URL},{key:"user",label:SECTION_LABELS.USER,required:true},{key:"error.custom",label:SECTION_LABELS.CUSTOM}]},4173:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _templateObject(){var data=_taggedTemplateLiteral(["\n  user-select: none;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var Icons_1=__webpack_require__(974);var Stackframe_1=__webpack_require__(1564);var LibraryFrameToggle=styled_components_1.default.div(_templateObject());var LibraryStackFrames=function(_react_1$default$Comp){_inherits(LibraryStackFrames,_react_1$default$Comp);function LibraryStackFrames(){var _this;_classCallCheck(this,LibraryStackFrames);_this=_possibleConstructorReturn(this,_getPrototypeOf(LibraryStackFrames).apply(this,arguments));_this.state={isVisible:_this.props.initialVisiblity};_this.onClick=function(){_this.setState(function(_ref){var isVisible=_ref.isVisible;return{isVisible:!isVisible}})};return _this}_createClass(LibraryStackFrames,[{key:"render",value:function render(){var _this$props=this.props,stackframes=_this$props.stackframes,codeLanguage=_this$props.codeLanguage;var isVisible=this.state.isVisible;if(stackframes.length===0){return null}if(stackframes.length===1){return react_1.default.createElement(Stackframe_1.Stackframe,{isLibraryFrame:true,codeLanguage:codeLanguage,stackframe:stackframes[0]})}return react_1.default.createElement("div",null,react_1.default.createElement(LibraryFrameToggle,null,react_1.default.createElement(eui_1.EuiLink,{onClick:this.onClick},react_1.default.createElement(Icons_1.Ellipsis,{horizontal:isVisible})," ",i18n_1.i18n.translate("xpack.apm.stacktraceTab.libraryFramesToogleButtonLabel",{defaultMessage:"{stackframesLength} library frames",values:{stackframesLength:stackframes.length}}))),react_1.default.createElement("div",null,isVisible&&react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}),stackframes.map(function(stackframe,i){return react_1.default.createElement(Stackframe_1.Stackframe,{key:i,isLibraryFrame:true,codeLanguage:codeLanguage,stackframe:stackframe})}))))}}]);return LibraryStackFrames}(react_1.default.Component);exports.LibraryStackFrames=LibraryStackFrames},4174:function(module,exports,__webpack_require__){"use strict";function _templateObject3(){var data=_taggedTemplateLiteral(["\n  font-weight: bold;\n  color: ",";\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  color: ",";\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  color: ",";\n  padding: ",";\n  font-family: ",";\n  font-size: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var variables_1=__webpack_require__(53);var FileDetails=styled_components_1.default.div(_templateObject(),eui_theme_light_json_1.default.euiColorMediumShade,variables_1.px(variables_1.units.half),variables_1.fontFamilyCode,variables_1.fontSize);var LibraryFrameFileDetail=styled_components_1.default.span(_templateObject2(),eui_theme_light_json_1.default.euiColorDarkShade);var AppFrameFileDetail=styled_components_1.default.span(_templateObject3(),eui_theme_light_json_1.default.euiColorFullShade);var FrameHeading=function FrameHeading(_ref){var stackframe=_ref.stackframe,isLibraryFrame=_ref.isLibraryFrame;var FileDetail=isLibraryFrame?LibraryFrameFileDetail:AppFrameFileDetail;var lineNumber=(stackframe!=null&&stackframe.line!=null?stackframe.line.number:undefined)||0;return react_1.default.createElement(FileDetails,null,react_1.default.createElement(FileDetail,null,stackframe.filename)," in"," ",react_1.default.createElement(FileDetail,null,stackframe.function),lineNumber>0&&react_1.default.createElement(react_1.Fragment,null," at ",react_1.default.createElement(FileDetail,null,"line ",stackframe.line.number)))};exports.FrameHeading=FrameHeading},4175:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _templateObject7(){var data=_taggedTemplateLiteral(["\n  position: relative;\n  padding: 0;\n  margin: 0;\n  white-space: pre;\n  z-index: 2;\n"]);_templateObject7=function _templateObject7(){return data};return data}function _templateObject6(){var data=_taggedTemplateLiteral(["\n  // Override all styles\n  margin: 0;\n  color: inherit;\n  background: inherit;\n  border: 0;\n  border-radius: 0;\n  overflow: initial;\n  padding: 0 ",";\n  line-height: ",";\n"]);_templateObject6=function _templateObject6(){return data};return data}function _templateObject5(){var data=_taggedTemplateLiteral(["\n  overflow: auto;\n  margin: 0 0 0 ",";\n  padding: 0;\n  background-color: ",";\n\n  &:last-of-type {\n    border-radius: 0 0 "," 0;\n  }\n"]);_templateObject5=function _templateObject5(){return data};return data}function _templateObject4(){var data=_taggedTemplateLiteral(["\n  position: relative;\n  min-width: ",";\n  padding-left: ",";\n  padding-right: ",";\n  color: ",";\n  line-height: ",";\n  text-align: right;\n  border-right: 1px solid ",";\n  background-color: ",";\n\n  &:last-of-type {\n    border-radius: 0 0 0 ",";\n  }\n"]);_templateObject4=function _templateObject4(){return data};return data}function _templateObject3(){var data=_taggedTemplateLiteral(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  border-radius: 0 0 0 ",";\n  background: ",";\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  position: absolute;\n  width: 100%;\n  height: ",";\n  top: ",";\n  pointer-events: none;\n  background-color: ",";\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  position: relative;\n  border-radius: 0 0 "," ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var lodash_1=__webpack_require__(3);var polished_1=__webpack_require__(232);var react_1=tslib_1.__importDefault(__webpack_require__(0));var javascript_1=tslib_1.__importDefault(__webpack_require__(4176));var python_1=tslib_1.__importDefault(__webpack_require__(4177));var ruby_1=tslib_1.__importDefault(__webpack_require__(4178));var light_1=tslib_1.__importDefault(__webpack_require__(975));var light_2=__webpack_require__(975);var styles_1=__webpack_require__(1565);var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var variables_1=__webpack_require__(53);light_2.registerLanguage("javascript",javascript_1.default);light_2.registerLanguage("python",python_1.default);light_2.registerLanguage("ruby",ruby_1.default);var ContextContainer=styled_components_1.default.div(_templateObject(),variables_1.borderRadius,variables_1.borderRadius);var LINE_HEIGHT=variables_1.units.eighth*9;var LineHighlight=styled_components_1.default.div(_templateObject2(),variables_1.px(variables_1.units.eighth*9),function(props){return variables_1.px(props.lineNumber*LINE_HEIGHT)},polished_1.tint(.1,eui_theme_light_json_1.default.euiColorWarning));var LineNumberContainer=styled_components_1.default.div(_templateObject3(),variables_1.borderRadius,function(props){return props.isLibraryFrame?eui_theme_light_json_1.default.euiColorEmptyShade:eui_theme_light_json_1.default.euiColorLightestShade});var LineNumber=styled_components_1.default.div(_templateObject4(),variables_1.px(variables_1.units.eighth*21),variables_1.px(variables_1.units.half),variables_1.px(variables_1.units.quarter),eui_theme_light_json_1.default.euiColorMediumShade,variables_1.px(variables_1.unit+variables_1.units.eighth),eui_theme_light_json_1.default.euiColorLightShade,function(props){return props.highlight?polished_1.tint(.1,eui_theme_light_json_1.default.euiColorWarning):null},variables_1.borderRadius);var LineContainer=styled_components_1.default.div(_templateObject5(),variables_1.px(variables_1.units.eighth*21),eui_theme_light_json_1.default.euiColorEmptyShade,variables_1.borderRadius);var Line=styled_components_1.default.pre(_templateObject6(),variables_1.px(LINE_HEIGHT),variables_1.px(LINE_HEIGHT));var Code=styled_components_1.default.code(_templateObject7());function getStackframeLines(stackframe){var line=stackframe.line.context;var preLines=(stackframe!=null&&stackframe.context!=null?stackframe.context.pre:undefined)||[];var postLines=(stackframe!=null&&stackframe.context!=null?stackframe.context.post:undefined)||[];return[].concat(_toConsumableArray(preLines),[line],_toConsumableArray(postLines))}function getStartLineNumber(stackframe){var preLines=lodash_1.size((stackframe!=null&&stackframe.context!=null?stackframe.context.pre:undefined)||[]);return stackframe.line.number-preLines}function Context(_ref){var stackframe=_ref.stackframe,codeLanguage=_ref.codeLanguage,isLibraryFrame=_ref.isLibraryFrame;var lines=getStackframeLines(stackframe);var startLineNumber=getStartLineNumber(stackframe);var highlightedLineIndex=lodash_1.size((stackframe!=null&&stackframe.context!=null?stackframe.context.pre:undefined)||[]);var language=codeLanguage||"javascript";return react_1.default.createElement(ContextContainer,null,react_1.default.createElement(LineHighlight,{lineNumber:highlightedLineIndex}),react_1.default.createElement(LineNumberContainer,{isLibraryFrame:isLibraryFrame},lines.map(function(line,i){return react_1.default.createElement(LineNumber,{key:line+i,highlight:highlightedLineIndex===i},i+startLineNumber,".")})),react_1.default.createElement(LineContainer,null,lines.map(function(line,i){return react_1.default.createElement(light_1.default,{key:line+i,language:language,style:styles_1.xcode,PreTag:Line,CodeTag:Code,customStyle:{padding:null,overflowX:null}},line||"\n")})))}exports.Context=Context},4176:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3960)},4177:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3961)},4178:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3962)},4179:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _templateObject3(){var data=_taggedTemplateLiteral(["\n  padding: "," "," 0;\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  display: block;\n  cursor: pointer;\n  user-select: none;\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  background: ",";\n  border-top: 1px solid ",";\n  border-radius: 0 0 "," ",";\n  padding: "," ",";\n  font-family: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var variables_1=__webpack_require__(53);var Icons_1=__webpack_require__(974);var DottedKeyValueTable_1=__webpack_require__(1561);var VariablesContainer=styled_components_1.default.div(_templateObject(),eui_theme_light_json_1.default.euiColorEmptyShade,eui_theme_light_json_1.default.euiColorLightShade,variables_1.borderRadius,variables_1.borderRadius,variables_1.px(variables_1.units.half),variables_1.px(variables_1.unit),variables_1.fontFamily);var VariablesToggle=styled_components_1.default.a(_templateObject2());var VariablesTableContainer=styled_components_1.default.div(_templateObject3(),variables_1.px(variables_1.units.plus),variables_1.px(variables_1.unit));var Variables=function(_react_1$default$Comp){_inherits(Variables,_react_1$default$Comp);function Variables(){var _this;_classCallCheck(this,Variables);_this=_possibleConstructorReturn(this,_getPrototypeOf(Variables).apply(this,arguments));_this.state={isVisible:false};_this.onClick=function(){_this.setState(function(){return{isVisible:!_this.state.isVisible}})};return _this}_createClass(Variables,[{key:"render",value:function render(){if(!this.props.vars){return null}return react_1.default.createElement(VariablesContainer,null,react_1.default.createElement(VariablesToggle,{onClick:this.onClick},react_1.default.createElement(Icons_1.Ellipsis,{horizontal:this.state.isVisible})," ",i18n_1.i18n.translate("xpack.apm.stacktraceTab.localVariablesToogleButtonLabel",{defaultMessage:"Local variables"})),this.state.isVisible&&react_1.default.createElement(VariablesTableContainer,null,react_1.default.createElement(DottedKeyValueTable_1.DottedKeyValueTable,{data:this.props.vars,maxDepth:5})))}}]);return Variables}(react_1.default.Component);exports.Variables=Variables},4180:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});var i18n_1=__webpack_require__(4);var lodash_1=__webpack_require__(3);exports.logStacktraceTab={key:"log_stacktrace",label:i18n_1.i18n.translate("xpack.apm.propertiesTable.tabs.logStacktraceLabel",{defaultMessage:"Log stacktrace"})};exports.exceptionStacktraceTab={key:"exception_stacktrace",label:i18n_1.i18n.translate("xpack.apm.propertiesTable.tabs.exceptionStacktraceLabel",{defaultMessage:"Exception stacktrace"})};exports.metadataTab={key:"metadata",label:i18n_1.i18n.translate("xpack.apm.propertiesTable.tabs.metadataLabel",{defaultMessage:"Metadata"})};function getTabs(error){var hasLogStacktrace=!lodash_1.isEmpty(error!=null&&error.error!=null&&error.error.log!=null?error.error.log.stacktrace:undefined);return[].concat(_toConsumableArray(hasLogStacktrace?[exports.logStacktraceTab]:[]),[exports.exceptionStacktraceTab,exports.metadataTab])}exports.getTabs=getTabs},4181:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importStar(__webpack_require__(0));var elasticsearch_fieldnames_1=__webpack_require__(320);var i18n_2=__webpack_require__(342);var APMLink_1=__webpack_require__(410);var url_helpers_1=__webpack_require__(219);var StickyProperties_1=__webpack_require__(711);function TransactionLink(_ref){var transaction=_ref.transaction;if(!transaction){return react_1.default.createElement(react_1.Fragment,null,i18n_2.NOT_AVAILABLE_LABEL)}var isSampled=transaction.transaction.sampled;if(!isSampled){return react_1.default.createElement(react_1.Fragment,null,transaction.transaction.id)}var path="/".concat(transaction.service.name,"/transactions/").concat(url_helpers_1.legacyEncodeURIComponent(transaction.transaction.type),"/").concat(url_helpers_1.legacyEncodeURIComponent(transaction.transaction.name));return react_1.default.createElement(APMLink_1.APMLink,{path:path,query:{transactionId:transaction.transaction.id,traceId:transaction.trace.id,banana:"ok"}},transaction.transaction.id)}function StickyErrorProperties(_ref2){var error=_ref2.error,transaction=_ref2.transaction;var stickyProperties=[{fieldName:"@timestamp",label:i18n_1.i18n.translate("xpack.apm.errorGroupDetails.timestampLabel",{defaultMessage:"Timestamp"}),val:error["@timestamp"],width:"50%"},{fieldName:elasticsearch_fieldnames_1.URL_FULL,label:"URL",val:(error!=null&&error.context!=null&&error.context.page!=null?error.context.page.url:undefined)||(error!=null&&error.url!=null?error.url.full:undefined)||i18n_2.NOT_AVAILABLE_LABEL,truncated:true,width:"50%"},{fieldName:elasticsearch_fieldnames_1.HTTP_REQUEST_METHOD,label:i18n_1.i18n.translate("xpack.apm.errorGroupDetails.requestMethodLabel",{defaultMessage:"Request method"}),val:(error!=null&&error.http!=null&&error.http.request!=null?error.http.request.method:undefined)||i18n_2.NOT_AVAILABLE_LABEL,width:"25%"},{fieldName:elasticsearch_fieldnames_1.ERROR_EXC_HANDLED,label:i18n_1.i18n.translate("xpack.apm.errorGroupDetails.handledLabel",{defaultMessage:"Handled"}),val:String(error!=null&&error.error!=null&&error.error.exception!=null&&error.error.exception[0]!=null?error.error.exception[0].handled:undefined)||i18n_2.NOT_AVAILABLE_LABEL,width:"25%"},{fieldName:elasticsearch_fieldnames_1.TRANSACTION_ID,label:i18n_1.i18n.translate("xpack.apm.errorGroupDetails.transactionSampleIdLabel",{defaultMessage:"Transaction sample ID"}),val:react_1.default.createElement(TransactionLink,{transaction:transaction}),width:"25%"},{fieldName:elasticsearch_fieldnames_1.USER_ID,label:i18n_1.i18n.translate("xpack.apm.errorGroupDetails.userIdLabel",{defaultMessage:"User ID"}),val:(error!=null&&error.user!=null?error.user.id:undefined)||i18n_2.NOT_AVAILABLE_LABEL,width:"25%"}];return react_1.default.createElement(StickyProperties_1.StickyProperties,{stickyProperties:stickyProperties})}exports.StickyErrorProperties=StickyErrorProperties},4182:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(6));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SingleRect(_ref){var innerHeight=_ref.innerHeight,marginTop=_ref.marginTop,style=_ref.style,x=_ref.x,width=_ref.width;return _react.default.createElement("rect",{style:style,height:innerHeight,width:width,rx:"2px",ry:"2px",x:x,y:marginTop})}SingleRect.requiresSVG=true;SingleRect.propTypes={x:_propTypes.default.number.isRequired};var _default=SingleRect;exports.default=_default;module.exports=exports.default},4183:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var useFetcher_1=__webpack_require__(248);var services_1=__webpack_require__(1569);var ApmHeader_1=__webpack_require__(709);var ServiceDetailTabs_1=__webpack_require__(4184);var ServiceIntegrations_1=__webpack_require__(4203);var agent_name_1=__webpack_require__(1579);var useUrlParams_1=__webpack_require__(374);function ServiceDetails(){var _useUrlParams_1$useUr=useUrlParams_1.useUrlParams(),urlParams=_useUrlParams_1$useUr.urlParams,uiFilters=_useUrlParams_1$useUr.uiFilters;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end;var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(serviceName&&start&&end){return services_1.loadServiceDetails({serviceName:serviceName,start:start,end:end,uiFilters:uiFilters})}},[serviceName,start,end,uiFilters]),serviceDetailsData=_useFetcher_1$useFetc.data;if(!serviceDetailsData){return null}var isRumAgent=agent_name_1.isRumAgentName(serviceDetailsData.agentName);return react_1.default.createElement("div",null,react_1.default.createElement(ApmHeader_1.ApmHeader,null,react_1.default.createElement(eui_1.EuiFlexGroup,{alignItems:"center"},react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiTitle,{size:"l"},react_1.default.createElement("h1",null,serviceName))),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(ServiceIntegrations_1.ServiceIntegrations,{transactionTypes:serviceDetailsData.types,urlParams:urlParams})))),react_1.default.createElement(ServiceDetailTabs_1.ServiceDetailTabs,{urlParams:urlParams,transactionTypes:serviceDetailsData.types,isRumAgent:isRumAgent,agentName:serviceDetailsData.agentName}))}exports.ServiceDetails=ServiceDetails},4184:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var HistoryTabs_1=__webpack_require__(1570);var ErrorGroupOverview_1=__webpack_require__(4185);var TransactionOverview_1=__webpack_require__(4187);var ServiceMetrics_1=__webpack_require__(4199);var useLocation_1=__webpack_require__(319);function ServiceDetailTabs(_ref){var transactionTypes=_ref.transactionTypes,urlParams=_ref.urlParams,isRumAgent=_ref.isRumAgent,agentName=_ref.agentName;var location=useLocation_1.useLocation();var serviceName=urlParams.serviceName;var headTransactionType=transactionTypes[0];var transactionsTab={name:i18n_1.i18n.translate("xpack.apm.serviceDetails.transactionsTabLabel",{defaultMessage:"Transactions"}),path:headTransactionType?"/".concat(serviceName,"/transactions/").concat(headTransactionType):"/".concat(serviceName,"/transactions"),routePath:"/".concat(serviceName,"/transactions/:transactionType?"),render:function render(){return react_1.default.createElement(TransactionOverview_1.TransactionOverview,{urlParams:urlParams,serviceTransactionTypes:transactionTypes})}};var errorsTab={name:i18n_1.i18n.translate("xpack.apm.serviceDetails.errorsTabLabel",{defaultMessage:"Errors"}),path:"/".concat(serviceName,"/errors"),render:function render(){return react_1.default.createElement(ErrorGroupOverview_1.ErrorGroupOverview,{urlParams:urlParams,location:location})}};var metricsTab={name:i18n_1.i18n.translate("xpack.apm.serviceDetails.metricsTabLabel",{defaultMessage:"Metrics"}),path:"/".concat(serviceName,"/metrics"),render:function render(){return react_1.default.createElement(ServiceMetrics_1.ServiceMetrics,{urlParams:urlParams,agentName:agentName})}};var tabs=isRumAgent?[transactionsTab,errorsTab]:[transactionsTab,errorsTab,metricsTab];return react_1.default.createElement(HistoryTabs_1.HistoryTabs,{tabs:tabs})}exports.ServiceDetailTabs=ServiceDetailTabs},4185:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var useFetcher_1=__webpack_require__(248);var error_groups_1=__webpack_require__(1556);var UrlParamsContext_1=__webpack_require__(409);var Distribution_1=__webpack_require__(1566);var List_1=__webpack_require__(4186);var ErrorGroupOverview=function ErrorGroupOverview(_ref){var urlParams=_ref.urlParams,location=_ref.location;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,sortField=urlParams.sortField,sortDirection=urlParams.sortDirection;var uiFilters=UrlParamsContext_1.useUiFilters(urlParams);var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(serviceName&&start&&end){return error_groups_1.loadErrorDistribution({serviceName:serviceName,start:start,end:end,uiFilters:uiFilters})}},[serviceName,start,end,uiFilters]),errorDistributionData=_useFetcher_1$useFetc.data;var _useFetcher_1$useFetc2=useFetcher_1.useFetcher(function(){if(serviceName&&start&&end){return error_groups_1.loadErrorGroupList({serviceName:serviceName,start:start,end:end,sortField:sortField,sortDirection:sortDirection,uiFilters:uiFilters})}},[serviceName,start,end,sortField,sortDirection,uiFilters]),errorGroupListData=_useFetcher_1$useFetc2.data;if(!errorDistributionData||!errorGroupListData){return null}return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiFlexGroup,null,react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiPanel,null,react_1.default.createElement(Distribution_1.ErrorDistribution,{distribution:errorDistributionData,title:i18n_1.i18n.translate("xpack.apm.serviceDetails.metrics.errorOccurrencesChartTitle",{defaultMessage:"Error occurrences"})})))),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"}),react_1.default.createElement(eui_1.EuiPanel,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("h3",null,"Errors")),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"}),react_1.default.createElement(List_1.ErrorGroupList,{urlParams:urlParams,items:errorGroupListData,location:location})))};exports.ErrorGroupOverview=ErrorGroupOverview},4186:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _templateObject4(){var data=_taggedTemplateLiteral(["\n  font-family: ",";\n"]);_templateObject4=function _templateObject4(){return data};return data}function _templateObject3(){var data=_taggedTemplateLiteral(["\n  font-family: ",";\n  font-size: ",";\n  ",";\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  ",";\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  font-family: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var numeral_1=tslib_1.__importDefault(__webpack_require__(217));var i18n_1=__webpack_require__(4);var moment_1=tslib_1.__importDefault(__webpack_require__(16));var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var i18n_2=__webpack_require__(342);var variables_1=__webpack_require__(53);var APMLink_1=__webpack_require__(410);var url_helpers_1=__webpack_require__(219);var history_1=__webpack_require__(298);function paginateItems(_ref){var items=_ref.items,pageIndex=_ref.pageIndex,pageSize=_ref.pageSize;return items.slice(pageIndex*pageSize,(pageIndex+1)*pageSize)}var GroupIdLink=styled_components_1.default(APMLink_1.APMLink)(_templateObject(),variables_1.fontFamilyCode);var MessageAndCulpritCell=styled_components_1.default.div(_templateObject2(),variables_1.truncate("100%"));var MessageLink=styled_components_1.default(APMLink_1.APMLink)(_templateObject3(),variables_1.fontFamilyCode,variables_1.fontSizes.large,variables_1.truncate("100%"));var Culprit=styled_components_1.default.div(_templateObject4(),variables_1.fontFamilyCode);var ErrorGroupList=function(_react_1$Component){_inherits(ErrorGroupList,_react_1$Component);function ErrorGroupList(){var _this;_classCallCheck(this,ErrorGroupList);_this=_possibleConstructorReturn(this,_getPrototypeOf(ErrorGroupList).apply(this,arguments));_this.state={page:{index:0,size:25}};_this.onTableChange=function(_ref2){var _ref2$page=_ref2.page,page=_ref2$page===void 0?{}:_ref2$page,_ref2$sort=_ref2.sort,sort=_ref2$sort===void 0?{}:_ref2$sort;_this.setState({page:page});var location=_this.props.location;history_1.history.push(_objectSpread({},location,{search:url_helpers_1.fromQuery(_objectSpread({},url_helpers_1.toQuery(location.search),{sortField:sort.field,sortDirection:sort.direction}))}))};return _this}_createClass(ErrorGroupList,[{key:"render",value:function render(){var items=this.props.items;var _this$props$urlParams=this.props.urlParams,serviceName=_this$props$urlParams.serviceName,sortDirection=_this$props$urlParams.sortDirection,sortField=_this$props$urlParams.sortField;var paginatedItems=paginateItems({items:items,pageIndex:this.state.page.index,pageSize:this.state.page.size});var columns=[{name:i18n_1.i18n.translate("xpack.apm.errorsTable.groupIdColumnLabel",{defaultMessage:"Group ID"}),field:"groupId",sortable:false,width:variables_1.px(variables_1.unit*6),render:function render(groupId){return react_1.default.createElement(GroupIdLink,{path:"/".concat(serviceName,"/errors/").concat(groupId)},groupId.slice(0,5)||i18n_2.NOT_AVAILABLE_LABEL)}},{name:i18n_1.i18n.translate("xpack.apm.errorsTable.errorMessageAndCulpritColumnLabel",{defaultMessage:"Error message and culprit"}),field:"message",sortable:false,width:"50%",render:function render(message,item){return react_1.default.createElement(MessageAndCulpritCell,null,react_1.default.createElement(eui_1.EuiToolTip,{id:"error-message-tooltip",content:message||i18n_2.NOT_AVAILABLE_LABEL},react_1.default.createElement(MessageLink,{path:"/".concat(serviceName,"/errors/").concat(item.groupId)},message||i18n_2.NOT_AVAILABLE_LABEL)),react_1.default.createElement("br",null),react_1.default.createElement(eui_1.EuiToolTip,{id:"error-culprit-tooltip",content:item.culprit||i18n_2.NOT_AVAILABLE_LABEL},react_1.default.createElement(Culprit,null,item.culprit||i18n_2.NOT_AVAILABLE_LABEL)))}},{name:"",field:"handled",sortable:false,align:"right",render:function render(isUnhandled){return isUnhandled===false&&react_1.default.createElement(eui_1.EuiBadge,{color:"warning"},i18n_1.i18n.translate("xpack.apm.errorsTable.unhandledLabel",{defaultMessage:"Unhandled"}))}},{name:i18n_1.i18n.translate("xpack.apm.errorsTable.occurrencesColumnLabel",{defaultMessage:"Occurrences"}),field:"occurrenceCount",sortable:true,dataType:"number",render:function render(value){return value?numeral_1.default(value).format("0.[0]a"):i18n_2.NOT_AVAILABLE_LABEL}},{field:"latestOccurrenceAt",sortable:true,name:i18n_1.i18n.translate("xpack.apm.errorsTable.latestOccurrenceColumnLabel",{defaultMessage:"Latest occurrence"}),align:"right",render:function render(value){return value?moment_1.default(value).fromNow():i18n_2.NOT_AVAILABLE_LABEL}}];return react_1.default.createElement(eui_1.EuiBasicTable,{noItemsMessage:i18n_1.i18n.translate("xpack.apm.errorsTable.noErrorsLabel",{defaultMessage:"No errors were found"}),items:paginatedItems,columns:columns,pagination:{pageIndex:this.state.page.index,pageSize:this.state.page.size,totalItemCount:this.props.items.length},sorting:{sort:{field:sortField||"latestOccurrenceAt",direction:sortDirection||"desc"}},onChange:this.onTableChange})}}]);return ErrorGroupList}(react_1.Component);exports.ErrorGroupList=ErrorGroupList},4187:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var lodash_1=__webpack_require__(3);var react_1=tslib_1.__importDefault(__webpack_require__(0));var useTransactionList_1=__webpack_require__(4188);var useTransactionOverviewCharts_1=__webpack_require__(4189);var TransactionCharts_1=__webpack_require__(1572);var url_helpers_1=__webpack_require__(219);var List_1=__webpack_require__(4197);var useRedirect_1=__webpack_require__(4198);var useFetcher_1=__webpack_require__(248);var ml_1=__webpack_require__(978);var history_1=__webpack_require__(298);var useLocation_1=__webpack_require__(319);function getRedirectLocation(_ref){var urlParams=_ref.urlParams,location=_ref.location,serviceTransactionTypes=_ref.serviceTransactionTypes;var serviceName=urlParams.serviceName,transactionType=urlParams.transactionType;var firstTransactionType=lodash_1.first(serviceTransactionTypes);if(!transactionType&&firstTransactionType){return _objectSpread({},location,{pathname:"/".concat(serviceName,"/transactions/").concat(firstTransactionType)})}}function TransactionOverview(_ref2){var urlParams=_ref2.urlParams,serviceTransactionTypes=_ref2.serviceTransactionTypes;var location=useLocation_1.useLocation();var serviceName=urlParams.serviceName,transactionType=urlParams.transactionType;useRedirect_1.useRedirect(history_1.history,getRedirectLocation({urlParams:urlParams,location:location,serviceTransactionTypes:serviceTransactionTypes}));var _useTransactionOvervi=useTransactionOverviewCharts_1.useTransactionOverviewCharts(urlParams),transactionOverviewCharts=_useTransactionOvervi.data;if(!serviceName||!transactionType){return null}var _useTransactionList_=useTransactionList_1.useTransactionList(urlParams),transactionListData=_useTransactionList_.data;var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){return ml_1.getHasMLJob({serviceName:serviceName,transactionType:transactionType})},[serviceName,transactionType]),_useFetcher_1$useFetc2=_useFetcher_1$useFetc.data,hasMLJob=_useFetcher_1$useFetc2===void 0?false:_useFetcher_1$useFetc2;return react_1.default.createElement(react_1.default.Fragment,null,serviceTransactionTypes.length>1?react_1.default.createElement(eui_1.EuiFormRow,{id:"transaction-type-select-row",label:i18n_1.i18n.translate("xpack.apm.transactionsTable.filterByTypeLabel",{defaultMessage:"Filter by type"})},react_1.default.createElement(eui_1.EuiSelect,{options:serviceTransactionTypes.map(function(type){return{text:"".concat(type),value:type}}),value:transactionType,onChange:function onChange(event){var type=url_helpers_1.legacyEncodeURIComponent(event.target.value);history_1.history.push(_objectSpread({},location,{pathname:"/".concat(urlParams.serviceName,"/transactions/").concat(type)}))}})):null,react_1.default.createElement(TransactionCharts_1.TransactionCharts,{hasMLJob:hasMLJob,charts:transactionOverviewCharts,location:location,urlParams:urlParams}),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"}),react_1.default.createElement(eui_1.EuiPanel,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("h3",null,"Transactions")),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"}),react_1.default.createElement(List_1.TransactionList,{items:transactionListData,serviceName:serviceName})))}exports.TransactionOverview=TransactionOverview},4188:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var transaction_groups_1=__webpack_require__(713);var UrlParamsContext_1=__webpack_require__(409);var useFetcher_1=__webpack_require__(248);var getRelativeImpact=function getRelativeImpact(impact,impactMin,impactMax){return Math.max((impact-impactMin)/Math.max(impactMax-impactMin,1)*100,1)};function getWithRelativeImpact(items){var impacts=items.map(function(_ref){var impact=_ref.impact;return impact});var impactMin=Math.min.apply(Math,_toConsumableArray(impacts));var impactMax=Math.max.apply(Math,_toConsumableArray(impacts));return items.map(function(item){return _objectSpread({},item,{impactRelative:getRelativeImpact(item.impact,impactMin,impactMax)})})}function useTransactionList(urlParams){var serviceName=urlParams.serviceName,transactionType=urlParams.transactionType,start=urlParams.start,end=urlParams.end;var uiFilters=UrlParamsContext_1.useUiFilters(urlParams);var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(serviceName&&start&&end&&transactionType){return transaction_groups_1.loadTransactionList({serviceName:serviceName,start:start,end:end,transactionType:transactionType,uiFilters:uiFilters})}},[serviceName,start,end,transactionType,uiFilters]),_useFetcher_1$useFetc2=_useFetcher_1$useFetc.data,data=_useFetcher_1$useFetc2===void 0?[]:_useFetcher_1$useFetc2,error=_useFetcher_1$useFetc.error,status=_useFetcher_1$useFetc.status;var memoizedData=react_1.useMemo(function(){return getWithRelativeImpact(data)},[data]);return{data:memoizedData,status:status,error:error}}exports.useTransactionList=useTransactionList},4189:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var transaction_groups_1=__webpack_require__(713);var chartSelectors_1=__webpack_require__(1571);var UrlParamsContext_1=__webpack_require__(409);var useFetcher_1=__webpack_require__(248);function useTransactionOverviewCharts(urlParams){var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,transactionType=urlParams.transactionType;var uiFilters=UrlParamsContext_1.useUiFilters(urlParams);var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(serviceName&&start&&end){return transaction_groups_1.loadTransactionOverviewCharts({serviceName:serviceName,start:start,end:end,transactionType:transactionType,uiFilters:uiFilters})}},[serviceName,start,end,transactionType,uiFilters]),data=_useFetcher_1$useFetc.data,error=_useFetcher_1$useFetc.error,status=_useFetcher_1$useFetc.status;var memoizedData=react_1.useMemo(function(){return chartSelectors_1.getTransactionCharts(urlParams,data)},[data]);return{data:memoizedData,status:status,error:error}}exports.useTransactionOverviewCharts=useTransactionOverviewCharts},4190:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3440)},4191:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=Legends;var _propTypes=_interopRequireDefault(__webpack_require__(6));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(13));var _Legend=_interopRequireDefault(__webpack_require__(712));var _variables=__webpack_require__(53);var _eui_theme_light=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _templateObject5(){var data=_taggedTemplateLiteral(["\n  font-size: ",";\n  color: ",";\n"]);_templateObject5=function _templateObject5(){return data};return data}function _templateObject4(){var data=_taggedTemplateLiteral(["\n  margin-left: ",";\n  color: ",";\n  display: inline-block;\n"]);_templateObject4=function _templateObject4(){return data};return data}function _templateObject3(){var data=_taggedTemplateLiteral(["\n  display: inline-block;\n  ",";\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  white-space: nowrap;\n  color: ",";\n  display: flex;\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  display: flex;\n  margin-left: ",";\n  flex-wrap: wrap;\n\n  /* add margin to all direct descendant divs */\n  & > div {\n    margin-top: ",";\n    margin-right: ",";\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var Container=_styledComponents.default.div(_templateObject(),(0,_variables.px)(_variables.unit*5),(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit));var LegendContent=_styledComponents.default.span(_templateObject2(),_eui_theme_light.default.euiColorMediumShade);var TruncatedLabel=_styledComponents.default.span(_templateObject3(),(0,_variables.truncate)((0,_variables.px)(_variables.units.half*10)));var SeriesValue=_styledComponents.default.span(_templateObject4(),(0,_variables.px)(_variables.units.quarter),_eui_theme_light.default.euiColorFullShade);var MoreSeriesContainer=_styledComponents.default.div(_templateObject5(),_variables.fontSizes.small,_eui_theme_light.default.euiColorMediumShade);function MoreSeries(_ref){var hiddenSeriesCount=_ref.hiddenSeriesCount;if(hiddenSeriesCount<=0){return null}return _react.default.createElement(MoreSeriesContainer,null,"(+",hiddenSeriesCount,")")}function Legends(_ref2){var clickLegend=_ref2.clickLegend,hiddenSeriesCount=_ref2.hiddenSeriesCount,noHits=_ref2.noHits,series=_ref2.series,seriesEnabledState=_ref2.seriesEnabledState,truncateLegends=_ref2.truncateLegends;if(noHits){return null}return _react.default.createElement(Container,null,series.map(function(serie,i){if(serie.hideLegend){return null}var text=_react.default.createElement(LegendContent,null,truncateLegends?_react.default.createElement(TruncatedLabel,{title:serie.title},serie.title):serie.title,serie.legendValue&&_react.default.createElement(SeriesValue,null,serie.legendValue));return _react.default.createElement(_Legend.default,{key:i,onClick:function onClick(){return clickLegend(i)},disabled:seriesEnabledState[i],text:text,color:serie.color})}),_react.default.createElement(MoreSeries,{hiddenSeriesCount:hiddenSeriesCount}))}Legends.propTypes={clickLegend:_propTypes.default.func.isRequired,hiddenSeriesCount:_propTypes.default.number.isRequired,noHits:_propTypes.default.bool.isRequired,series:_propTypes.default.array.isRequired,seriesEnabledState:_propTypes.default.array.isRequired,truncateLegends:_propTypes.default.bool.isRequired};module.exports=exports.default},4192:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _reactVis=__webpack_require__(343);var _propTypes=_interopRequireDefault(__webpack_require__(6));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _polished=__webpack_require__(232);var _StatusText=_interopRequireDefault(__webpack_require__(4193));var _plotUtils=__webpack_require__(714);var _i18n=__webpack_require__(4);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var X_TICK_TOTAL=7;var StaticPlot=function(_PureComponent){_inherits(StaticPlot,_PureComponent);function StaticPlot(){_classCallCheck(this,StaticPlot);return _possibleConstructorReturn(this,_getPrototypeOf(StaticPlot).apply(this,arguments))}_createClass(StaticPlot,[{key:"getVisSeries",value:function getVisSeries(series,plotValues){var _this=this;return series.slice().reverse().map(function(serie){return _this.getSerie(serie,plotValues)})}},{key:"getSerie",value:function getSerie(serie,plotValues){switch(serie.type){case"line":return _react.default.createElement(_reactVis.LineSeries,{getNull:function getNull(d){return d.y!==null},key:serie.title,xType:"time",curve:"curveMonotoneX",data:serie.data,color:serie.color});case"area":return _react.default.createElement(_reactVis.AreaSeries,{getNull:function getNull(d){return d.y!==null},key:serie.title,xType:"time",curve:"curveMonotoneX",data:serie.data,color:serie.color,stroke:serie.color,fill:serie.areaColor||(0,_polished.rgba)(serie.color,.3)});case"areaMaxHeight":var yMax=(0,_lodash.last)(plotValues.yTickValues);var data=serie.data.map(function(p){return{x0:p.x0,x:p.x,y0:0,y:yMax}});return _react.default.createElement(_reactVis.VerticalRectSeries,{getNull:function getNull(d){return d.y!==null},key:serie.title,xType:"time",curve:"curveMonotoneX",data:data,color:serie.color,stroke:serie.color,fill:serie.areaColor});case"linemark":return _react.default.createElement(_reactVis.LineMarkSeries,{getNull:function getNull(d){return d.y!==null},key:serie.title,xType:"time",curve:"curveMonotoneX",data:serie.data,color:serie.color,size:.5});default:throw new Error("Unknown type ".concat(serie.type))}}},{key:"render",value:function render(){var _this$props=this.props,series=_this$props.series,tickFormatX=_this$props.tickFormatX,tickFormatY=_this$props.tickFormatY,plotValues=_this$props.plotValues,noHits=_this$props.noHits;var yTickValues=plotValues.yTickValues;return _react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues},_react.default.createElement(_reactVis.HorizontalGridLines,{tickValues:yTickValues}),_react.default.createElement(_reactVis.XAxis,{tickSize:0,tickTotal:X_TICK_TOTAL,tickFormat:tickFormatX}),_react.default.createElement(_reactVis.YAxis,{tickSize:0,tickValues:yTickValues,tickFormat:tickFormatY,style:{line:{stroke:"none",fill:"none"}}}),noHits?_react.default.createElement(_StatusText.default,{marginLeft:30,text:_i18n.i18n.translate("xpack.apm.metrics.plot.noDataLabel",{defaultMessage:"No data within this time range."})}):this.getVisSeries(series,plotValues))}}]);return StaticPlot}(_react.PureComponent);var _default=StaticPlot;exports.default=_default;StaticPlot.propTypes={noHits:_propTypes.default.bool.isRequired,series:_propTypes.default.array.isRequired,plotValues:_propTypes.default.object.isRequired,tickFormatX:_propTypes.default.func,tickFormatY:_propTypes.default.func.isRequired};module.exports=exports.default},4193:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(6));var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StatusText(_ref){var marginLeft=_ref.marginLeft,marginRight=_ref.marginRight,marginTop=_ref.marginTop,marginBottom=_ref.marginBottom,text=_ref.text;var xTransform="calc(-50% + ".concat(marginLeft-marginRight,"px)");var yTransform="calc(-50% + ".concat(marginTop-marginBottom,"px - 15px)");return _react.default.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(".concat(xTransform,",").concat(yTransform,")")}},text)}StatusText.propTypes={text:_propTypes.default.string};var _default=StatusText;exports.default=_default;module.exports=exports.default},4194:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _lodash=__webpack_require__(3);var _plotUtils=__webpack_require__(714);var _propTypes=_interopRequireDefault(__webpack_require__(6));var _react=_interopRequireWildcard(__webpack_require__(0));var _SelectionMarker=_interopRequireDefault(__webpack_require__(4195));var _reactVis=__webpack_require__(343);var _Tooltip=_interopRequireDefault(__webpack_require__(1568));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getPointByX(serie,x){return serie.data.find(function(point){return point.x===x})}var InteractivePlot=function(_PureComponent){_inherits(InteractivePlot,_PureComponent);function InteractivePlot(){var _getPrototypeOf2;var _this;_classCallCheck(this,InteractivePlot);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InteractivePlot)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getMarkPoints",function(hoverX){return _this.props.series.filter(function(serie){return serie.data.some(function(point){return point.x===hoverX&&point.y!=null})}).map(function(serie){var _ref=getPointByX(serie,hoverX)||{},x=_ref.x,y=_ref.y;return{x:x,y:y,color:serie.color}})});_defineProperty(_assertThisInitialized(_this),"getTooltipPoints",function(hoverX){return _this.props.series.filter(function(series){return!series.hideTooltipValue}).map(function(serie){var point=getPointByX(serie,hoverX)||{};return{color:serie.color,value:_this.props.formatTooltipValue(point),text:serie.titleShort||serie.title}})});return _this}_createClass(InteractivePlot,[{key:"render",value:function render(){var _this$props=this.props,plotValues=_this$props.plotValues,hoverX=_this$props.hoverX,series=_this$props.series,isDrawing=_this$props.isDrawing,selectionStart=_this$props.selectionStart,selectionEnd=_this$props.selectionEnd;if((0,_lodash.isEmpty)(series)){return null}var tooltipPoints=this.getTooltipPoints(hoverX);var markPoints=this.getMarkPoints(hoverX);var x=plotValues.x,yTickValues=plotValues.yTickValues;var yValueMiddle=yTickValues[1];return _react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues},hoverX&&_react.default.createElement(_Tooltip.default,{tooltipPoints:tooltipPoints,x:hoverX,y:yValueMiddle}),hoverX&&_react.default.createElement(_reactVis.MarkSeries,{data:markPoints,colorType:"literal"}),hoverX&&_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:[hoverX]}),isDrawing&&selectionEnd!==null&&_react.default.createElement(_SelectionMarker.default,{start:x(selectionStart),end:x(selectionEnd)}))}}]);return InteractivePlot}(_react.PureComponent);InteractivePlot.propTypes={formatTooltipValue:_propTypes.default.func.isRequired,hoverX:_propTypes.default.number,isDrawing:_propTypes.default.bool.isRequired,plotValues:_propTypes.default.object.isRequired,selectionEnd:_propTypes.default.number,selectionStart:_propTypes.default.number,series:_propTypes.default.array.isRequired};var _default=InteractivePlot;exports.default=_default;module.exports=exports.default},4195:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(6));var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SelectionMarker(_ref){var innerHeight=_ref.innerHeight,marginTop=_ref.marginTop,start=_ref.start,end=_ref.end;var width=Math.abs(end-start);var x=start<end?start:end;return _react.default.createElement("rect",{pointerEvents:"none",fill:"black",fillOpacity:"0.1",x:x,y:marginTop,width:width,height:innerHeight})}SelectionMarker.requiresSVG=true;SelectionMarker.propTypes={start:_propTypes.default.number,end:_propTypes.default.number};var _default=SelectionMarker;exports.default=_default;module.exports=exports.default},4196:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _lodash=__webpack_require__(3);var _reactVis=__webpack_require__(343);var _propTypes=_interopRequireDefault(__webpack_require__(6));var _react=_interopRequireWildcard(__webpack_require__(0));var _plotUtils=__webpack_require__(714);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getXValuesCombined(series){return _lodash.union.apply(void 0,_toConsumableArray(series.map(function(serie){return serie.data.map(function(p){return p.x})}))).map(function(x){return{x:x}})}var VoronoiPlot=function(_PureComponent){_inherits(VoronoiPlot,_PureComponent);function VoronoiPlot(){_classCallCheck(this,VoronoiPlot);return _possibleConstructorReturn(this,_getPrototypeOf(VoronoiPlot).apply(this,arguments))}_createClass(VoronoiPlot,[{key:"render",value:function render(){var _this$props=this.props,series=_this$props.series,plotValues=_this$props.plotValues,noHits=_this$props.noHits;var XY_MARGIN=plotValues.XY_MARGIN,XY_HEIGHT=plotValues.XY_HEIGHT,XY_WIDTH=plotValues.XY_WIDTH,_x=plotValues.x;var xValuesCombined=getXValuesCombined(series);if(!xValuesCombined||noHits){return null}return _react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues,onMouseLeave:this.props.onMouseLeave},_react.default.createElement(_reactVis.Voronoi,{extent:[[XY_MARGIN.left,XY_MARGIN.top],[XY_WIDTH,XY_HEIGHT]],nodes:xValuesCombined,onHover:this.props.onHover,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,x:function x(d){return _x(d.x)},y:function y(){return 0}}))}}]);return VoronoiPlot}(_react.PureComponent);var _default=VoronoiPlot;exports.default=_default;VoronoiPlot.propTypes={noHits:_propTypes.default.bool.isRequired,onHover:_propTypes.default.func.isRequired,onMouseDown:_propTypes.default.func.isRequired,onMouseLeave:_propTypes.default.func.isRequired,onMouseUp:_propTypes.default.func,series:_propTypes.default.array.isRequired,plotValues:_propTypes.default.object.isRequired};module.exports=exports.default},4197:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _templateObject(){var data=_taggedTemplateLiteral(["\n  ",";\n  font-family: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var i18n_2=__webpack_require__(342);var variables_1=__webpack_require__(53);var formatters_1=__webpack_require__(299);var ImpactBar_1=__webpack_require__(1578);var APMLink_1=__webpack_require__(410);var url_helpers_1=__webpack_require__(219);var ManagedTable_1=__webpack_require__(977);var TransactionNameLink=styled_components_1.default(APMLink_1.APMLink)(_templateObject(),variables_1.truncate("100%"),variables_1.fontFamilyCode);function TransactionList(_ref){var items=_ref.items,serviceName=_ref.serviceName,rest=_objectWithoutProperties(_ref,["items","serviceName"]);var columns=[{field:"name",name:i18n_1.i18n.translate("xpack.apm.transactionsTable.nameColumnLabel",{defaultMessage:"Name"}),width:"50%",sortable:true,render:function render(transactionName,data){var encodedType=url_helpers_1.legacyEncodeURIComponent(data.sample.transaction.type);var encodedName=url_helpers_1.legacyEncodeURIComponent(transactionName);var transactionPath="/".concat(serviceName,"/transactions/").concat(encodedType,"/").concat(encodedName);return react_1.default.createElement(eui_1.EuiToolTip,{id:"transaction-name-link-tooltip",content:transactionName||i18n_2.NOT_AVAILABLE_LABEL},react_1.default.createElement(TransactionNameLink,{path:transactionPath},transactionName||i18n_2.NOT_AVAILABLE_LABEL))}},{field:"averageResponseTime",name:i18n_1.i18n.translate("xpack.apm.transactionsTable.avgDurationColumnLabel",{defaultMessage:"Avg. duration"}),sortable:true,dataType:"number",render:function render(value){return formatters_1.asMillis(value)}},{field:"p95",name:i18n_1.i18n.translate("xpack.apm.transactionsTable.95thPercentileColumnLabel",{defaultMessage:"95th percentile"}),sortable:true,dataType:"number",render:function render(value){return formatters_1.asMillis(value)}},{field:"transactionsPerMinute",name:i18n_1.i18n.translate("xpack.apm.transactionsTable.transactionsPerMinuteColumnLabel",{defaultMessage:"Trans. per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat(formatters_1.asDecimal(value)," ").concat(i18n_1.i18n.translate("xpack.apm.transactionsTable.transactionsPerMinuteUnitLabel",{defaultMessage:"tpm"}))}},{field:"impact",name:i18n_1.i18n.translate("xpack.apm.transactionsTable.impactColumnLabel",{defaultMessage:"Impact"}),sortable:true,dataType:"number",render:function render(value){return react_1.default.createElement(ImpactBar_1.ImpactBar,{value:value})}}];return react_1.default.createElement(ManagedTable_1.ManagedTable,Object.assign({columns:columns,items:items,initialSort:{field:"impact",direction:"desc"},initialPageSize:25},rest))}exports.TransactionList=TransactionList},4198:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);function useRedirect(history,redirectLocation){react_1.useEffect(function(){if(redirectLocation){history.replace(redirectLocation)}})}exports.useRedirect=useRedirect},4199:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var useServiceMetricCharts_1=__webpack_require__(4200);var SyncChartGroup_1=__webpack_require__(1576);var MetricsChart_1=__webpack_require__(4202);function ServiceMetrics(_ref){var urlParams=_ref.urlParams,agentName=_ref.agentName;var _useServiceMetricChar=useServiceMetricCharts_1.useServiceMetricCharts(urlParams,agentName),data=_useServiceMetricChar.data;var start=urlParams.start,end=urlParams.end;return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(SyncChartGroup_1.SyncChartGroup,{render:function render(hoverXHandlers){return react_1.default.createElement(eui_1.EuiFlexGrid,{columns:2,gutterSize:"s"},data.charts.map(function(chart){return react_1.default.createElement(eui_1.EuiFlexItem,{key:chart.key},react_1.default.createElement(eui_1.EuiPanel,null,react_1.default.createElement(MetricsChart_1.MetricsChart,{start:start,end:end,chart:chart,hoverXHandlers:hoverXHandlers})))}))}}),react_1.default.createElement(eui_1.EuiSpacer,{size:"xxl"}))}exports.ServiceMetrics=ServiceMetrics},4200:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var metrics_1=__webpack_require__(4201);var UrlParamsContext_1=__webpack_require__(409);var useFetcher_1=__webpack_require__(248);var INITIAL_DATA={charts:[]};function useServiceMetricCharts(urlParams,agentName){var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end;var uiFilters=UrlParamsContext_1.useUiFilters(urlParams);var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(serviceName&&start&&end&&agentName){return metrics_1.loadMetricsChartData({serviceName:serviceName,start:start,end:end,agentName:agentName,uiFilters:uiFilters})}},[serviceName,start,end,agentName,uiFilters]),_useFetcher_1$useFetc2=_useFetcher_1$useFetc.data,data=_useFetcher_1$useFetc2===void 0?INITIAL_DATA:_useFetcher_1$useFetc2,error=_useFetcher_1$useFetc.error,status=_useFetcher_1$useFetc.status;return{data:data,status:status,error:error}}exports.useServiceMetricCharts=useServiceMetricCharts},4201:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(341);var get_ui_filters_es_1=__webpack_require__(597);function loadMetricsChartData(_x){return _loadMetricsChartData.apply(this,arguments)}function _loadMetricsChartData(){_loadMetricsChartData=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var serviceName,agentName,start,end,uiFilters;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:serviceName=_ref.serviceName,agentName=_ref.agentName,start=_ref.start,end=_ref.end,uiFilters=_ref.uiFilters;_context.t0=callApi_1;_context.t1="/api/apm/services/".concat(serviceName,"/metrics/charts");_context.t2=start;_context.t3=end;_context.t4=agentName;_context.next=8;return get_ui_filters_es_1.getUiFiltersES(uiFilters);case 8:_context.t5=_context.sent;_context.t6={start:_context.t2,end:_context.t3,agentName:_context.t4,uiFiltersES:_context.t5};_context.t7={pathname:_context.t1,query:_context.t6};return _context.abrupt("return",_context.t0.callApi.call(_context.t0,_context.t7));case 12:case"end":return _context.stop()}}},_callee)}));return _loadMetricsChartData.apply(this,arguments)}exports.loadMetricsChartData=loadMetricsChartData},4202:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var CustomPlot_1=tslib_1.__importDefault(__webpack_require__(1575));var formatters_1=__webpack_require__(299);var getEmptySeries_1=__webpack_require__(1577);function MetricsChart(_ref){var start=_ref.start,end=_ref.end,chart=_ref.chart,hoverXHandlers=_ref.hoverXHandlers;var formatYValue=getYTickFormatter(chart);var formatTooltip=getTooltipFormatter(chart);var transformedSeries=chart.series.map(function(series){return _objectSpread({},series,{legendValue:formatYValue(series.overallValue)})});var noHits=chart.totalHits===0;return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("span",null,chart.title)),react_1.default.createElement(CustomPlot_1.default,Object.assign({},hoverXHandlers,{noHits:noHits,series:noHits?getEmptySeries_1.getEmptySeries(start,end):transformedSeries,tickFormatY:formatYValue,formatTooltipValue:formatTooltip,yMax:chart.yUnit==="percent"?1:"max"})))}exports.MetricsChart=MetricsChart;function getYTickFormatter(chart){switch(chart.yUnit){case"bytes":{var max=Math.max.apply(Math,_toConsumableArray(chart.series.flatMap(function(series){return series.data.map(function(coord){return coord.y||0})})));return formatters_1.getFixedByteFormatter(max)}case"percent":{return function(y){return formatters_1.asPercent(y||0,1)}}default:{return function(y){return y===null?y:formatters_1.asDecimal(y)}}}}function getTooltipFormatter(_ref2){var yUnit=_ref2.yUnit;switch(yUnit){case"bytes":{return function(c){return formatters_1.asDynamicBytes(c.y)}}case"percent":{return function(c){return formatters_1.asPercent(c.y||0,1)}}default:{return function(c){return c.y===null?c.y:formatters_1.asDecimal(c.y)}}}}},4203:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var lodash_1=__webpack_require__(3);var react_1=tslib_1.__importStar(__webpack_require__(0));var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var LicenseContext_1=__webpack_require__(970);var MachineLearningFlyout_1=__webpack_require__(4204);var WatcherFlyout_1=__webpack_require__(4207);var ServiceIntegrations=function(_react_1$default$Comp){_inherits(ServiceIntegrations,_react_1$default$Comp);function ServiceIntegrations(){var _this;_classCallCheck(this,ServiceIntegrations);_this=_possibleConstructorReturn(this,_getPrototypeOf(ServiceIntegrations).apply(this,arguments));_this.state={isPopoverOpen:false,activeFlyout:null};_this.getPanelItems=lodash_1.memoize(function(mlAvailable){var panelItems=[];if(mlAvailable){panelItems=panelItems.concat(_this.getMLPanelItems())}return panelItems.concat(_this.getWatcherPanelItems())});_this.getMLPanelItems=function(){return[{name:i18n_1.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.enableMLAnomalyDetectionButtonLabel",{defaultMessage:"Enable ML anomaly detection"}),icon:"machineLearningApp",toolTipContent:i18n_1.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.enableMLAnomalyDetectionButtonTooltip",{defaultMessage:"Set up a machine learning job for this service"}),onClick:function onClick(){_this.closePopover();_this.openFlyout("ML")}}]};_this.getWatcherPanelItems=function(){return[{name:i18n_1.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.enableWatcherErrorReportsButtonLabel",{defaultMessage:"Enable watcher error reports"}),icon:"watchesApp",onClick:function onClick(){_this.closePopover();_this.openFlyout("Watcher")}},{name:i18n_1.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.viewWatchesButtonLabel",{defaultMessage:"View existing watches"}),icon:"watchesApp",href:chrome_1.default.addBasePath("/app/kibana#/management/elasticsearch/watcher"),target:"_blank",onClick:function onClick(){return _this.closePopover()}}]};_this.openPopover=function(){return _this.setState({isPopoverOpen:true})};_this.closePopover=function(){return _this.setState({isPopoverOpen:false})};_this.openFlyout=function(name){return _this.setState({activeFlyout:name})};_this.closeFlyouts=function(){return _this.setState({activeFlyout:null})};return _this}_createClass(ServiceIntegrations,[{key:"render",value:function render(){var _this2=this;var button=react_1.default.createElement(eui_1.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",onClick:this.openPopover},i18n_1.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.integrationsButtonLabel",{defaultMessage:"Integrations"}));return react_1.default.createElement(LicenseContext_1.LicenseContext.Consumer,null,function(license){return react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(eui_1.EuiPopover,{id:"integrations-menu",button:button,isOpen:_this2.state.isPopoverOpen,closePopover:_this2.closePopover,panelPaddingSize:"none",anchorPosition:"downRight"},react_1.default.createElement(eui_1.EuiContextMenu,{initialPanelId:0,panels:[{id:0,items:_this2.getPanelItems(license.features.ml.is_available)}]})),react_1.default.createElement(MachineLearningFlyout_1.MachineLearningFlyout,{isOpen:_this2.state.activeFlyout==="ML",onClose:_this2.closeFlyouts,urlParams:_this2.props.urlParams,serviceTransactionTypes:_this2.props.transactionTypes}),react_1.default.createElement(WatcherFlyout_1.WatcherFlyout,{isOpen:_this2.state.activeFlyout==="Watcher",onClose:_this2.closeFlyouts,urlParams:_this2.props.urlParams}))})}}]);return ServiceIntegrations}(react_1.default.Component);exports.ServiceIntegrations=ServiceIntegrations},4204:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importStar(__webpack_require__(0));var notify_1=__webpack_require__(14);var ml_1=__webpack_require__(978);var savedObjects_1=__webpack_require__(971);var MLJobLink_1=__webpack_require__(976);var view_1=__webpack_require__(4205);var MachineLearningFlyout=function(_react_1$Component){_inherits(MachineLearningFlyout,_react_1$Component);function MachineLearningFlyout(){var _this;_classCallCheck(this,MachineLearningFlyout);_this=_possibleConstructorReturn(this,_getPrototypeOf(MachineLearningFlyout).apply(this,arguments));_this.state={isCreatingJob:false,hasIndexPattern:false};_this.mounted=false;_this.onClickCreate=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var transactionType,serviceName,res,didSucceed;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:transactionType=_ref.transactionType;_this.setState({isCreatingJob:true});_context.prev=2;serviceName=_this.props.urlParams.serviceName;if(serviceName){_context.next=6;break}throw new Error("Service name is required to create this ML job");case 6:_context.next=8;return ml_1.startMLJob({serviceName:serviceName,transactionType:transactionType});case 8:res=_context.sent;didSucceed=res.datafeeds[0].success&&res.jobs[0].success;if(didSucceed){_context.next=12;break}throw new Error("Creating ML job failed");case 12:_this.addSuccessToast({transactionType:transactionType});_context.next=18;break;case 15:_context.prev=15;_context.t0=_context["catch"](2);_this.addErrorToast();case 18:_this.setState({isCreatingJob:false});_this.props.onClose();case 20:case"end":return _context.stop()}}},_callee,null,[[2,15]])}));return function(_x){return _ref2.apply(this,arguments)}}();_this.addErrorToast=function(){var urlParams=_this.props.urlParams;var serviceName=urlParams.serviceName;if(!serviceName){return}notify_1.toastNotifications.addWarning({title:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreationFailedNotificationTitle",{defaultMessage:"Job creation failed"}),text:react_1.default.createElement("p",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreationFailedNotificationText",{defaultMessage:"Your current license may not allow for creating machine learning jobs, or this job may already exist."}))})};_this.addSuccessToast=function(_ref3){var transactionType=_ref3.transactionType;var urlParams=_this.props.urlParams;var serviceName=urlParams.serviceName;if(!serviceName){return}notify_1.toastNotifications.addSuccess({title:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreatedNotificationTitle",{defaultMessage:"Job successfully created"}),text:react_1.default.createElement("p",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreatedNotificationText",{defaultMessage:"The analysis is now running for {serviceName} ({transactionType}). It might take a while before results are added to the response times graph.",values:{serviceName:serviceName,transactionType:transactionType}})," ",react_1.default.createElement(MLJobLink_1.MLJobLink,{serviceName:serviceName,transactionType:transactionType},i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreatedNotificationText.viewJobLinkText",{defaultMessage:"View job"})))})};return _this}_createClass(MachineLearningFlyout,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false}},{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _this2=this;var indexPattern;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.mounted=true;_context2.next=3;return savedObjects_1.getAPMIndexPattern();case 3:indexPattern=_context2.sent;setTimeout(function(){if(!_this2.mounted){return}_this2.setState({hasIndexPattern:!!indexPattern})},0);case 5:case"end":return _context2.stop()}}},_callee2,this)}));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"render",value:function render(){var _this$props=this.props,isOpen=_this$props.isOpen,onClose=_this$props.onClose,urlParams=_this$props.urlParams,serviceTransactionTypes=_this$props.serviceTransactionTypes;var serviceName=urlParams.serviceName;var _this$state=this.state,isCreatingJob=_this$state.isCreatingJob,hasIndexPattern=_this$state.hasIndexPattern;if(!isOpen||!serviceName){return null}return react_1.default.createElement(view_1.MachineLearningFlyoutView,{hasIndexPattern:hasIndexPattern,isCreatingJob:isCreatingJob,onClickCreate:this.onClickCreate,onClose:onClose,serviceName:serviceName,serviceTransactionTypes:serviceTransactionTypes})}}]);return MachineLearningFlyout}(react_1.Component);exports.MachineLearningFlyout=MachineLearningFlyout},4205:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=__webpack_require__(5);var react_2=tslib_1.__importStar(__webpack_require__(0));var useFetcher_1=__webpack_require__(248);var ml_1=__webpack_require__(978);var KibanaLink_1=__webpack_require__(598);var MLJobLink_1=__webpack_require__(976);var MLLink_1=__webpack_require__(1574);var TransactionSelect_1=__webpack_require__(4206);function MachineLearningFlyoutView(_ref){var hasIndexPattern=_ref.hasIndexPattern,isCreatingJob=_ref.isCreatingJob,onClickCreate=_ref.onClickCreate,onClose=_ref.onClose,serviceName=_ref.serviceName,serviceTransactionTypes=_ref.serviceTransactionTypes;var _react_2$useState=react_2.useState(serviceTransactionTypes[0]),_react_2$useState2=_slicedToArray(_react_2$useState,2),transactionType=_react_2$useState2[0],setTransactionType=_react_2$useState2[1];var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){return ml_1.getHasMLJob({serviceName:serviceName,transactionType:transactionType})},[serviceName,transactionType]),_useFetcher_1$useFetc2=_useFetcher_1$useFetc.data,hasMLJob=_useFetcher_1$useFetc2===void 0?false:_useFetcher_1$useFetc2,status=_useFetcher_1$useFetc.status;var isLoadingMLJob=status===useFetcher_1.FETCH_STATUS.LOADING;return react_2.default.createElement(eui_1.EuiFlyout,{onClose:onClose,size:"s"},react_2.default.createElement(eui_1.EuiFlyoutHeader,null,react_2.default.createElement(eui_1.EuiTitle,null,react_2.default.createElement("h2",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.enableAnomalyDetectionTitle",{defaultMessage:"Enable anomaly detection"}))),react_2.default.createElement(eui_1.EuiSpacer,{size:"s"})),react_2.default.createElement(eui_1.EuiFlyoutBody,null,hasMLJob&&react_2.default.createElement("div",null,react_2.default.createElement(eui_1.EuiCallOut,{title:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.callout.jobExistsTitle",{defaultMessage:"Job already exists"}),color:"success",iconType:"check"},react_2.default.createElement("p",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.callout.jobExistsDescription",{defaultMessage:"There is currently a job running for {serviceName} ({transactionType}).",values:{serviceName:serviceName,transactionType:transactionType}})," ",react_2.default.createElement(MLJobLink_1.MLJobLink,{serviceName:serviceName,transactionType:transactionType},i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.callout.jobExistsDescription.viewJobLinkText",{defaultMessage:"View existing job"})))),react_2.default.createElement(eui_1.EuiSpacer,{size:"m"})),!hasIndexPattern&&react_2.default.createElement("div",null,react_2.default.createElement(eui_1.EuiCallOut,{title:react_2.default.createElement("span",null,react_2.default.createElement(react_1.FormattedMessage,{id:"xpack.apm.serviceDetails.enableAnomalyDetectionPanel.callout.noPatternTitle",defaultMessage:"No APM index pattern available. To create a job, please import the APM index pattern via the {setupInstructionLink}",values:{setupInstructionLink:react_2.default.createElement(KibanaLink_1.KibanaLink,{path:"/home/tutorial/apm"},i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.callout.noPatternTitle.setupInstructionLinkText",{defaultMessage:"Setup Instructions"}))}})),color:"warning",iconType:"alert"}),react_2.default.createElement(eui_1.EuiSpacer,{size:"m"})),react_2.default.createElement(eui_1.EuiText,null,react_2.default.createElement("p",null,react_2.default.createElement(react_1.FormattedMessage,{id:"xpack.apm.serviceDetails.enableAnomalyDetectionPanel.createMLJobDescription",defaultMessage:"Here you can create a machine learning job to calculate anomaly scores on durations for APM transactions\n                    within the {serviceName} service. Once enabled, {transactionDurationGraphText} will show the expected bounds and annotate\n                    the graph once the anomaly score is >=75.",values:{serviceName:serviceName,transactionDurationGraphText:react_2.default.createElement("b",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.createMLJobDescription.transactionDurationGraphText",{defaultMessage:"the transaction duration graph"}))}})),react_2.default.createElement("p",null,react_2.default.createElement(react_1.FormattedMessage,{id:"xpack.apm.serviceDetails.enableAnomalyDetectionPanel.manageMLJobDescription",defaultMessage:"Jobs can be created for each service + transaction type combination.\n                    Once a job is created, you can manage it and see more details in the {mlJobsPageLink}.",values:{mlJobsPageLink:react_2.default.createElement(MLLink_1.MLLink,null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.manageMLJobDescription.mlJobsPageLinkText",{defaultMessage:"Machine Learning jobs management page"}))}})," ",react_2.default.createElement("em",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.manageMLJobDescription.noteText",{defaultMessage:"Note: It might take a few minutes for the job to begin calculating results."})))),react_2.default.createElement(eui_1.EuiSpacer,null)),react_2.default.createElement(eui_1.EuiFlyoutFooter,null,react_2.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},react_2.default.createElement(eui_1.EuiFlexItem,null,serviceTransactionTypes.length>1?react_2.default.createElement(TransactionSelect_1.TransactionSelect,{selectedTransactionType:transactionType,transactionTypes:serviceTransactionTypes,onChange:function onChange(value){setTransactionType(value)}}):null),react_2.default.createElement(eui_1.EuiFlexItem,{grow:false},react_2.default.createElement(eui_1.EuiFormRow,null,react_2.default.createElement(eui_1.EuiButton,{onClick:function onClick(){return onClickCreate({transactionType:transactionType})},fill:true,disabled:isCreatingJob||hasMLJob||!hasIndexPattern||isLoadingMLJob},i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.createNewJobButtonLabel",{defaultMessage:"Create new job"})))))))}exports.MachineLearningFlyoutView=MachineLearningFlyoutView},4206:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));function TransactionSelect(_ref){var transactionTypes=_ref.transactionTypes,onChange=_ref.onChange,selectedTransactionType=_ref.selectedTransactionType;return react_1.default.createElement(eui_1.EuiFormRow,{label:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.selectTransactionTypeLabel",{defaultMessage:"Select a transaction type for this job"})},react_1.default.createElement(eui_1.EuiSuperSelect,{valueOfSelected:selectedTransactionType,onChange:onChange,options:transactionTypes.map(function(transactionType){return{value:transactionType,inputDisplay:transactionType,dropdownDisplay:react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"spaceBetween"},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiText,null,transactionType)))}})}))}exports.TransactionSelect=TransactionSelect},4207:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _templateObject(){var data=_taggedTemplateLiteral(["\n  .euiFormRow {\n    max-width: 85px;\n  }\n  .euiFormHelpText {\n    width: 200px;\n  }\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=__webpack_require__(5);var lodash_1=__webpack_require__(3);var moment_timezone_1=tslib_1.__importDefault(__webpack_require__(224));var react_2=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var notify_1=__webpack_require__(14);var KibanaLink_1=__webpack_require__(598);var createErrorGroupWatch_1=__webpack_require__(4208);var ElasticDocsLink_1=__webpack_require__(973);var getUserTimezone=lodash_1.memoize(function(){var uiSettings=chrome_1.default.getUiSettingsClient();return uiSettings.get("dateFormat:tz")==="Browser"?moment_timezone_1.default.tz.guess():uiSettings.get("dateFormat:tz")});var SmallInput=styled_components_1.default.div(_templateObject());var WatcherFlyout=function(_react_2$Component){_inherits(WatcherFlyout,_react_2$Component);function WatcherFlyout(){var _this;_classCallCheck(this,WatcherFlyout);_this=_possibleConstructorReturn(this,_getPrototypeOf(WatcherFlyout).apply(this,arguments));_this.state={schedule:"daily",threshold:10,actions:{slack:false,email:false},interval:{value:10,unit:"m"},daily:"08:00",emails:"",slackUrl:""};_this.onChangeSchedule=function(schedule){_this.setState({schedule:schedule})};_this.onChangeThreshold=function(event){_this.setState({threshold:parseInt(event.target.value,10)})};_this.onChangeDailyUnit=function(event){_this.setState({daily:event.target.value})};_this.onChangeIntervalValue=function(event){_this.setState({interval:{value:parseInt(event.target.value,10),unit:_this.state.interval.unit}})};_this.onChangeIntervalUnit=function(event){_this.setState({interval:{value:_this.state.interval.value,unit:event.target.value}})};_this.onChangeAction=function(actionName){_this.setState({actions:_objectSpread({},_this.state.actions,_defineProperty({},actionName,!_this.state.actions[actionName]))})};_this.onChangeEmails=function(event){_this.setState({emails:event.target.value})};_this.onChangeSlackUrl=function(event){_this.setState({slackUrl:event.target.value})};_this.createWatch=function(){var serviceName=_this.props.urlParams.serviceName;if(!serviceName){return}var emails=_this.state.actions.email?_this.state.emails.split(",").map(function(email){return email.trim()}).filter(function(email){return!!email}):[];var slackUrl=_this.state.actions.slack?_this.state.slackUrl:"";var schedule=_this.state.schedule==="interval"?{interval:"".concat(_this.state.interval.value).concat(_this.state.interval.unit)}:{daily:{at:"".concat(_this.state.daily)}};var timeRange=_this.state.schedule==="interval"?{value:_this.state.interval.value,unit:_this.state.interval.unit}:{value:24,unit:"h"};return createErrorGroupWatch_1.createErrorGroupWatch({emails:emails,schedule:schedule,serviceName:serviceName,slackUrl:slackUrl,threshold:_this.state.threshold,timeRange:timeRange}).then(function(id){_this.props.onClose();_this.addSuccessToast(id)}).catch(function(e){console.error(e);_this.addErrorToast()})};_this.addErrorToast=function(){notify_1.toastNotifications.addWarning({title:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreationFailedNotificationTitle",{defaultMessage:"Watch creation failed"}),text:react_2.default.createElement("p",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreationFailedNotificationText",{defaultMessage:"Make sure your user has permission to create watches."}))})};_this.addSuccessToast=function(id){notify_1.toastNotifications.addSuccess({title:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreatedNotificationTitle",{defaultMessage:"New watch created!"}),text:react_2.default.createElement("p",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreatedNotificationText",{defaultMessage:"The watch is now ready and will send error reports for {serviceName}.",values:{serviceName:_this.props.urlParams.serviceName}})," ",react_2.default.createElement(KibanaLink_1.KibanaLink,{path:"/management/elasticsearch/watcher/watches/watch/".concat(id)},i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreatedNotificationText.viewWatchLinkText",{defaultMessage:"View watch"})))})};return _this}_createClass(WatcherFlyout,[{key:"render",value:function render(){var _this2=this;if(!this.props.isOpen){return null}var userTimezoneSetting=getUserTimezone();var dailyTime=this.state.daily;var inputTime="".concat(dailyTime,"Z");var inputFormat="HH:mmZ";var dailyTimeFormatted=moment_timezone_1.default(inputTime,inputFormat).tz(userTimezoneSetting).format("HH:mm");var dailyTime12HourFormatted=moment_timezone_1.default(inputTime,inputFormat).tz(userTimezoneSetting).format("hh:mm A (z)");var intervalHours=lodash_1.range(24).map(function(i){var hour=lodash_1.padLeft(i.toString(),2,"0");return{value:"".concat(hour,":00"),text:"".concat(hour,":00 UTC")}});var flyoutBody=react_2.default.createElement(eui_1.EuiText,null,react_2.default.createElement("p",null,react_2.default.createElement(react_1.FormattedMessage,{id:"xpack.apm.serviceDetails.enableErrorReportsPanel.formDescription",defaultMessage:"This form will assist in creating a Watch that can notify you of error occurrences from this service.\n              To learn more about Watcher, please read our {documentationLink}.",values:{documentationLink:react_2.default.createElement(ElasticDocsLink_1.ElasticDocsLink,{target:"_blank",section:"/x-pack",path:"/watcher-getting-started.html"},i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.formDescription.documentationLinkText",{defaultMessage:"documentation"}))}})),react_2.default.createElement(eui_1.EuiForm,null,react_2.default.createElement("h4",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.conditionTitle",{defaultMessage:"Condition"})),react_2.default.createElement(eui_1.EuiFormRow,{label:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.occurrencesThresholdLabel",{defaultMessage:"Occurrences threshold per error group"}),helpText:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.occurrencesThresholdHelpText",{defaultMessage:"Threshold to be met for error group to be included in report."}),compressed:true},react_2.default.createElement(eui_1.EuiFieldNumber,{icon:"number",min:1,value:this.state.threshold,onChange:this.onChangeThreshold})),react_2.default.createElement("h4",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.triggerScheduleTitle",{defaultMessage:"Trigger schedule"})),react_2.default.createElement(eui_1.EuiText,{size:"xs",color:"subdued"},i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.triggerScheduleDescription",{defaultMessage:"Choose the time interval for the report, when the threshold is exceeded."})),react_2.default.createElement(eui_1.EuiSpacer,{size:"m"}),react_2.default.createElement(eui_1.EuiRadio,{id:"daily",label:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.dailyReportRadioButtonLabel",{defaultMessage:"Daily report"}),onChange:function onChange(){return _this2.onChangeSchedule("daily")},checked:this.state.schedule==="daily"}),react_2.default.createElement(eui_1.EuiSpacer,{size:"m"}),react_2.default.createElement(eui_1.EuiFormRow,{helpText:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.dailyReportHelpText",{defaultMessage:"The daily report will be sent at {dailyTimeFormatted} / {dailyTime12HourFormatted}.",values:{dailyTimeFormatted:dailyTimeFormatted,dailyTime12HourFormatted:dailyTime12HourFormatted}}),compressed:true},react_2.default.createElement(eui_1.EuiSelect,{value:dailyTime,onChange:this.onChangeDailyUnit,options:intervalHours,disabled:this.state.schedule!=="daily"})),react_2.default.createElement(eui_1.EuiRadio,{id:"interval",label:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalRadioButtonLabel",{defaultMessage:"Interval"}),onChange:function onChange(){return _this2.onChangeSchedule("interval")},checked:this.state.schedule==="interval"}),react_2.default.createElement(eui_1.EuiSpacer,{size:"m"}),react_2.default.createElement(eui_1.EuiFlexGroup,null,react_2.default.createElement(eui_1.EuiFlexItem,{grow:false},react_2.default.createElement(SmallInput,null,react_2.default.createElement(eui_1.EuiFormRow,{helpText:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalHelpText",{defaultMessage:"Time interval between reports."}),compressed:true},react_2.default.createElement(eui_1.EuiFieldNumber,{icon:"clock",min:1,value:this.state.interval.value,onChange:this.onChangeIntervalValue,disabled:this.state.schedule!=="interval"})))),react_2.default.createElement(eui_1.EuiFlexItem,{grow:false},react_2.default.createElement(eui_1.EuiFormRow,{compressed:true},react_2.default.createElement(eui_1.EuiSelect,{value:this.state.interval.unit,onChange:this.onChangeIntervalUnit,options:[{value:"m",text:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalUnit.minsLabel",{defaultMessage:"mins"})},{value:"h",text:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalUnit.hrsLabel",{defaultMessage:"hrs"})}],disabled:this.state.schedule!=="interval"})))),react_2.default.createElement("h4",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.actionsTitle",{defaultMessage:"Actions"})),react_2.default.createElement(eui_1.EuiText,{size:"xs",color:"subdued"},i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.actionsDescription",{defaultMessage:"Reports can be sent by email or posted to a Slack channel. Each report will include the top 10 errors sorted by occurrence."})),react_2.default.createElement(eui_1.EuiSpacer,{size:"m"}),react_2.default.createElement(eui_1.EuiSwitch,{label:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.sendEmailLabel",{defaultMessage:"Send email"}),checked:this.state.actions.email,onChange:function onChange(){return _this2.onChangeAction("email")}}),react_2.default.createElement(eui_1.EuiSpacer,{size:"m"}),this.state.actions.email&&react_2.default.createElement(eui_1.EuiFormRow,{label:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.recipientsLabel",{defaultMessage:"Recipients (separated with comma)"}),compressed:true,helpText:react_2.default.createElement("span",null,react_2.default.createElement(react_1.FormattedMessage,{id:"xpack.apm.serviceDetails.enableErrorReportsPanel.recipientsHelpText",defaultMessage:"If you have not configured email, please see the {documentationLink}.",values:{documentationLink:react_2.default.createElement(ElasticDocsLink_1.ElasticDocsLink,{target:"_blank",section:"/x-pack",path:"/actions-email.html#configuring-email"},i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.recipientsHelpText.documentationLinkText",{defaultMessage:"documentation"}))}}))},react_2.default.createElement(eui_1.EuiFieldText,{icon:"user",value:this.state.emails,onChange:this.onChangeEmails})),react_2.default.createElement(eui_1.EuiSwitch,{label:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.sendSlackNotificationLabel",{defaultMessage:"Send Slack notification"}),checked:this.state.actions.slack,onChange:function onChange(){return _this2.onChangeAction("slack")}}),react_2.default.createElement(eui_1.EuiSpacer,{size:"m"}),this.state.actions.slack&&react_2.default.createElement(eui_1.EuiFormRow,{label:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.slackWebhookURLLabel",{defaultMessage:"Slack Webhook URL"}),compressed:true,helpText:react_2.default.createElement("span",null,react_2.default.createElement(react_1.FormattedMessage,{id:"xpack.apm.serviceDetails.enableErrorReportsPanel.slackWebhookURLHelpText",defaultMessage:"To get a Slack webhook, please see the {documentationLink}.",values:{documentationLink:react_2.default.createElement(eui_1.EuiLink,{target:"_blank",href:"https://get.slack.help/hc/en-us/articles/115005265063-Incoming-WebHooks-for-Slack"},i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.slackWebhookURLHelpText.documentationLinkText",{defaultMessage:"documentation"}))}}))},react_2.default.createElement(eui_1.EuiFieldText,{icon:"link",value:this.state.slackUrl,onChange:this.onChangeSlackUrl}))));return react_2.default.createElement(eui_1.EuiFlyout,{onClose:this.props.onClose,size:"s"},react_2.default.createElement(eui_1.EuiFlyoutHeader,null,react_2.default.createElement(eui_1.EuiTitle,null,react_2.default.createElement("h2",null,i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.enableErrorReportsTitle",{defaultMessage:"Enable error reports"})))),react_2.default.createElement(eui_1.EuiFlyoutBody,null,flyoutBody),react_2.default.createElement(eui_1.EuiFlyoutFooter,null,react_2.default.createElement(eui_1.EuiButton,{onClick:this.createWatch,fill:true,disabled:!this.state.actions.email&&!this.state.actions.slack},i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.createWatchButtonLabel",{defaultMessage:"Create watch"}))))}}]);return WatcherFlyout}(react_2.Component);exports.WatcherFlyout=WatcherFlyout},4208:function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var i18n_1=__webpack_require__(4);var lodash_1=__webpack_require__(3);var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var url_1=tslib_1.__importDefault(__webpack_require__(31));var uuid_1=tslib_1.__importDefault(__webpack_require__(59));var elasticsearch_fieldnames_1=__webpack_require__(320);var watcher_1=__webpack_require__(4209);function getSlackPathUrl(slackUrl){if(slackUrl){var _url_1$default$parse=url_1.default.parse(slackUrl),path=_url_1$default$parse.path;return path}}function createErrorGroupWatch(_x){return _createErrorGroupWatch.apply(this,arguments)}function _createErrorGroupWatch(){_createErrorGroupWatch=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var _ref$emails,emails,schedule,serviceName,slackUrl,threshold,timeRange,id,apmIndexPatternTitle,slackUrlPath,emailTemplate,slackTemplate,actions,body;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$emails=_ref.emails,emails=_ref$emails===void 0?[]:_ref$emails,schedule=_ref.schedule,serviceName=_ref.serviceName,slackUrl=_ref.slackUrl,threshold=_ref.threshold,timeRange=_ref.timeRange;id="apm-".concat(uuid_1.default.v4());apmIndexPatternTitle=chrome_1.default.getInjected("apmIndexPatternTitle");slackUrlPath=getSlackPathUrl(slackUrl);emailTemplate=i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.emailTemplateText",{defaultMessage:"Your service {serviceName} has error groups which exceeds {threshold} occurrences within {timeRange}{br}"+"{br}"+"{errorGroupsBuckets}{br}"+"{errorLogMessage}{br}"+"{errorCulprit}N/A{slashErrorCulprit}{br}"+"{docCountParam} occurrences{br}"+"{slashErrorGroupsBucket}",values:{serviceName:'"{{ctx.metadata.serviceName}}"',threshold:"{{ctx.metadata.threshold}}",timeRange:'"{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"',errorGroupsBuckets:"{{#ctx.payload.aggregations.error_groups.buckets}}",errorLogMessage:"<strong>{{sample.hits.hits.0._source.error.log.message}}{{^sample.hits.hits.0._source.error.log.message}}{{sample.hits.hits.0._source.error.exception.0.message}}{{/sample.hits.hits.0._source.error.log.message}}</strong>",errorCulprit:"{{sample.hits.hits.0._source.error.culprit}}{{^sample.hits.hits.0._source.error.culprit}}",slashErrorCulprit:"{{/sample.hits.hits.0._source.error.culprit}}",docCountParam:"{{doc_count}}",slashErrorGroupsBucket:"{{/ctx.payload.aggregations.error_groups.buckets}}",br:"<br/>"}});slackTemplate=i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.slackTemplateText",{defaultMessage:"Your service {serviceName} has error groups which exceeds {threshold} occurrences within {timeRange}\n{errorGroupsBuckets}\n{errorLogMessage}\n{errorCulprit}N/A{slashErrorCulprit}\n{docCountParam} occurrences\n{slashErrorGroupsBucket}",values:{serviceName:'"{{ctx.metadata.serviceName}}"',threshold:"{{ctx.metadata.threshold}}",timeRange:'"{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"',errorGroupsBuckets:"{{#ctx.payload.aggregations.error_groups.buckets}}",errorLogMessage:">*{{sample.hits.hits.0._source.error.log.message}}{{^sample.hits.hits.0._source.error.log.message}}{{sample.hits.hits.0._source.error.exception.0.message}}{{/sample.hits.hits.0._source.error.log.message}}*",errorCulprit:">{{#sample.hits.hits.0._source.error.culprit}}`{{sample.hits.hits.0._source.error.culprit}}`{{/sample.hits.hits.0._source.error.culprit}}{{^sample.hits.hits.0._source.error.culprit}}",slashErrorCulprit:"{{/sample.hits.hits.0._source.error.culprit}}",docCountParam:">{{doc_count}}",slashErrorGroupsBucket:"{{/ctx.payload.aggregations.error_groups.buckets}}"}});actions={log_error:{logging:{text:emailTemplate}}};body={metadata:{emails:emails,trigger:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.triggerText",{defaultMessage:"This value must be changed in trigger section"}),serviceName:serviceName,threshold:threshold,timeRangeValue:timeRange.value,timeRangeUnit:timeRange.unit,slackUrlPath:slackUrlPath},trigger:{schedule:schedule},input:{search:{request:{indices:[apmIndexPatternTitle],body:{size:0,query:{bool:{filter:[{term:_defineProperty({},elasticsearch_fieldnames_1.SERVICE_NAME,"{{ctx.metadata.serviceName}}")},{term:_defineProperty({},elasticsearch_fieldnames_1.PROCESSOR_EVENT,"error")},{range:{"@timestamp":{gte:"now-{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"}}}]}},aggs:{error_groups:{terms:{min_doc_count:"{{ctx.metadata.threshold}}",field:elasticsearch_fieldnames_1.ERROR_GROUP_ID,size:10,order:{_count:"desc"}},aggs:{sample:{top_hits:{_source:[elasticsearch_fieldnames_1.ERROR_LOG_MESSAGE,elasticsearch_fieldnames_1.ERROR_EXC_MESSAGE,elasticsearch_fieldnames_1.ERROR_EXC_HANDLED,elasticsearch_fieldnames_1.ERROR_CULPRIT,elasticsearch_fieldnames_1.ERROR_GROUP_ID,"@timestamp"],sort:[{"@timestamp":"desc"}],size:1}}}}}}}}},condition:{script:{source:"return ctx.payload.aggregations.error_groups.buckets.length > 0"}},actions:actions};if(slackUrlPath){body.actions.slack_webhook={webhook:{scheme:"https",host:"hooks.slack.com",port:443,method:"POST",path:"{{ctx.metadata.slackUrlPath}}",headers:{"Content-Type":"application/json"},body:"__json__::".concat(JSON.stringify({text:slackTemplate}))}}}if(!lodash_1.isEmpty(emails)){body.actions.email={email:{to:"{{#join}}ctx.metadata.emails{{/join}}",subject:i18n_1.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.emailSubjectText",{defaultMessage:"{serviceName} has error groups which exceeds the threshold",values:{serviceName:'"{{ctx.metadata.serviceName}}"'}}),body:{html:emailTemplate}}}}_context.next=12;return watcher_1.createWatch(id,body);case 12:return _context.abrupt("return",id);case 13:case"end":return _context.stop()}}},_callee)}));return _createErrorGroupWatch.apply(this,arguments)}exports.createErrorGroupWatch=createErrorGroupWatch},4209:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createWatch=createWatch;var _callApi=__webpack_require__(341);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function createWatch(_x,_x2){return _createWatch.apply(this,arguments)}function _createWatch(){_createWatch=_asyncToGenerator(regeneratorRuntime.mark(function _callee(id,watch){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",(0,_callApi.callApi)({method:"PUT",pathname:"/api/watcher/watch/".concat(id),body:JSON.stringify({type:"json",id:id,watch:watch})}));case 1:case"end":return _context.stop()}}},_callee)}));return _createWatch.apply(this,arguments)}},4210:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var useTransactionDetailsCharts_1=__webpack_require__(4211);var useTransactionDistribution_1=__webpack_require__(4212);var useWaterfall_1=__webpack_require__(4213);var TransactionCharts_1=__webpack_require__(1572);var ApmHeader_1=__webpack_require__(709);var Distribution_1=__webpack_require__(4215);var Transaction_1=__webpack_require__(4216);var useLocation_1=__webpack_require__(319);var useUrlParams_1=__webpack_require__(374);var useFetcher_1=__webpack_require__(248);function TransactionDetails(){var location=useLocation_1.useLocation();var _useUrlParams_1$useUr=useUrlParams_1.useUrlParams(),urlParams=_useUrlParams_1$useUr.urlParams;var _useTransactionDistri=useTransactionDistribution_1.useTransactionDistribution(urlParams),distributionData=_useTransactionDistri.data,distributionStatus=_useTransactionDistri.status;var _useTransactionDetail=useTransactionDetailsCharts_1.useTransactionDetailsCharts(urlParams),transactionDetailsChartsData=_useTransactionDetail.data;var _useWaterfall_1$useWa=useWaterfall_1.useWaterfall(urlParams),waterfall=_useWaterfall_1$useWa.data;var transaction=waterfall.getTransactionById(urlParams.transactionId);return react_1.default.createElement("div",null,react_1.default.createElement(ApmHeader_1.ApmHeader,null,react_1.default.createElement(eui_1.EuiTitle,{size:"l"},react_1.default.createElement("h1",null,urlParams.transactionName))),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"}),react_1.default.createElement(TransactionCharts_1.TransactionCharts,{hasMLJob:false,charts:transactionDetailsChartsData,urlParams:urlParams,location:location}),react_1.default.createElement(eui_1.EuiHorizontalRule,{size:"full",margin:"l"}),react_1.default.createElement(eui_1.EuiPanel,null,react_1.default.createElement(Distribution_1.TransactionDistribution,{distribution:distributionData,loading:distributionStatus===useFetcher_1.FETCH_STATUS.LOADING||distributionStatus===undefined,urlParams:urlParams})),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"}),transaction&&react_1.default.createElement(Transaction_1.Transaction,{location:location,transaction:transaction,urlParams:urlParams,waterfall:waterfall}))}exports.TransactionDetails=TransactionDetails},4211:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var transaction_groups_1=__webpack_require__(713);var chartSelectors_1=__webpack_require__(1571);var UrlParamsContext_1=__webpack_require__(409);var useFetcher_1=__webpack_require__(248);function useTransactionDetailsCharts(urlParams){var serviceName=urlParams.serviceName,transactionType=urlParams.transactionType,start=urlParams.start,end=urlParams.end,transactionName=urlParams.transactionName;var uiFilters=UrlParamsContext_1.useUiFilters(urlParams);var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(serviceName&&start&&end&&transactionName&&transactionType){return transaction_groups_1.loadTransactionDetailsCharts({serviceName:serviceName,start:start,end:end,transactionName:transactionName,transactionType:transactionType,uiFilters:uiFilters})}},[serviceName,start,end,transactionName,transactionType,uiFilters]),data=_useFetcher_1$useFetc.data,error=_useFetcher_1$useFetc.error,status=_useFetcher_1$useFetc.status;var memoizedData=react_1.useMemo(function(){return chartSelectors_1.getTransactionCharts(urlParams,data)},[data]);return{data:memoizedData,status:status,error:error}}exports.useTransactionDetailsCharts=useTransactionDetailsCharts},4212:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var transaction_groups_1=__webpack_require__(713);var useFetcher_1=__webpack_require__(248);var UrlParamsContext_1=__webpack_require__(409);var INITIAL_DATA={buckets:[],totalHits:0,bucketSize:0,defaultSample:undefined};function useTransactionDistribution(urlParams){var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,transactionType=urlParams.transactionType,transactionId=urlParams.transactionId,traceId=urlParams.traceId,transactionName=urlParams.transactionName;var uiFilters=UrlParamsContext_1.useUiFilters(urlParams);var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(serviceName&&start&&end&&transactionType&&transactionName){return transaction_groups_1.loadTransactionDistribution({serviceName:serviceName,start:start,end:end,transactionType:transactionType,transactionName:transactionName,transactionId:transactionId,traceId:traceId,uiFilters:uiFilters})}},[serviceName,start,end,transactionType,transactionName,transactionId,traceId,uiFilters]),_useFetcher_1$useFetc2=_useFetcher_1$useFetc.data,data=_useFetcher_1$useFetc2===void 0?INITIAL_DATA:_useFetcher_1$useFetc2,status=_useFetcher_1$useFetc.status,error=_useFetcher_1$useFetc.error;return{data:data,status:status,error:error}}exports.useTransactionDistribution=useTransactionDistribution},4213:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var waterfall_helpers_1=__webpack_require__(4214);var traces_1=__webpack_require__(1580);var useFetcher_1=__webpack_require__(248);var INITIAL_DATA={trace:[],errorsPerTransaction:{}};function useWaterfall(urlParams){var traceId=urlParams.traceId,start=urlParams.start,end=urlParams.end,transactionId=urlParams.transactionId;var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(traceId&&start&&end){return traces_1.loadTrace({traceId:traceId,start:start,end:end})}},[traceId,start,end]),_useFetcher_1$useFetc2=_useFetcher_1$useFetc.data,data=_useFetcher_1$useFetc2===void 0?INITIAL_DATA:_useFetcher_1$useFetc2,status=_useFetcher_1$useFetc.status,error=_useFetcher_1$useFetc.error;var waterfall=react_1.useMemo(function(){return waterfall_helpers_1.getWaterfall(data,transactionId)},[data,transactionId]);return{data:waterfall,status:status,error:error}}exports.useWaterfall=useWaterfall},4214:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var lodash_1=__webpack_require__(3);function getTransactionItem(transaction,errorsPerTransaction){return{id:transaction.transaction.id,parentId:transaction.parent&&transaction.parent.id,serviceName:transaction.service.name,name:transaction.transaction.name,duration:transaction.transaction.duration.us,timestamp:transaction.timestamp.us,offset:0,skew:0,docType:"transaction",transaction:transaction,errorCount:errorsPerTransaction[transaction.transaction.id]||0}}function getSpanItem(span){return{id:span.span.id,parentId:span.parent&&span.parent.id,serviceName:span.service.name,name:span.span.name,duration:span.span.duration.us,timestamp:span.timestamp.us,offset:0,skew:0,docType:"span",span:span}}function getClockSkew(item,parentItem){if(!parentItem){return 0}switch(item.docType){case"span":return parentItem.skew;case"transaction":{var parentStart=parentItem.timestamp+parentItem.skew;var offsetStart=parentStart-item.timestamp;if(offsetStart>0){var latency=Math.max(parentItem.duration-item.duration,0)/2;return offsetStart+latency}return 0}}}exports.getClockSkew=getClockSkew;function getOrderedWaterfallItems(childrenByParentId,entryTransactionItem){var visitedWaterfallItemSet=new Set;function getSortedChildren(item,parentItem){if(visitedWaterfallItemSet.has(item)){return[]}visitedWaterfallItemSet.add(item);var children=lodash_1.sortBy(childrenByParentId[item.id]||[],"timestamp");item.childIds=children.map(function(child){return child.id});item.offset=item.timestamp-entryTransactionItem.timestamp;item.skew=getClockSkew(item,parentItem);var deepChildren=lodash_1.flatten(children.map(function(child){return getSortedChildren(child,item)}));return[item].concat(_toConsumableArray(deepChildren))}return getSortedChildren(entryTransactionItem)}exports.getOrderedWaterfallItems=getOrderedWaterfallItems;function getTraceRoot(childrenByParentId){var item=lodash_1.first(childrenByParentId.root);if(item&&item.docType==="transaction"){return item.transaction}}function getServices(items){var serviceNames=items.map(function(item){return item.serviceName});return lodash_1.uniq(serviceNames)}function getServiceColors(services){var assignedColors=[eui_theme_light_json_1.default.euiColorVis1,eui_theme_light_json_1.default.euiColorVis0,eui_theme_light_json_1.default.euiColorVis3,eui_theme_light_json_1.default.euiColorVis2,eui_theme_light_json_1.default.euiColorVis6,eui_theme_light_json_1.default.euiColorVis7,eui_theme_light_json_1.default.euiColorVis5];return lodash_1.zipObject(services,assignedColors)}function getDuration(items){if(items.length===0){return 0}var timestampStart=items[0].timestamp;var timestampEnd=Math.max.apply(Math,_toConsumableArray(items.map(function(item){return item.timestamp+item.duration+item.skew})));return timestampEnd-timestampStart}function createGetTransactionById(itemsById){return function(id){if(!id){return undefined}var item=itemsById[id];if((item!=null?item.docType:undefined)==="transaction"){return item.transaction}}}function getWaterfall(_ref,entryTransactionId){var trace=_ref.trace,errorsPerTransaction=_ref.errorsPerTransaction;if(lodash_1.isEmpty(trace)||!entryTransactionId){return{services:[],duration:0,orderedItems:[],itemsById:{},getTransactionById:function getTransactionById(){return undefined},errorCountByTransactionId:errorsPerTransaction,serviceColors:{}}}var waterfallItems=trace.map(function(traceItem){var docType=traceItem.processor.event;switch(docType){case"span":return getSpanItem(traceItem);case"transaction":return getTransactionItem(traceItem,errorsPerTransaction)}});var childrenByParentId=lodash_1.groupBy(waterfallItems,function(item){return item.parentId?item.parentId:"root"});var entryTransactionItem=waterfallItems.find(function(waterfallItem){return waterfallItem.docType==="transaction"&&waterfallItem.id===entryTransactionId});var itemsById=lodash_1.indexBy(waterfallItems,"id");var orderedItems=entryTransactionItem?getOrderedWaterfallItems(childrenByParentId,entryTransactionItem):[];var traceRoot=getTraceRoot(childrenByParentId);var duration=getDuration(orderedItems);var traceRootDuration=traceRoot&&traceRoot.transaction.duration.us;var services=getServices(orderedItems);var getTransactionById=createGetTransactionById(itemsById);var serviceColors=getServiceColors(services);return{traceRoot:traceRoot,traceRootDuration:traceRootDuration,duration:duration,services:services,orderedItems:orderedItems,itemsById:itemsById,getTransactionById:getTransactionById,errorCountByTransactionId:errorsPerTransaction,serviceColors:serviceColors}}exports.getWaterfall=getWaterfall},4215:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var d3_1=tslib_1.__importDefault(__webpack_require__(27));var react_1=tslib_1.__importStar(__webpack_require__(0));var lodash_1=__webpack_require__(3);var formatters_1=__webpack_require__(299);var Histogram_1=tslib_1.__importDefault(__webpack_require__(1567));var EmptyMessage_1=__webpack_require__(710);var url_helpers_1=__webpack_require__(219);var history_1=__webpack_require__(298);function getFormattedBuckets(buckets,bucketSize){if(!buckets){return[]}return buckets.map(function(_ref){var sample=_ref.sample,count=_ref.count,key=_ref.key;return{sample:sample,x0:key,x:key+bucketSize,y:count,style:{cursor:count>0&&sample?"pointer":"default"}}})}exports.getFormattedBuckets=getFormattedBuckets;var getFormatYShort=function getFormatYShort(transactionType){return function(t){return i18n_1.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.unitShortLabel",{defaultMessage:"{transCount} {transType, select, request {req.} other {trans.}}",values:{transCount:t,transType:transactionType}})}};var getFormatYLong=function getFormatYLong(transactionType){return function(t){return transactionType==="request"?i18n_1.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.requestTypeUnitLongLabel",{defaultMessage:"{transCount, plural, =0 {# request} one {# request} other {# requests}}",values:{transCount:t}}):i18n_1.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.transactionTypeUnitLongLabel",{defaultMessage:"{transCount, plural, =0 {# transaction} one {# transaction} other {# transactions}}",values:{transCount:t}})}};exports.TransactionDistribution=function(props){var distribution=props.distribution,_props$urlParams=props.urlParams,transactionId=_props$urlParams.transactionId,traceId=_props$urlParams.traceId,transactionType=_props$urlParams.transactionType,loading=props.loading;var formatYShort=react_1.useCallback(getFormatYShort(transactionType),[transactionType]);var formatYLong=react_1.useCallback(getFormatYLong(transactionType),[transactionType]);var redirectToDefaultSample=react_1.useCallback(function(){var defaultSample=distribution&&distribution.defaultSample?distribution.defaultSample:{};var parsedQueryParams=url_helpers_1.toQuery(history_1.history.location.search);history_1.history.replace(_objectSpread({},history_1.history.location,{search:url_helpers_1.fromQuery(_objectSpread({},lodash_1.omit(parsedQueryParams,"transactionId","traceId"),defaultSample))}))},[distribution,loading]);react_1.useEffect(function(){if(loading){return}var selectedSampleIsAvailable=distribution?!!distribution.buckets.find(function(bucket){return!!(bucket.sample&&bucket.sample.transactionId===transactionId&&bucket.sample.traceId===traceId)}):false;if(!selectedSampleIsAvailable&&!!distribution){redirectToDefaultSample()}},[distribution,transactionId,traceId,redirectToDefaultSample,loading]);if(!distribution||!distribution.totalHits||!traceId||!transactionId){return react_1.default.createElement(EmptyMessage_1.EmptyMessage,{heading:i18n_1.i18n.translate("xpack.apm.transactionDetails.notFoundLabel",{defaultMessage:"No transactions were found."})})}var buckets=getFormattedBuckets(distribution.buckets,distribution.bucketSize);var xMax=d3_1.default.max(buckets,function(d){return d.x})||0;var timeFormatter=formatters_1.getTimeFormatter(xMax);var unit=formatters_1.timeUnit(xMax);var bucketIndex=buckets.findIndex(function(bucket){return bucket.sample!=null&&bucket.sample.transactionId===transactionId&&bucket.sample.traceId===traceId});return react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("h5",null,i18n_1.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChartTitle",{defaultMessage:"Transactions duration distribution"})," ",react_1.default.createElement(eui_1.EuiIconTip,{title:i18n_1.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChartTooltip.samplingLabel",{defaultMessage:"Sampling"}),content:i18n_1.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChartTooltip.samplingDescription",{defaultMessage:"Each bucket will show a sample transaction. If there's no sample available, it's most likely because of the sampling limit set in the agent configuration."}),position:"top"}))),react_1.default.createElement(Histogram_1.default,{buckets:buckets,bucketSize:distribution.bucketSize,bucketIndex:bucketIndex,onClick:function onClick(bucket){if(bucket.sample&&bucket.y>0){history_1.history.push(_objectSpread({},history_1.history.location,{search:url_helpers_1.fromQuery(_objectSpread({},url_helpers_1.toQuery(history_1.history.location.search),{transactionId:bucket.sample.transactionId,traceId:bucket.sample.traceId}))}))}},formatX:timeFormatter,formatYShort:formatYShort,formatYLong:formatYLong,verticalLineHover:function verticalLineHover(bucket){return bucket.y>0&&!bucket.sample},backgroundHover:function backgroundHover(bucket){return bucket.y>0&&bucket.sample},tooltipHeader:function tooltipHeader(bucket){return"".concat(timeFormatter(bucket.x0,{withUnit:false})," - ").concat(timeFormatter(bucket.x,{withUnit:false})," ").concat(unit)},tooltipFooter:function tooltipFooter(bucket){return!bucket.sample&&i18n_1.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.noSampleTooltip",{defaultMessage:"No sample available for this bucket"})}}))}},4216:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var TransactionLink_1=__webpack_require__(979);var TransactionActionMenu_1=__webpack_require__(1581);var StickyTransactionProperties_1=__webpack_require__(1582);var TransactionTabs_1=__webpack_require__(4219);function MaybeViewTraceLink(_ref){var transaction=_ref.transaction,waterfall=_ref.waterfall;var viewFullTraceButtonLabel=i18n_1.i18n.translate("xpack.apm.transactionDetails.viewFullTraceButtonLabel",{defaultMessage:"View full trace"});if(!waterfall.traceRoot){return react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiToolTip,{content:i18n_1.i18n.translate("xpack.apm.transactionDetails.noTraceParentButtonTooltip",{defaultMessage:"The trace parent cannot be found"})},react_1.default.createElement(eui_1.EuiButton,{iconType:"apmTrace",disabled:true},viewFullTraceButtonLabel)))}var isRoot=transaction.transaction.id===waterfall.traceRoot.transaction.id;if(isRoot){return react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiToolTip,{content:i18n_1.i18n.translate("xpack.apm.transactionDetails.viewingFullTraceButtonTooltip",{defaultMessage:"Currently viewing the full trace"})},react_1.default.createElement(eui_1.EuiButton,{iconType:"apmTrace",disabled:true},viewFullTraceButtonLabel)))}else{return react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(TransactionLink_1.TransactionLink,{transaction:waterfall.traceRoot},react_1.default.createElement(eui_1.EuiButton,{iconType:"apmTrace"},viewFullTraceButtonLabel)))}}exports.Transaction=function(_ref2){var transaction=_ref2.transaction,urlParams=_ref2.urlParams,location=_ref2.location,waterfall=_ref2.waterfall;return react_1.default.createElement(eui_1.EuiPanel,{paddingSize:"m"},react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"spaceBetween"},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("h5",null,i18n_1.i18n.translate("xpack.apm.transactionDetails.transactionSampleTitle",{defaultMessage:"Transaction sample"})))),react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"flexEnd"},react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(TransactionActionMenu_1.TransactionActionMenu,{transaction:transaction})),react_1.default.createElement(MaybeViewTraceLink,{transaction:transaction,waterfall:waterfall})))),react_1.default.createElement(StickyTransactionProperties_1.StickyTransactionProperties,{errorCount:waterfall.errorCountByTransactionId[transaction.transaction.id],transaction:transaction,totalDuration:waterfall.traceRootDuration}),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(TransactionTabs_1.TransactionTabs,{transaction:transaction,location:location,urlParams:urlParams,waterfall:waterfall}))}},4217:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var elasticsearch_fieldnames_1=__webpack_require__(320);var DiscoverLink_1=__webpack_require__(972);function getDiscoverQuery(transaction){var transactionId=transaction.transaction.id;var traceId=transaction.trace.id;var query="".concat(elasticsearch_fieldnames_1.PROCESSOR_EVENT,':"transaction" AND ').concat(elasticsearch_fieldnames_1.TRANSACTION_ID,':"').concat(transactionId,'"');if(traceId){query+=" AND ".concat(elasticsearch_fieldnames_1.TRACE_ID,':"').concat(traceId,'"')}return{_a:{interval:"auto",query:{language:"lucene",query:query}}}}exports.getDiscoverQuery=getDiscoverQuery;exports.DiscoverTransactionLink=function(_ref){var transaction=_ref.transaction,children=_ref.children;return react_1.default.createElement(DiscoverLink_1.DiscoverLink,{query:getDiscoverQuery(transaction),children:children})}},4218:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var lodash_1=__webpack_require__(3);var react_1=tslib_1.__importDefault(__webpack_require__(0));var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var url_1=tslib_1.__importDefault(__webpack_require__(31));var url_helpers_1=__webpack_require__(219);function InfraLink(_ref){var path=_ref.path,_ref$query=_ref.query,query=_ref$query===void 0?{}:_ref$query,rest=_objectWithoutProperties(_ref,["path","query"]);var nextSearch=url_helpers_1.fromQuery(query);var href=url_1.default.format({pathname:chrome_1.default.addBasePath("/app/infra"),hash:lodash_1.compact([path,nextSearch]).join("?")});return react_1.default.createElement(eui_1.EuiLink,Object.assign({},rest,{href:href}))}exports.InfraLink=InfraLink},4219:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var url_helpers_1=__webpack_require__(219);var history_1=__webpack_require__(298);var TransactionMetadata_1=__webpack_require__(1584);var WaterfallContainer_1=__webpack_require__(4221);var timelineTab={key:"timeline",label:i18n_1.i18n.translate("xpack.apm.propertiesTable.tabs.timelineLabel",{defaultMessage:"Timeline"})};var metadataTab={key:"metadata",label:i18n_1.i18n.translate("xpack.apm.propertiesTable.tabs.metadataLabel",{defaultMessage:"Metadata"})};function TransactionTabs(_ref){var location=_ref.location,transaction=_ref.transaction,urlParams=_ref.urlParams,waterfall=_ref.waterfall;var tabs=[timelineTab,metadataTab];var currentTab=urlParams.detailTab===metadataTab.key?metadataTab:timelineTab;return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiTabs,null,tabs.map(function(_ref2){var key=_ref2.key,label=_ref2.label;return react_1.default.createElement(eui_1.EuiTab,{onClick:function onClick(){history_1.history.replace(_objectSpread({},location,{search:url_helpers_1.fromQuery(_objectSpread({},url_helpers_1.toQuery(location.search),{detailTab:key}))}))},isSelected:currentTab.key===key,key:key},label)})),react_1.default.createElement(eui_1.EuiSpacer,null),currentTab.key===timelineTab.key?react_1.default.createElement(WaterfallContainer_1.WaterfallContainer,{transaction:transaction,location:location,urlParams:urlParams,waterfall:waterfall}):react_1.default.createElement(TransactionMetadata_1.TransactionMetadata,{transaction:transaction}))}exports.TransactionTabs=TransactionTabs},4220:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var SECTION_LABELS=tslib_1.__importStar(__webpack_require__(1562));exports.TRANSACTION_METADATA_SECTIONS=[{key:"labels",label:SECTION_LABELS.LABELS,required:true},{key:"http",label:SECTION_LABELS.HTTP},{key:"host",label:SECTION_LABELS.HOST},{key:"container",label:SECTION_LABELS.CONTAINER},{key:"service",label:SECTION_LABELS.SERVICE},{key:"process",label:SECTION_LABELS.PROCESS},{key:"agent",label:SECTION_LABELS.AGENT},{key:"url",label:SECTION_LABELS.URL},{key:"user",label:SECTION_LABELS.USER,required:true},{key:"transaction.custom",label:SECTION_LABELS.CUSTOM}]},4221:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var get_agent_marks_1=__webpack_require__(4222);var ServiceLegends_1=__webpack_require__(4223);var Waterfall_1=__webpack_require__(4224);function WaterfallContainer(_ref){var location=_ref.location,urlParams=_ref.urlParams,transaction=_ref.transaction,waterfall=_ref.waterfall;var agentMarks=get_agent_marks_1.getAgentMarks(transaction);if(!waterfall){return null}return react_1.default.createElement("div",null,react_1.default.createElement(ServiceLegends_1.ServiceLegends,{serviceColors:waterfall.serviceColors}),react_1.default.createElement(Waterfall_1.Waterfall,{agentMarks:agentMarks,location:location,serviceColors:waterfall.serviceColors,urlParams:urlParams,waterfall:waterfall}))}exports.WaterfallContainer=WaterfallContainer},4222:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__webpack_require__(3);function getAgentMarks(transaction){if(!(transaction.transaction.marks&&transaction.transaction.marks.agent)){return[]}return lodash_1.sortBy(Object.entries(transaction.transaction.marks.agent).map(function(_ref){var _ref2=_slicedToArray(_ref,2),name=_ref2[0],ms=_ref2[1];return{name:name,us:ms*1e3}}),"us")}exports.getAgentMarks=getAgentMarks},4223:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _templateObject(){var data=_taggedTemplateLiteral(["\n  display: flex;\n\n  > * {\n    margin-right: ",";\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var variables_1=__webpack_require__(53);var Legend_1=tslib_1.__importDefault(__webpack_require__(712));var Legends=styled_components_1.default.div(_templateObject(),variables_1.px(variables_1.unit));function ServiceLegends(_ref){var serviceColors=_ref.serviceColors;return react_1.default.createElement(Legends,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xxxs"},react_1.default.createElement("span",null,i18n_1.i18n.translate("xpack.apm.transactionDetails.servicesTitle",{defaultMessage:"Services"}))),Object.entries(serviceColors).map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),label=_ref3[0],color=_ref3[1];return react_1.default.createElement(Legend_1.default,{key:color,color:color,text:label})}))}exports.ServiceLegends=ServiceLegends},4224:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _templateObject(){var data=_taggedTemplateLiteral(["\n  transition: 0.1s padding ease;\n  position: relative;\n  overflow: hidden;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importStar(__webpack_require__(0));var react_sticky_1=__webpack_require__(446);var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var Timeline_1=tslib_1.__importDefault(__webpack_require__(4225));var url_helpers_1=__webpack_require__(219);var history_1=__webpack_require__(298);var SpanFlyout_1=__webpack_require__(4231);var TransactionFlyout_1=__webpack_require__(4238);var WaterfallItem_1=__webpack_require__(4240);var Container=styled_components_1.default.div(_templateObject());var TIMELINE_MARGINS={top:40,left:50,right:50,bottom:0};var Waterfall=function(_react_1$Component){_inherits(Waterfall,_react_1$Component);function Waterfall(){var _this;_classCallCheck(this,Waterfall);_this=_possibleConstructorReturn(this,_getPrototypeOf(Waterfall).apply(this,arguments));_this.onOpenFlyout=function(item){_this.setQueryParams({flyoutDetailTab:undefined,waterfallItemId:String(item.id)})};_this.onCloseFlyout=function(){_this.setQueryParams({flyoutDetailTab:undefined,waterfallItemId:undefined})};_this.renderWaterfallItem=function(item){var _this$props=_this.props,serviceColors=_this$props.serviceColors,waterfall=_this$props.waterfall,urlParams=_this$props.urlParams;var errorCount=item.docType==="transaction"?waterfall.errorCountByTransactionId[item.transaction.transaction.id]:0;return react_1.default.createElement(WaterfallItem_1.WaterfallItem,{key:item.id,timelineMargins:TIMELINE_MARGINS,color:serviceColors[item.serviceName],item:item,totalDuration:waterfall.duration,isSelected:item.id===urlParams.waterfallItemId,errorCount:errorCount,onClick:function onClick(){return _this.onOpenFlyout(item)}})};_this.getFlyOut=function(){var _this$props2=_this.props,waterfall=_this$props2.waterfall,urlParams=_this$props2.urlParams;var currentItem=urlParams.waterfallItemId&&waterfall.itemsById[urlParams.waterfallItemId];if(!currentItem){return null}switch(currentItem.docType){case"span":var parentTransaction=waterfall.getTransactionById(currentItem.parentId);return react_1.default.createElement(SpanFlyout_1.SpanFlyout,{totalDuration:waterfall.duration,span:currentItem.span,parentTransaction:parentTransaction,onClose:_this.onCloseFlyout});case"transaction":return react_1.default.createElement(TransactionFlyout_1.TransactionFlyout,{transaction:currentItem.transaction,onClose:_this.onCloseFlyout,traceRootDuration:waterfall.traceRootDuration,errorCount:currentItem.errorCount});default:return null}};return _this}_createClass(Waterfall,[{key:"render",value:function render(){var waterfall=this.props.waterfall;var itemContainerHeight=58;var waterfallHeight=itemContainerHeight*waterfall.orderedItems.length;return react_1.default.createElement(Container,null,react_1.default.createElement(react_sticky_1.StickyContainer,null,react_1.default.createElement(Timeline_1.default,{agentMarks:this.props.agentMarks,duration:waterfall.duration,traceRootDuration:waterfall.traceRootDuration,height:waterfallHeight,margins:TIMELINE_MARGINS}),react_1.default.createElement("div",{style:{paddingTop:TIMELINE_MARGINS.top}},waterfall.orderedItems.map(this.renderWaterfallItem))),this.getFlyOut())}},{key:"setQueryParams",value:function setQueryParams(params){var location=this.props.location;history_1.history.replace(_objectSpread({},location,{search:url_helpers_1.fromQuery(_objectSpread({},url_helpers_1.toQuery(location.search),params))}))}}]);return Waterfall}(react_1.Component);exports.Waterfall=Waterfall},4225:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(6));var _reactVis=__webpack_require__(343);var _plotUtils=__webpack_require__(4226);var _TimelineAxis=_interopRequireDefault(__webpack_require__(4227));var _VerticalLines=_interopRequireDefault(__webpack_require__(4230));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Timeline=function(_PureComponent){_inherits(Timeline,_PureComponent);function Timeline(){_classCallCheck(this,Timeline);return _possibleConstructorReturn(this,_getPrototypeOf(Timeline).apply(this,arguments))}_createClass(Timeline,[{key:"render",value:function render(){var _this$props=this.props,width=_this$props.width,duration=_this$props.duration,agentMarks=_this$props.agentMarks,traceRootDuration=_this$props.traceRootDuration,height=_this$props.height,margins=_this$props.margins;if(duration==null||!width){return null}var plotValues=(0,_plotUtils.getPlotValues)({width:width,duration:duration,height:height,margins:margins});return _react.default.createElement("div",null,_react.default.createElement(_TimelineAxis.default,{plotValues:plotValues,agentMarks:agentMarks,traceRootDuration:traceRootDuration}),_react.default.createElement(_VerticalLines.default,{plotValues:plotValues,agentMarks:agentMarks,traceRootDuration:traceRootDuration}))}}]);return Timeline}(_react.PureComponent);Timeline.propTypes={agentMarks:_propTypes.default.array,duration:_propTypes.default.number,height:_propTypes.default.number.isRequired,header:_propTypes.default.node,margins:_propTypes.default.object.isRequired,width:_propTypes.default.number};var _default=(0,_reactVis.makeWidthFlexible)(Timeline);exports.default=_default;module.exports=exports.default},4226:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPlotValues=getPlotValues;var _d3Scale=__webpack_require__(445);function getPlotValues(_ref){var width=_ref.width,duration=_ref.duration,height=_ref.height,margins=_ref.margins;var xMin=0;var xMax=duration;var xScale=(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([margins.left,width-margins.right]);return{height:height,margins:margins,tickValues:xScale.ticks(7),width:width,xDomain:xScale.domain(),xMax:xMax,xScale:xScale}}},4227:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(6));var _lodash=__webpack_require__(3);var _reactSticky=__webpack_require__(446);var _reactVis=__webpack_require__(343);var _LastTickValue=_interopRequireDefault(__webpack_require__(4228));var _AgentMarker=_interopRequireDefault(__webpack_require__(4229));var _variables=__webpack_require__(53);var _formatters=__webpack_require__(299);var _eui_theme_light=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getXAxisTickValues=function getXAxisTickValues(tickValues,traceRootDuration){if(traceRootDuration==null){return tickValues}var padding=(tickValues[1]-tickValues[0])/2;var lowerBound=traceRootDuration-padding;var upperBound=traceRootDuration+padding;return tickValues.filter(function(value){var isInRange=(0,_lodash.inRange)(value,lowerBound,upperBound);return!isInRange&&value!==traceRootDuration})};function TimelineAxis(_ref){var plotValues=_ref.plotValues,agentMarks=_ref.agentMarks,traceRootDuration=_ref.traceRootDuration;var margins=plotValues.margins,tickValues=plotValues.tickValues,width=plotValues.width,xDomain=plotValues.xDomain,xMax=plotValues.xMax,xScale=plotValues.xScale;var tickFormat=(0,_formatters.getTimeFormatter)(xMax);var xAxisTickValues=getXAxisTickValues(tickValues,traceRootDuration);return _react.default.createElement(_reactSticky.Sticky,{disableCompensation:true},function(_ref2){var style=_ref2.style;return _react.default.createElement("div",{style:_objectSpread({position:"absolute",backgroundColor:_eui_theme_light.default.euiColorEmptyShade,borderBottom:"1px solid ".concat(_eui_theme_light.default.euiColorMediumShade),height:(0,_variables.px)(margins.top),zIndex:2,width:"100%"},style)},_react.default.createElement(_reactVis.XYPlot,{dontCheckIfEmpty:true,width:width,height:margins.top,margin:{top:margins.top,left:margins.left,right:margins.right},xDomain:xDomain},_react.default.createElement(_reactVis.XAxis,{hideLine:true,orientation:"top",tickSize:0,tickValues:xAxisTickValues,tickFormat:tickFormat,tickPadding:20,style:{text:{fill:_eui_theme_light.default.euiColorMediumShade}}}),traceRootDuration>0&&_react.default.createElement(_LastTickValue.default,{x:xScale(traceRootDuration),value:tickFormat(traceRootDuration),marginTop:28}),agentMarks.map(function(agentMark){return _react.default.createElement(_AgentMarker.default,{key:agentMark.name,agentMark:agentMark,x:xScale(agentMark.us)})})))})}TimelineAxis.propTypes={header:_propTypes.default.node,plotValues:_propTypes.default.object.isRequired,agentMarks:_propTypes.default.array};TimelineAxis.defaultProps={agentMarks:[]};var _default=TimelineAxis;exports.default=_default;module.exports=exports.default},4228:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=LastTickValue;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LastTickValue(_ref){var x=_ref.x,marginTop=_ref.marginTop,value=_ref.value;return _react.default.createElement("g",{transform:"translate(".concat(x,", ").concat(marginTop,")")},_react.default.createElement("text",{textAnchor:"middle",dy:"0",transform:"translate(0, -8)"},value))}LastTickValue.requiresSVG=true;module.exports=exports.default},4229:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=AgentMarker;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(6));var _eui=__webpack_require__(1);var _Legend=_interopRequireDefault(__webpack_require__(712));var _variables=__webpack_require__(53);var _styledComponents=_interopRequireDefault(__webpack_require__(13));var _formatters=__webpack_require__(299);var _eui_theme_light=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  color: ",";\n  padding-top: ",";\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  border-bottom: 1px solid ",";\n  padding-bottom: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var NameContainer=_styledComponents.default.div(_templateObject(),_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.units.half));var TimeContainer=_styledComponents.default.div(_templateObject2(),_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.units.half));function AgentMarker(_ref){var agentMark=_ref.agentMark,x=_ref.x;var legendWidth=11;return _react.default.createElement("div",{style:{position:"absolute",left:(0,_variables.px)(x-legendWidth/2),bottom:0}},_react.default.createElement(_eui.EuiToolTip,{id:agentMark.name,position:"top",content:_react.default.createElement("div",null,_react.default.createElement(NameContainer,null,agentMark.name),_react.default.createElement(TimeContainer,null,(0,_formatters.asTime)(agentMark.us)))},_react.default.createElement(_Legend.default,{clickable:true,color:_eui_theme_light.default.euiColorMediumShade})))}AgentMarker.propTypes={agentMark:_propTypes.default.object.isRequired,x:_propTypes.default.number.isRequired};module.exports=exports.default},4230:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(6));var _reactVis=__webpack_require__(343);var _eui_theme_light=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var VerticalLines=function(_PureComponent){_inherits(VerticalLines,_PureComponent);function VerticalLines(){_classCallCheck(this,VerticalLines);return _possibleConstructorReturn(this,_getPrototypeOf(VerticalLines).apply(this,arguments))}_createClass(VerticalLines,[{key:"render",value:function render(){var traceRootDuration=this.props.traceRootDuration;var _this$props$plotValue=this.props.plotValues,width=_this$props$plotValue.width,height=_this$props$plotValue.height,margins=_this$props$plotValue.margins,xDomain=_this$props$plotValue.xDomain,tickValues=_this$props$plotValue.tickValues;var agentMarkTimes=this.props.agentMarks.map(function(_ref){var us=_ref.us;return us});return _react.default.createElement("div",{style:{position:"absolute",top:0,left:0}},_react.default.createElement(_reactVis.XYPlot,{dontCheckIfEmpty:true,width:width,height:height+margins.top,margin:margins,xDomain:xDomain},_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:tickValues,style:{stroke:_eui_theme_light.default.euiColorLightestShade}}),_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:agentMarkTimes,style:{stroke:_eui_theme_light.default.euiColorMediumShade}}),traceRootDuration>0&&_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:[traceRootDuration],style:{stroke:_eui_theme_light.default.gray3euiColorMediumShade}})))}}]);return VerticalLines}(_react.PureComponent);VerticalLines.propTypes={plotValues:_propTypes.default.object.isRequired,agentMarks:_propTypes.default.array};VerticalLines.defaultProps={agentMarks:[]};var _default=VerticalLines;exports.default=_default;module.exports=exports.default},4231:function(module,exports,__webpack_require__){"use strict";function _templateObject(){var data=_taggedTemplateLiteral(["\n  font-weight: bold;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var lodash_1=__webpack_require__(3);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var DiscoverSpanLink_1=__webpack_require__(4232);var Stacktrace_1=__webpack_require__(1563);var FlyoutTopLevelProperties_1=__webpack_require__(1585);var ResponsiveFlyout_1=__webpack_require__(1586);var DatabaseContext_1=__webpack_require__(4233);var HttpContext_1=__webpack_require__(4236);var StickySpanProperties_1=__webpack_require__(4237);var TagName=styled_components_1.default.div(_templateObject());function SpanFlyout(_ref){var span=_ref.span,parentTransaction=_ref.parentTransaction,totalDuration=_ref.totalDuration,onClose=_ref.onClose;if(!span){return null}var stackframes=span.span.stacktrace;var codeLanguage=parentTransaction!=null&&parentTransaction.service!=null&&parentTransaction.service.language!=null?parentTransaction.service.language.name:undefined;var dbContext=span!=null&&span.span!=null?span.span.db:undefined;var httpContext=span!=null&&span.span!=null?span.span.http:undefined;var spanLabels=span.labels;var labels=lodash_1.keys(spanLabels).map(function(key){return{key:key,value:lodash_1.get(spanLabels,key)}});return react_1.default.createElement(eui_1.EuiPortal,null,react_1.default.createElement(ResponsiveFlyout_1.ResponsiveFlyout,{onClose:onClose,size:"m",ownFocus:true},react_1.default.createElement(eui_1.EuiFlyoutHeader,{hasBorder:true},react_1.default.createElement(eui_1.EuiFlexGroup,null,react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiTitle,null,react_1.default.createElement("h2",null,i18n_1.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanDetailsTitle",{defaultMessage:"Span details"})))),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(DiscoverSpanLink_1.DiscoverSpanLink,{span:span},react_1.default.createElement(eui_1.EuiButtonEmpty,{iconType:"discoverApp"},i18n_1.i18n.translate("xpack.apm.transactionDetails.spanFlyout.viewSpanInDiscoverButtonLabel",{defaultMessage:"View span in Discover"})))))),react_1.default.createElement(eui_1.EuiFlyoutBody,null,react_1.default.createElement(FlyoutTopLevelProperties_1.FlyoutTopLevelProperties,{transaction:parentTransaction}),react_1.default.createElement(eui_1.EuiHorizontalRule,null),react_1.default.createElement(StickySpanProperties_1.StickySpanProperties,{span:span,totalDuration:totalDuration}),react_1.default.createElement(eui_1.EuiHorizontalRule,null),react_1.default.createElement(HttpContext_1.HttpContext,{httpContext:httpContext}),react_1.default.createElement(DatabaseContext_1.DatabaseContext,{dbContext:dbContext}),react_1.default.createElement(eui_1.EuiTabbedContent,{tabs:[{id:"stack-trace",name:i18n_1.i18n.translate("xpack.apm.transactionDetails.spanFlyout.stackTraceTabLabel",{defaultMessage:"Stack Trace"}),content:react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(eui_1.EuiSpacer,{size:"l"}),react_1.default.createElement(Stacktrace_1.Stacktrace,{stackframes:stackframes,codeLanguage:codeLanguage}))},{id:"labels",name:i18n_1.i18n.translate("xpack.apm.propertiesTable.tabs.labelsLabel",{defaultMessage:"Labels"}),content:react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(eui_1.EuiBasicTable,{columns:[{name:"",field:"key",render:function render(key){return react_1.default.createElement(TagName,null,key)}},{name:"",field:"value"}],items:labels}))}]}))))}exports.SpanFlyout=SpanFlyout},4232:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var elasticsearch_fieldnames_1=__webpack_require__(320);var DiscoverLink_1=__webpack_require__(972);function getDiscoverQuery(span){var query="".concat(elasticsearch_fieldnames_1.SPAN_ID,':"').concat(span.span.id,'"');return{_a:{interval:"auto",query:{language:"lucene",query:query}}}}exports.DiscoverSpanLink=function(_ref){var span=_ref.span,children=_ref.children;return react_1.default.createElement(DiscoverLink_1.DiscoverLink,{query:getDiscoverQuery(span),children:children})}},4233:function(module,exports,__webpack_require__){"use strict";function _templateObject(){var data=_taggedTemplateLiteral(["\n  padding: "," ",";\n  background: ","\n  border-radius: ",";\n  border: 1px solid ",";\n  font-family: ",";\n  font-size: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var i18n_1=__webpack_require__(4);var polished_1=__webpack_require__(232);var react_1=tslib_1.__importStar(__webpack_require__(0));var sql_1=tslib_1.__importDefault(__webpack_require__(4234));var light_1=tslib_1.__importStar(__webpack_require__(975));var styles_1=__webpack_require__(1565);var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var variables_1=__webpack_require__(53);var TruncateHeightSection_1=__webpack_require__(4235);light_1.registerLanguage("sql",sql_1.default);var DatabaseStatement=styled_components_1.default.div(_templateObject(),variables_1.px(variables_1.units.half),variables_1.px(variables_1.unit),polished_1.tint(.1,eui_theme_light_json_1.default.euiColorWarning),variables_1.borderRadius,eui_theme_light_json_1.default.euiColorLightShade,variables_1.fontFamilyCode,variables_1.fontSize);var dbSyntaxLineHeight=variables_1.unit*1.5;function DatabaseContext(_ref){var dbContext=_ref.dbContext;if(!dbContext||!dbContext.statement){return null}if(dbContext.type!=="sql"){return react_1.default.createElement(DatabaseStatement,null,dbContext.statement)}return react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("h3",null,i18n_1.i18n.translate("xpack.apm.transactionDetails.spanFlyout.databaseStatementTitle",{defaultMessage:"Database statement"}))),react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}),react_1.default.createElement(DatabaseStatement,null,react_1.default.createElement(TruncateHeightSection_1.TruncateHeightSection,{previewHeight:10*dbSyntaxLineHeight},react_1.default.createElement(light_1.default,{language:"sql",style:styles_1.xcode,customStyle:{color:null,background:null,padding:null,lineHeight:variables_1.px(dbSyntaxLineHeight),whiteSpace:"pre-wrap",overflowX:"scroll"}},dbContext.statement))),react_1.default.createElement(eui_1.EuiSpacer,{size:"l"}))}exports.DatabaseContext=DatabaseContext},4234:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3963)},4235:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _templateObject(){var data=_taggedTemplateLiteral(["\n  margin-top: ",";\n  user-select: none;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var variables_1=__webpack_require__(53);var Icons_1=__webpack_require__(974);var ToggleButtonContainer=styled_components_1.default.div(_templateObject(),variables_1.px(variables_1.units.half));exports.TruncateHeightSection=function(_ref){var children=_ref.children,previewHeight=_ref.previewHeight;var contentContainerEl=react_1.useRef(null);var _react_1$useState=react_1.useState(true),_react_1$useState2=_slicedToArray(_react_1$useState,2),showToggle=_react_1$useState2[0],setShowToggle=_react_1$useState2[1];var _react_1$useState3=react_1.useState(false),_react_1$useState4=_slicedToArray(_react_1$useState3,2),isOpen=_react_1$useState4[0],setIsOpen=_react_1$useState4[1];react_1.useEffect(function(){if(contentContainerEl.current){var shouldShow=contentContainerEl.current.scrollHeight>previewHeight;setShowToggle(shouldShow)}},[children,previewHeight]);return react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement("div",{ref:contentContainerEl,style:{overflow:"hidden",maxHeight:isOpen?"initial":variables_1.px(previewHeight)}},children),showToggle?react_1.default.createElement(ToggleButtonContainer,null,react_1.default.createElement(eui_1.EuiLink,{onClick:function onClick(){setIsOpen(!isOpen)}},react_1.default.createElement(Icons_1.Ellipsis,{horizontal:!isOpen})," ",isOpen?i18n_1.i18n.translate("xpack.apm.toggleHeight.showMoreButtonLabel",{defaultMessage:"Show more lines"}):i18n_1.i18n.translate("xpack.apm.toggleHeight.showLessButtonLabel",{defaultMessage:"Show fewer lines"}))):null)}},4236:function(module,exports,__webpack_require__){"use strict";function _templateObject(){var data=_taggedTemplateLiteral(["\n  padding: "," ",";\n  background: ",";\n  border-radius: ",";\n  border: 1px solid ",";\n  font-family: ",";\n  font-size: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var eui_1=__webpack_require__(1);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var variables_1=__webpack_require__(53);var ContextUrl=styled_components_1.default.div(_templateObject(),variables_1.px(variables_1.units.half),variables_1.px(variables_1.unit),eui_theme_light_json_1.default.euiColorLightestShade,variables_1.borderRadius,eui_theme_light_json_1.default.euiColorLightShade,variables_1.fontFamilyCode,variables_1.fontSize);function HttpContext(_ref){var httpContext=_ref.httpContext;var url=httpContext!=null&&httpContext.url!=null?httpContext.url.original:undefined;if(!url){return null}return react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("h3",null,"HTTP URL")),react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}),react_1.default.createElement(ContextUrl,null,url),react_1.default.createElement(eui_1.EuiSpacer,{size:"l"}))}exports.HttpContext=HttpContext},4237:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var elasticsearch_fieldnames_1=__webpack_require__(320);var i18n_2=__webpack_require__(342);var formatters_1=__webpack_require__(299);var StickyProperties_1=__webpack_require__(711);function formatType(type){switch(type){case"db":return"DB";case"hard-navigation":return i18n_1.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanType.navigationTimingLabel",{defaultMessage:"Navigation timing"});default:return type}}function formatSubtype(subtype){switch(subtype){case"mysql":return"MySQL";default:return subtype}}function getSpanTypes(span){var _span$span=span.span,type=_span$span.type,subtype=_span$span.subtype,action=_span$span.action;var _type$split=type.split("."),_type$split2=_slicedToArray(_type$split,3),primaryType=_type$split2[0],subtypeFromType=_type$split2[1],actionFromType=_type$split2[2];return{spanType:formatType(primaryType),spanSubtype:formatSubtype(subtype||subtypeFromType),spanAction:action||actionFromType}}function StickySpanProperties(_ref){var span=_ref.span,totalDuration=_ref.totalDuration;if(!totalDuration){return null}var spanName=span.span.name;var spanDuration=span.span.duration.us;var _getSpanTypes=getSpanTypes(span),spanType=_getSpanTypes.spanType,spanSubtype=_getSpanTypes.spanSubtype,spanAction=_getSpanTypes.spanAction;var stickyProperties=[{label:i18n_1.i18n.translate("xpack.apm.transactionDetails.spanFlyout.nameLabel",{defaultMessage:"Name"}),fieldName:elasticsearch_fieldnames_1.SPAN_NAME,val:spanName||i18n_2.NOT_AVAILABLE_LABEL,truncated:true,width:"50%"},{fieldName:elasticsearch_fieldnames_1.SPAN_DURATION,label:i18n_1.i18n.translate("xpack.apm.transactionDetails.spanFlyout.durationLabel",{defaultMessage:"Duration"}),val:formatters_1.asMillis(spanDuration),width:"50%"},{label:i18n_1.i18n.translate("xpack.apm.transactionDetails.spanFlyout.percentOfTransactionLabel",{defaultMessage:"% of transaction"}),val:formatters_1.asPercent(spanDuration,totalDuration),width:"50%"},{fieldName:elasticsearch_fieldnames_1.SPAN_TYPE,label:i18n_1.i18n.translate("xpack.apm.transactionDetails.spanFlyout.typeLabel",{defaultMessage:"Type"}),val:spanType,truncated:true,width:"15%"}];if(spanSubtype){stickyProperties.push({fieldName:elasticsearch_fieldnames_1.SPAN_SUBTYPE,label:i18n_1.i18n.translate("xpack.apm.transactionDetails.spanFlyout.subtypeLabel",{defaultMessage:"Subtype"}),val:spanSubtype,truncated:true,width:"15%"})}if(spanAction){stickyProperties.push({fieldName:elasticsearch_fieldnames_1.SPAN_ACTION,label:i18n_1.i18n.translate("xpack.apm.transactionDetails.spanFlyout.actionLabel",{defaultMessage:"Action"}),val:spanAction,truncated:true,width:"15%"})}return react_1.default.createElement(StickyProperties_1.StickyProperties,{stickyProperties:stickyProperties})}exports.StickySpanProperties=StickySpanProperties},4238:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var TransactionActionMenu_1=__webpack_require__(1581);var StickyTransactionProperties_1=__webpack_require__(1582);var FlyoutTopLevelProperties_1=__webpack_require__(1585);var ResponsiveFlyout_1=__webpack_require__(1586);var TransactionMetadata_1=__webpack_require__(1584);var DroppedSpansWarning_1=__webpack_require__(4239);function TransactionPropertiesTable(_ref){var transaction=_ref.transaction;return react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiTitle,{size:"s"},react_1.default.createElement("h4",null,"Metadata")),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(TransactionMetadata_1.TransactionMetadata,{transaction:transaction}))}function TransactionFlyout(_ref2){var transactionDoc=_ref2.transaction,onClose=_ref2.onClose,errorCount=_ref2.errorCount,traceRootDuration=_ref2.traceRootDuration;if(!transactionDoc){return null}return react_1.default.createElement(eui_1.EuiPortal,null,react_1.default.createElement(ResponsiveFlyout_1.ResponsiveFlyout,{onClose:onClose,ownFocus:true,maxWidth:false},react_1.default.createElement(eui_1.EuiFlyoutHeader,{hasBorder:true},react_1.default.createElement(eui_1.EuiFlexGroup,null,react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiTitle,null,react_1.default.createElement("h4",null,i18n_1.i18n.translate("xpack.apm.transactionDetails.transFlyout.transactionDetailsTitle",{defaultMessage:"Transaction details"})))),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(TransactionActionMenu_1.TransactionActionMenu,{transaction:transactionDoc})))),react_1.default.createElement(eui_1.EuiFlyoutBody,null,react_1.default.createElement(FlyoutTopLevelProperties_1.FlyoutTopLevelProperties,{transaction:transactionDoc}),react_1.default.createElement(eui_1.EuiHorizontalRule,null),react_1.default.createElement(StickyTransactionProperties_1.StickyTransactionProperties,{errorCount:errorCount,transaction:transactionDoc,totalDuration:traceRootDuration}),react_1.default.createElement(eui_1.EuiHorizontalRule,null),react_1.default.createElement(DroppedSpansWarning_1.DroppedSpansWarning,{transactionDoc:transactionDoc}),react_1.default.createElement(TransactionPropertiesTable,{transaction:transactionDoc}))))}exports.TransactionFlyout=TransactionFlyout},4239:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var ElasticDocsLink_1=__webpack_require__(973);function DroppedSpansWarning(_ref){var transactionDoc=_ref.transactionDoc;var dropped=transactionDoc!=null&&transactionDoc.transaction!=null&&transactionDoc.transaction.span_count!=null?transactionDoc.transaction.span_count.dropped:undefined;if(!dropped){return null}return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiCallOut,{size:"s"},i18n_1.i18n.translate("xpack.apm.transactionDetails.transFlyout.callout.agentDroppedSpansMessage",{defaultMessage:"The APM agent that reported this transaction dropped {dropped} spans or more based on its configuration.",values:{dropped:dropped}})," ",react_1.default.createElement(ElasticDocsLink_1.ElasticDocsLink,{section:"/apm/get-started",path:"/transaction-spans.html#dropped-spans",target:"_blank"},i18n_1.i18n.translate("xpack.apm.transactionDetails.transFlyout.callout.learnMoreAboutDroppedSpansLinkText",{defaultMessage:"Learn more about dropped spans."}))),react_1.default.createElement(eui_1.EuiHorizontalRule,null))}exports.DroppedSpansWarning=DroppedSpansWarning},4240:function(module,exports,__webpack_require__){"use strict";function _templateObject3(){var data=_taggedTemplateLiteral(["\n  position: absolute;\n  right: 0;\n  display: flex;\n  align-items: center;\n  height: ",";\n\n  /* add margin to all direct descendants */\n  & > * {\n    margin-right: ",";\n    white-space: nowrap;\n  }\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  box-sizing: border-box;\n  position: relative;\n  height: ",";\n  min-width: 2px;\n  background-color: ",";\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  position: relative;\n  display: block;\n  user-select: none;\n  padding-top: ",";\n  padding-bottom: ",";\n  margin-right: ",";\n  margin-left: ",";\n  border-top: 1px solid ",";\n  background-color: ",";\n  cursor: pointer;\n\n  &:hover {\n    background-color: ",";\n  }\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var eui_1=__webpack_require__(1);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var agent_name_1=__webpack_require__(1579);var variables_1=__webpack_require__(53);var formatters_1=__webpack_require__(299);var ErrorCountBadge_1=__webpack_require__(1583);var Container=styled_components_1.default("div")(_templateObject(),variables_1.px(variables_1.units.half),variables_1.px(variables_1.units.plus),function(props){return variables_1.px(props.timelineMargins.right)},function(props){return variables_1.px(props.timelineMargins.left)},eui_theme_light_json_1.default.euiColorLightShade,function(props){return props.isSelected?eui_theme_light_json_1.default.euiColorLightestShade:"initial"},eui_theme_light_json_1.default.euiColorLightestShade);var ItemBar=styled_components_1.default("div")(_templateObject2(),variables_1.px(variables_1.unit),function(props){return props.color});var ItemText=styled_components_1.default.span(_templateObject3(),variables_1.px(variables_1.units.plus),variables_1.px(variables_1.units.half));function PrefixIcon(_ref){var item=_ref.item;if(item.docType==="span"){var isDbType=item.span.span.type.startsWith("db");if(isDbType){return react_1.default.createElement(eui_1.EuiIcon,{type:"database"})}return null}if(agent_name_1.isRumAgentName(item.transaction.agent.name)){return react_1.default.createElement(eui_1.EuiIcon,{type:"globe"})}return react_1.default.createElement(eui_1.EuiIcon,{type:"merge"})}var SpanActionToolTip=function SpanActionToolTip(_ref2){var item=_ref2.item,children=_ref2.children;if(item&&item.docType==="span"){return react_1.default.createElement(eui_1.EuiToolTip,{content:"".concat(item.span.span.subtype,".").concat(item.span.span.action)},react_1.default.createElement(react_1.default.Fragment,null,children))}return react_1.default.createElement(react_1.default.Fragment,null,children)};function Duration(_ref3){var item=_ref3.item;return react_1.default.createElement(eui_1.EuiText,{color:"subdued",size:"xs"},formatters_1.asTime(item.duration))}function HttpStatusCode(_ref4){var item=_ref4.item;var httpStatusCode=item.docType==="transaction"&&item.transaction.transaction.type==="request"?item.transaction.transaction.result:undefined;if(!httpStatusCode){return null}return react_1.default.createElement(eui_1.EuiText,{size:"xs"},httpStatusCode)}function NameLabel(_ref5){var item=_ref5.item;if(item.docType==="span"){return react_1.default.createElement(eui_1.EuiText,{size:"s"},item.name)}return react_1.default.createElement(eui_1.EuiTitle,{size:"xxs"},react_1.default.createElement("h5",null,item.name))}function WaterfallItem(_ref6){var timelineMargins=_ref6.timelineMargins,totalDuration=_ref6.totalDuration,item=_ref6.item,color=_ref6.color,isSelected=_ref6.isSelected,errorCount=_ref6.errorCount,onClick=_ref6.onClick;if(!totalDuration){return null}var width=item.duration/totalDuration*100;var left=(item.offset+item.skew)/totalDuration*100;return react_1.default.createElement(Container,{type:item.docType,timelineMargins:timelineMargins,isSelected:isSelected,onClick:onClick},react_1.default.createElement(ItemBar,{style:{left:"".concat(left,"%"),width:"".concat(width,"%")},color:color,type:item.docType}),react_1.default.createElement(ItemText,{style:{minWidth:"".concat(Math.max(100-left,0),"%")}},react_1.default.createElement(SpanActionToolTip,{item:item},react_1.default.createElement(PrefixIcon,{item:item})),react_1.default.createElement(HttpStatusCode,{item:item}),react_1.default.createElement(NameLabel,{item:item}),errorCount>0&&item.docType==="transaction"?react_1.default.createElement(ErrorCountBadge_1.ErrorCountBadge,{errorCount:errorCount,transaction:item.transaction}):null,react_1.default.createElement(Duration,{item:item})))}exports.WaterfallItem=WaterfallItem},4241:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var ApmHeader_1=__webpack_require__(709);var HistoryTabs_1=__webpack_require__(1570);var SetupInstructionsLink_1=__webpack_require__(1587);var ServiceOverview_1=__webpack_require__(4242);var TraceOverview_1=__webpack_require__(4246);var homeTabs=[{path:"/services",name:i18n_1.i18n.translate("xpack.apm.home.servicesTabLabel",{defaultMessage:"Services"}),render:function render(){return react_1.default.createElement(ServiceOverview_1.ServiceOverview,null)}},{path:"/traces",name:i18n_1.i18n.translate("xpack.apm.home.tracesTabLabel",{defaultMessage:"Traces"}),render:function render(){return react_1.default.createElement(TraceOverview_1.TraceOverview,null)}}];function Home(){return react_1.default.createElement("div",null,react_1.default.createElement(ApmHeader_1.ApmHeader,null,react_1.default.createElement(eui_1.EuiFlexGroup,{alignItems:"center"},react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiTitle,{size:"l"},react_1.default.createElement("h1",null,"APM"))),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(SetupInstructionsLink_1.SetupInstructionsLink,null)))),react_1.default.createElement(HistoryTabs_1.HistoryTabs,{tabs:homeTabs}))}exports.Home=Home},4242:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var eui_2=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importStar(__webpack_require__(0));var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var notify_1=__webpack_require__(14);var url_1=tslib_1.__importDefault(__webpack_require__(31));var useFetcher_1=__webpack_require__(248);var services_1=__webpack_require__(1569);var NoServicesMessage_1=__webpack_require__(4243);var ServiceList_1=__webpack_require__(4244);var useUrlParams_1=__webpack_require__(374);var initalData={items:[],hasHistoricalData:true,hasLegacyData:false};var hasDisplayedToast=false;function ServiceOverview(){var _useUrlParams_1$useUr=useUrlParams_1.useUrlParams(),_useUrlParams_1$useUr2=_useUrlParams_1$useUr.urlParams,start=_useUrlParams_1$useUr2.start,end=_useUrlParams_1$useUr2.end,uiFilters=_useUrlParams_1$useUr.uiFilters;var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(start&&end){return services_1.loadServiceList({start:start,end:end,uiFilters:uiFilters})}},[start,end,uiFilters]),_useFetcher_1$useFetc2=_useFetcher_1$useFetc.data,data=_useFetcher_1$useFetc2===void 0?initalData:_useFetcher_1$useFetc2;react_1.useEffect(function(){if(data.hasLegacyData&&!hasDisplayedToast){hasDisplayedToast=true;notify_1.toastNotifications.addWarning({title:i18n_1.i18n.translate("xpack.apm.serviceOverview.toastTitle",{defaultMessage:"Legacy data was detected within the selected time range"}),text:react_1.default.createElement("p",null,i18n_1.i18n.translate("xpack.apm.serviceOverview.toastText",{defaultMessage:"You're running Elastic Stack 7.0+ and we've detected incompatible data from a previous 6.x version. If you want to view this data in APM, you should migrate it. See more in "}),react_1.default.createElement(eui_2.EuiLink,{href:url_1.default.format({pathname:chrome_1.default.addBasePath("/app/kibana"),hash:"/management/elasticsearch/upgrade_assistant"})},i18n_1.i18n.translate("xpack.apm.serviceOverview.upgradeAssistantLink",{defaultMessage:"the upgrade assistant"})))})}},[data.hasLegacyData]);return react_1.default.createElement(eui_1.EuiPanel,null,react_1.default.createElement(ServiceList_1.ServiceList,{items:data.items,noItemsMessage:react_1.default.createElement(NoServicesMessage_1.NoServicesMessage,{historicalDataFound:data.hasHistoricalData})}))}exports.ServiceOverview=ServiceOverview},4243:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var KibanaLink_1=__webpack_require__(598);var SetupInstructionsLink_1=__webpack_require__(1587);function NoServicesMessage(_ref){var historicalDataFound=_ref.historicalDataFound;if(historicalDataFound){return react_1.default.createElement(eui_1.EuiEmptyPrompt,{title:react_1.default.createElement("div",null,i18n_1.i18n.translate("xpack.apm.servicesTable.notFoundLabel",{defaultMessage:"No services found"})),titleSize:"s"})}else{return react_1.default.createElement(eui_1.EuiEmptyPrompt,{title:react_1.default.createElement("div",null,i18n_1.i18n.translate("xpack.apm.servicesTable.noServicesLabel",{defaultMessage:"Looks like you don't have any APM services installed. Let's add some!"})),titleSize:"s",body:react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("p",null,i18n_1.i18n.translate("xpack.apm.servicesTable.7xUpgradeServerMessage",{defaultMessage:"Upgrading from a pre-7.x version? Make sure you've also upgraded\n              your APM server instance(s) to at least 7.0."})),react_1.default.createElement("p",null,i18n_1.i18n.translate("xpack.apm.servicesTable.7xOldDataMessage",{defaultMessage:"You may also have old data that needs to be migrated."})," ",react_1.default.createElement(KibanaLink_1.KibanaLink,{path:"/management/elasticsearch/upgrade_assistant"},i18n_1.i18n.translate("xpack.apm.servicesTable.UpgradeAssistantLink",{defaultMessage:"Learn more by visiting the Kibana Upgrade Assistant"})),".")),actions:react_1.default.createElement(SetupInstructionsLink_1.SetupInstructionsLink,{buttonFill:true})})}}exports.NoServicesMessage=NoServicesMessage},4244:function(module,exports,__webpack_require__){"use strict";function _templateObject(){var data=_taggedTemplateLiteral(["\n  font-size: ",";\n  ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var i18n_2=__webpack_require__(342);var variables_1=__webpack_require__(53);var formatters_1=__webpack_require__(299);var APMLink_1=__webpack_require__(410);var ManagedTable_1=__webpack_require__(977);var TruncatedAnchorEuiToolTip_1=__webpack_require__(4245);function formatNumber(value){if(value===0){return"0"}else if(value<=.1){return"< 0.1"}else{return formatters_1.asDecimal(value)}}function formatString(value){return value||i18n_2.NOT_AVAILABLE_LABEL}var AppLink=styled_components_1.default(APMLink_1.APMLink)(_templateObject(),variables_1.fontSizes.large,variables_1.truncate("100%"));exports.SERVICE_COLUMNS=[{field:"serviceName",name:i18n_1.i18n.translate("xpack.apm.servicesTable.nameColumnLabel",{defaultMessage:"Name"}),width:"40%",sortable:true,render:function render(serviceName){return react_1.default.createElement(eui_1.EuiToolTip,{content:formatString(serviceName),id:"service-name-tooltip"},react_1.default.createElement(AppLink,{path:"/".concat(serviceName,"/transactions")},formatString(serviceName)))}},{field:"environments",name:i18n_1.i18n.translate("xpack.apm.servicesTable.environmentColumnLabel",{defaultMessage:"Environment"}),width:"20%",sortable:true,render:function render(environments){return react_1.default.createElement(TruncatedAnchorEuiToolTip_1.TruncatedAnchorEuiToolTip,{id:"service-environments-tooltip",content:environments.map(function(env){return react_1.default.createElement(react_1.default.Fragment,{key:env},env,react_1.default.createElement("br",null))})},react_1.default.createElement(react_1.default.Fragment,null,environments.join(", ")))}},{field:"agentName",name:i18n_1.i18n.translate("xpack.apm.servicesTable.agentColumnLabel",{defaultMessage:"Agent"}),sortable:true,render:function render(agentName){return formatString(agentName)}},{field:"avgResponseTime",name:i18n_1.i18n.translate("xpack.apm.servicesTable.avgResponseTimeColumnLabel",{defaultMessage:"Avg. response time"}),sortable:true,dataType:"number",render:function render(value){return formatters_1.asMillis(value)}},{field:"transactionsPerMinute",name:i18n_1.i18n.translate("xpack.apm.servicesTable.transactionsPerMinuteColumnLabel",{defaultMessage:"Trans. per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat(formatNumber(value)," ").concat(i18n_1.i18n.translate("xpack.apm.servicesTable.transactionsPerMinuteUnitLabel",{defaultMessage:"tpm"}))}},{field:"errorsPerMinute",name:i18n_1.i18n.translate("xpack.apm.servicesTable.errorsPerMinuteColumnLabel",{defaultMessage:"Errors per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat(formatNumber(value)," ").concat(i18n_1.i18n.translate("xpack.apm.servicesTable.errorsPerMinuteUnitLabel",{defaultMessage:"err."}))}}];function ServiceList(_ref){var _ref$items=_ref.items,items=_ref$items===void 0?[]:_ref$items,noItemsMessage=_ref.noItemsMessage;return react_1.default.createElement(ManagedTable_1.ManagedTable,{columns:exports.SERVICE_COLUMNS,items:items,noItemsMessage:noItemsMessage,initialSort:{field:"serviceName",direction:"asc"},initialPageSize:50})}exports.ServiceList=ServiceList},4245:function(module,exports,__webpack_require__){"use strict";function _templateObject(){var data=_taggedTemplateLiteral(["\n  ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var eui_1=__webpack_require__(1);var variables_1=__webpack_require__(53);exports.StyledAnchorEuiToolTip=function(_ref){var className=_ref.className,props=_objectWithoutProperties(_ref,["className"]);return react_1.default.createElement(eui_1.EuiToolTip,Object.assign({},props,{anchorClassName:className}))};exports.TruncatedAnchorEuiToolTip=styled_components_1.default(exports.StyledAnchorEuiToolTip)(_templateObject(),variables_1.truncate("100%"))},4246:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var useFetcher_1=__webpack_require__(248);var traces_1=__webpack_require__(1580);var TraceList_1=__webpack_require__(4247);var useUrlParams_1=__webpack_require__(374);function TraceOverview(){var _useUrlParams_1$useUr=useUrlParams_1.useUrlParams(),urlParams=_useUrlParams_1$useUr.urlParams,uiFilters=_useUrlParams_1$useUr.uiFilters;var start=urlParams.start,end=urlParams.end;var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){if(start&&end){return traces_1.loadTraceList({start:start,end:end,uiFilters:uiFilters})}},[start,end,uiFilters]),status=_useFetcher_1$useFetc.status,_useFetcher_1$useFetc2=_useFetcher_1$useFetc.data,data=_useFetcher_1$useFetc2===void 0?[]:_useFetcher_1$useFetc2;return react_1.default.createElement(eui_1.EuiPanel,null,react_1.default.createElement(TraceList_1.TraceList,{items:data,isLoading:status===useFetcher_1.FETCH_STATUS.LOADING}))}exports.TraceOverview=TraceOverview},4247:function(module,exports,__webpack_require__){"use strict";function _templateObject(){var data=_taggedTemplateLiteral(["\n  font-size: ",";\n  ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var variables_1=__webpack_require__(53);var formatters_1=__webpack_require__(299);var EmptyMessage_1=__webpack_require__(710);var ImpactBar_1=__webpack_require__(1578);var TransactionLink_1=__webpack_require__(979);var ManagedTable_1=__webpack_require__(977);var StyledTransactionLink=styled_components_1.default(TransactionLink_1.TransactionLink)(_templateObject(),variables_1.fontSizes.large,variables_1.truncate("100%"));var traceListColumns=[{field:"name",name:i18n_1.i18n.translate("xpack.apm.tracesTable.nameColumnLabel",{defaultMessage:"Name"}),width:"40%",sortable:true,render:function render(name,group){return react_1.default.createElement(eui_1.EuiToolTip,{id:"trace-transaction-link-tooltip",content:name},react_1.default.createElement(StyledTransactionLink,{transaction:group.sample},name))}},{field:"sample.service.name",name:i18n_1.i18n.translate("xpack.apm.tracesTable.originatingServiceColumnLabel",{defaultMessage:"Originating service"}),sortable:true},{field:"averageResponseTime",name:i18n_1.i18n.translate("xpack.apm.tracesTable.avgResponseTimeColumnLabel",{defaultMessage:"Avg. response time"}),sortable:true,dataType:"number",render:function render(value){return formatters_1.asMillis(value)}},{field:"transactionsPerMinute",name:i18n_1.i18n.translate("xpack.apm.tracesTable.tracesPerMinuteColumnLabel",{defaultMessage:"Traces per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat(value.toLocaleString()," ").concat(i18n_1.i18n.translate("xpack.apm.tracesTable.tracesPerMinuteUnitLabel",{defaultMessage:"tpm"}))}},{field:"impact",name:i18n_1.i18n.translate("xpack.apm.tracesTable.impactColumnLabel",{defaultMessage:"Impact"}),width:"20%",align:"right",sortable:true,render:function render(value){return react_1.default.createElement(ImpactBar_1.ImpactBar,{value:value})}}];var noItemsMessage=react_1.default.createElement(EmptyMessage_1.EmptyMessage,{heading:i18n_1.i18n.translate("xpack.apm.tracesTable.notFoundLabel",{defaultMessage:"No traces found for this query"})});function TraceList(_ref){var _ref$items=_ref.items,items=_ref$items===void 0?[]:_ref$items,isLoading=_ref.isLoading;var noItems=isLoading?null:noItemsMessage;return react_1.default.createElement(ManagedTable_1.ManagedTable,{columns:traceListColumns,items:items,initialSort:{field:"impact",direction:"desc"},noItemsMessage:noItems,initialPageSize:25})}exports.TraceList=TraceList},4248:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var ScrollToTopOnPathChange=function(_react_1$Component){_inherits(ScrollToTopOnPathChange,_react_1$Component);function ScrollToTopOnPathChange(){_classCallCheck(this,ScrollToTopOnPathChange);return _possibleConstructorReturn(this,_getPrototypeOf(ScrollToTopOnPathChange).apply(this,arguments))}_createClass(ScrollToTopOnPathChange,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this.props.location.pathname!==prevProps.location.pathname){window.scrollTo(0,0)}}},{key:"render",value:function render(){return null}}]);return ScrollToTopOnPathChange}(react_1.Component);exports.ScrollToTopOnPathChange=ScrollToTopOnPathChange},4249:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var i18n_1=__webpack_require__(4);var react_1=__webpack_require__(0);var capabilities_1=__webpack_require__(44);var chrome_1=tslib_1.__importDefault(__webpack_require__(9));exports.useUpdateBadgeEffect=function(){react_1.useEffect(function(){var uiCapabilities=capabilities_1.capabilities.get();chrome_1.default.badge.set(!uiCapabilities.apm.save?{text:i18n_1.i18n.translate("xpack.apm.header.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:i18n_1.i18n.translate("xpack.apm.header.badge.readOnly.tooltip",{defaultMessage:"Unable to save"}),iconType:"glasses"}:undefined)},[])}},4250:function(module,exports,__webpack_require__){},4251:function(module,exports){module.exports='<div id="react-apm-root" class="apmReactRoot"></div>\n'},53:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unit=16;exports.units={unit:exports.unit,eighth:exports.unit/8,quarter:exports.unit/4,half:exports.unit/2,minus:exports.unit*.75,plus:exports.unit*1.5,double:exports.unit*2,triple:exports.unit*3,quadruple:exports.unit*4};function px(value){return"".concat(value,"px")}exports.px=px;function pct(value){return"".concat(value,"%")}exports.pct=pct;exports.borderRadius="5px";exports.fontFamily='"Open Sans", Helvetica, Arial, sans-serif';exports.fontFamilyCode='"SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace';exports.fontSize="14px";exports.fontSizes={tiny:"10px",small:"12px",large:"16px",xlarge:"20px",xxlarge:"30px"};function truncate(width){return"\n      max-width: ".concat(width,";\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    ")}exports.truncate=truncate;exports.topNavHeight="29px"},597:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var get_environment_ui_filter_es_1=__webpack_require__(4156);var get_kuery_ui_filter_es_1=__webpack_require__(4157);function getUiFiltersES(_x){return _getUiFiltersES.apply(this,arguments)}function _getUiFiltersES(){_getUiFiltersES=_asyncToGenerator(regeneratorRuntime.mark(function _callee(uiFilters){var kuery,environment,filters;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return get_kuery_ui_filter_es_1.getKueryUiFilterES(uiFilters.kuery);case 2:kuery=_context.sent;environment=get_environment_ui_filter_es_1.getEnvironmentUiFilterES(uiFilters.environment);filters=[kuery,environment].filter(function(filter){return!!filter});return _context.abrupt("return",encodeURIComponent(JSON.stringify(filters)));case 6:case"end":return _context.stop()}}},_callee)}));return _getUiFiltersES.apply(this,arguments)}exports.getUiFiltersES=getUiFiltersES},598:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var url_1=tslib_1.__importDefault(__webpack_require__(31));function KibanaLink(_ref){var path=_ref.path,rest=_objectWithoutProperties(_ref,["path"]);var href=url_1.default.format({pathname:chrome_1.default.addBasePath("/app/kibana"),hash:path});return react_1.default.createElement(eui_1.EuiLink,Object.assign({},rest,{href:href}))}exports.KibanaLink=KibanaLink},7:function(module,exports){module.exports=vendors},709:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var KueryBar_1=__webpack_require__(4158);var DatePicker_1=__webpack_require__(4164);var EnvironmentFilter_1=__webpack_require__(4165);exports.ApmHeader=function(_ref){var children=_ref.children;return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},react_1.default.createElement(eui_1.EuiFlexItem,null,children),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(DatePicker_1.DatePicker,null))),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(eui_1.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},react_1.default.createElement(eui_1.EuiFlexItem,{grow:3},react_1.default.createElement(KueryBar_1.KueryBar,null)),react_1.default.createElement(eui_1.EuiFlexItem,{grow:1},react_1.default.createElement(EnvironmentFilter_1.EnvironmentFilter,null))))}},710:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var i18n_1=__webpack_require__(4);var react_1=tslib_1.__importDefault(__webpack_require__(0));var EmptyMessage=function EmptyMessage(_ref){var _ref$heading=_ref.heading,heading=_ref$heading===void 0?i18n_1.i18n.translate("xpack.apm.emptyMessage.noDataFoundLabel",{defaultMessage:"No data found."}):_ref$heading,_ref$subheading=_ref.subheading,subheading=_ref$subheading===void 0?i18n_1.i18n.translate("xpack.apm.emptyMessage.noDataFoundDescription",{defaultMessage:"Try another time range or reset the search filter."}):_ref$subheading,_ref$hideSubheading=_ref.hideSubheading,hideSubheading=_ref$hideSubheading===void 0?false:_ref$hideSubheading;return react_1.default.createElement(eui_1.EuiEmptyPrompt,{titleSize:"s",title:react_1.default.createElement("div",null,heading),body:!hideSubheading&&subheading})};exports.EmptyMessage=EmptyMessage},711:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _templateObject5(){var data=_taggedTemplateLiteral(["\n  display: inline-block;\n  line-height: ",";\n  ",";\n"]);_templateObject5=function _templateObject5(){return data};return data}function _templateObject4(){var data=_taggedTemplateLiteral(["\n  display: inline-block;\n  line-height: ",";\n"]);_templateObject4=function _templateObject4(){return data};return data}function _templateObject3(){var data=_taggedTemplateLiteral(["\n  color: ",";\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  margin-bottom: ",";\n  font-size: ",";\n  color: ",";\n\n  span {\n    cursor: help;\n  }\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  font-family: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var eui_2=__webpack_require__(1);var eui_theme_light_json_1=tslib_1.__importDefault(__webpack_require__(41));var moment_1=tslib_1.__importDefault(__webpack_require__(16));var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(13));var i18n_1=__webpack_require__(342);var variables_1=__webpack_require__(53);var TooltipFieldName=styled_components_1.default.span(_templateObject(),variables_1.fontFamilyCode);var PropertyLabel=styled_components_1.default.div(_templateObject2(),variables_1.px(variables_1.units.half),variables_1.fontSizes.small,eui_theme_light_json_1.default.euiColorMediumShade);PropertyLabel.displayName="PropertyLabel";var PropertyValueDimmed=styled_components_1.default.span(_templateObject3(),eui_theme_light_json_1.default.euiColorMediumShade);var propertyValueLineHeight=1.2;var PropertyValue=styled_components_1.default.div(_templateObject4(),propertyValueLineHeight);PropertyValue.displayName="PropertyValue";var PropertyValueTruncated=styled_components_1.default.span(_templateObject5(),propertyValueLineHeight,variables_1.truncate("100%"));function TimestampValue(_ref){var timestamp=_ref.timestamp;var time=moment_1.default(timestamp);var timeAgo=timestamp?time.fromNow():i18n_1.NOT_AVAILABLE_LABEL;var timestampFull=timestamp?time.format("MMMM Do YYYY, HH:mm:ss.SSS"):i18n_1.NOT_AVAILABLE_LABEL;return react_1.default.createElement(PropertyValue,null,timeAgo," ",react_1.default.createElement(PropertyValueDimmed,null,"(",timestampFull,")"))}function getPropertyLabel(_ref2){var fieldName=_ref2.fieldName,label=_ref2.label;if(fieldName){return react_1.default.createElement(PropertyLabel,null,react_1.default.createElement(eui_2.EuiToolTip,{content:react_1.default.createElement(TooltipFieldName,null,fieldName)},react_1.default.createElement("span",null,label)))}return react_1.default.createElement(PropertyLabel,null,label)}function getPropertyValue(_ref3){var val=_ref3.val,fieldName=_ref3.fieldName,_ref3$truncated=_ref3.truncated,truncated=_ref3$truncated===void 0?false:_ref3$truncated;if(fieldName==="@timestamp"){return react_1.default.createElement(TimestampValue,{timestamp:val})}if(truncated){return react_1.default.createElement(eui_2.EuiToolTip,{content:String(val)},react_1.default.createElement(PropertyValueTruncated,null,String(val)))}return react_1.default.createElement(PropertyValue,null,val)}function StickyProperties(_ref4){var stickyProperties=_ref4.stickyProperties;var itemStyles={padding:"1em 1em 1em 0"};var groupStyles={marginTop:"-1em",marginBottom:"-1em"};return react_1.default.createElement(eui_1.EuiFlexGroup,{wrap:true,gutterSize:"none",style:groupStyles},stickyProperties&&stickyProperties.map(function(_ref5,i){var _ref5$width=_ref5.width,width=_ref5$width===void 0?0:_ref5$width,prop=_objectWithoutProperties(_ref5,["width"]);return react_1.default.createElement(eui_1.EuiFlexItem,{key:i,style:_objectSpread({minWidth:width},itemStyles)},getPropertyLabel(prop),getPropertyValue(prop))}))}exports.StickyProperties=StickyProperties},712:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.Indicator=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(13));var _variables=__webpack_require__(53);var _eui_theme_light=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  width: ",";\n  height: ",";\n  margin-right: ",";\n  background: ",";\n  border-radius: 100%;\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  display: flex;\n  align-items: center;\n  font-size: ",";\n  color: ",";\n  cursor: ",";\n  opacity: ",";\n  user-select: none;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var Container=_styledComponents.default.div(_templateObject(),function(props){return props.fontSize},_eui_theme_light.default.euiColorDarkShade,function(props){return props.clickable?"pointer":"initial"},function(props){return props.disabled?.4:1});var Indicator=_styledComponents.default.span(_templateObject2(),function(props){return(0,_variables.px)(props.radius)},function(props){return(0,_variables.px)(props.radius)},function(props){return(0,_variables.px)(props.radius/2)},function(props){return props.color});exports.Indicator=Indicator;var Legend=function(_PureComponent){_inherits(Legend,_PureComponent);function Legend(){_classCallCheck(this,Legend);return _possibleConstructorReturn(this,_getPrototypeOf(Legend).apply(this,arguments))}_createClass(Legend,[{key:"render",value:function render(){var _this$props=this.props,onClick=_this$props.onClick,text=_this$props.text,_this$props$color=_this$props.color,color=_this$props$color===void 0?_eui_theme_light.default.euiColorVis1:_this$props$color,_this$props$fontSize=_this$props.fontSize,fontSize=_this$props$fontSize===void 0?_variables.fontSizes.small:_this$props$fontSize,_this$props$radius=_this$props.radius,radius=_this$props$radius===void 0?_variables.units.minus-1:_this$props$radius,_this$props$disabled=_this$props.disabled,disabled=_this$props$disabled===void 0?false:_this$props$disabled,_this$props$clickable=_this$props.clickable,clickable=_this$props$clickable===void 0?false:_this$props$clickable,rest=_objectWithoutProperties(_this$props,["onClick","text","color","fontSize","radius","disabled","clickable"]);return _react.default.createElement(Container,_extends({onClick:onClick,disabled:disabled,clickable:clickable||Boolean(onClick),fontSize:fontSize},rest),_react.default.createElement(Indicator,{color:color,radius:radius}),text)}}]);return Legend}(_react.PureComponent);exports.default=Legend},713:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(341);var get_ui_filters_es_1=__webpack_require__(597);function loadTransactionList(_x){return _loadTransactionList.apply(this,arguments)}function _loadTransactionList(){_loadTransactionList=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var serviceName,start,end,uiFilters,transactionType;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:serviceName=_ref.serviceName,start=_ref.start,end=_ref.end,uiFilters=_ref.uiFilters,transactionType=_ref.transactionType;_context.t0=callApi_1;_context.t1="/api/apm/services/".concat(serviceName,"/transaction_groups/").concat(transactionType);_context.t2=start;_context.t3=end;_context.next=7;return get_ui_filters_es_1.getUiFiltersES(uiFilters);case 7:_context.t4=_context.sent;_context.t5={start:_context.t2,end:_context.t3,uiFiltersES:_context.t4};_context.t6={pathname:_context.t1,query:_context.t5};_context.next=12;return _context.t0.callApi.call(_context.t0,_context.t6);case 12:return _context.abrupt("return",_context.sent);case 13:case"end":return _context.stop()}}},_callee)}));return _loadTransactionList.apply(this,arguments)}exports.loadTransactionList=loadTransactionList;function loadTransactionDistribution(_x2){return _loadTransactionDistribution.apply(this,arguments)}function _loadTransactionDistribution(){_loadTransactionDistribution=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref2){var serviceName,start,end,transactionName,transactionType,transactionId,traceId,uiFilters;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:serviceName=_ref2.serviceName,start=_ref2.start,end=_ref2.end,transactionName=_ref2.transactionName,transactionType=_ref2.transactionType,transactionId=_ref2.transactionId,traceId=_ref2.traceId,uiFilters=_ref2.uiFilters;_context2.t0=callApi_1;_context2.t1="/api/apm/services/".concat(serviceName,"/transaction_groups/").concat(transactionType,"/").concat(encodeURIComponent(transactionName),"/distribution");_context2.t2=start;_context2.t3=end;_context2.t4=transactionId;_context2.t5=traceId;_context2.next=9;return get_ui_filters_es_1.getUiFiltersES(uiFilters);case 9:_context2.t6=_context2.sent;_context2.t7={start:_context2.t2,end:_context2.t3,transactionId:_context2.t4,traceId:_context2.t5,uiFiltersES:_context2.t6};_context2.t8={pathname:_context2.t1,query:_context2.t7};return _context2.abrupt("return",_context2.t0.callApi.call(_context2.t0,_context2.t8));case 13:case"end":return _context2.stop()}}},_callee2)}));return _loadTransactionDistribution.apply(this,arguments)}exports.loadTransactionDistribution=loadTransactionDistribution;function loadTransactionDetailsCharts(_x3){return _loadTransactionDetailsCharts.apply(this,arguments)}function _loadTransactionDetailsCharts(){_loadTransactionDetailsCharts=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(_ref3){var serviceName,start,end,uiFilters,transactionType,transactionName;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:serviceName=_ref3.serviceName,start=_ref3.start,end=_ref3.end,uiFilters=_ref3.uiFilters,transactionType=_ref3.transactionType,transactionName=_ref3.transactionName;_context3.t0=callApi_1;_context3.t1="/api/apm/services/".concat(serviceName,"/transaction_groups/").concat(transactionType,"/").concat(encodeURIComponent(transactionName),"/charts");_context3.t2=start;_context3.t3=end;_context3.next=7;return get_ui_filters_es_1.getUiFiltersES(uiFilters);case 7:_context3.t4=_context3.sent;_context3.t5={start:_context3.t2,end:_context3.t3,uiFiltersES:_context3.t4};_context3.t6={pathname:_context3.t1,query:_context3.t5};return _context3.abrupt("return",_context3.t0.callApi.call(_context3.t0,_context3.t6));case 11:case"end":return _context3.stop()}}},_callee3)}));return _loadTransactionDetailsCharts.apply(this,arguments)}exports.loadTransactionDetailsCharts=loadTransactionDetailsCharts;function loadTransactionOverviewCharts(_x4){return _loadTransactionOverviewCharts.apply(this,arguments)}function _loadTransactionOverviewCharts(){_loadTransactionOverviewCharts=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(_ref4){var serviceName,start,end,uiFilters,transactionType,pathname;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:serviceName=_ref4.serviceName,start=_ref4.start,end=_ref4.end,uiFilters=_ref4.uiFilters,transactionType=_ref4.transactionType;pathname=transactionType?"/api/apm/services/".concat(serviceName,"/transaction_groups/").concat(transactionType,"/charts"):"/api/apm/services/".concat(serviceName,"/transaction_groups/charts");_context4.t0=callApi_1;_context4.t1=pathname;_context4.t2=start;_context4.t3=end;_context4.next=8;return get_ui_filters_es_1.getUiFiltersES(uiFilters);case 8:_context4.t4=_context4.sent;_context4.t5={start:_context4.t2,end:_context4.t3,uiFiltersES:_context4.t4};_context4.t6={pathname:_context4.t1,query:_context4.t5};return _context4.abrupt("return",_context4.t0.callApi.call(_context4.t0,_context4.t6));case 12:case"end":return _context4.stop()}}},_callee4)}));return _loadTransactionOverviewCharts.apply(this,arguments)}exports.loadTransactionOverviewCharts=loadTransactionOverviewCharts},714:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPlotValues=getPlotValues;exports.SharedPlot=SharedPlot;var _lodash=__webpack_require__(3);var _d3Scale=__webpack_require__(445);var _reactVis=__webpack_require__(343);var _d=_interopRequireDefault(__webpack_require__(27));var _propTypes=_interopRequireDefault(__webpack_require__(6));var _react=_interopRequireDefault(__webpack_require__(0));var _variables=__webpack_require__(53);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var XY_HEIGHT=_variables.unit*16;var XY_MARGIN={top:_variables.unit,left:_variables.unit*5,right:0,bottom:_variables.unit*2};var getXScale=function getXScale(xMin,xMax,width){return(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([XY_MARGIN.left,width-XY_MARGIN.right])};var getYScale=function getYScale(yMin,yMax){return(0,_d3Scale.scaleLinear)().domain([yMin,yMax]).range([XY_HEIGHT,0]).nice()};function getFlattenedCoordinates(visibleSeries,enabledSeries){var enabledCoordinates=(0,_lodash.flatten)(enabledSeries.map(function(serie){return serie.data}));if(!(0,_lodash.isEmpty)(enabledCoordinates)){return enabledCoordinates}return(0,_lodash.flatten)(visibleSeries.map(function(serie){return serie.data}))}function getPlotValues(visibleSeries,enabledSeries,_ref){var width=_ref.width,_ref$yMin=_ref.yMin,yMin=_ref$yMin===void 0?0:_ref$yMin,_ref$yMax=_ref.yMax,yMax=_ref$yMax===void 0?"max":_ref$yMax;var flattenedCoordinates=getFlattenedCoordinates(visibleSeries,enabledSeries);if((0,_lodash.isEmpty)(flattenedCoordinates)){return null}var xMin=_d.default.min(flattenedCoordinates,function(d){return d.x});var xMax=_d.default.max(flattenedCoordinates,function(d){return d.x});if(yMax==="max"){yMax=_d.default.max(flattenedCoordinates,function(d){return d.y})}if(yMin==="min"){yMin=_d.default.min(flattenedCoordinates,function(d){return d.y})}var xScale=getXScale(xMin,xMax,width);var yScale=getYScale(yMin,yMax);var yMaxNice=yScale.domain()[1];var yTickValues=[0,yMaxNice/2,yMaxNice];return{x:xScale,y:yScale,yTickValues:yTickValues,XY_MARGIN:XY_MARGIN,XY_HEIGHT:XY_HEIGHT,XY_WIDTH:width}}function SharedPlot(_ref2){var plotValues=_ref2.plotValues,props=_objectWithoutProperties(_ref2,["plotValues"]);return _react.default.createElement("div",{style:{position:"absolute",top:0,left:0}},_react.default.createElement(_reactVis.XYPlot,_extends({dontCheckIfEmpty:true,height:XY_HEIGHT,margin:XY_MARGIN,xType:"time",width:plotValues.XY_WIDTH,xDomain:plotValues.x.domain(),yDomain:plotValues.y.domain()},props)))}SharedPlot.propTypes={plotValues:_propTypes.default.shape({x:_propTypes.default.func.isRequired,y:_propTypes.default.func.isRequired,XY_WIDTH:_propTypes.default.number.isRequired}).isRequired}},969:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TIME_RANGE_REFRESH="TIME_RANGE_REFRESH";exports.LOCATION_UPDATE="LOCATION_UPDATE";exports.TIMEPICKER_DEFAULTS={rangeFrom:"now-24h",rangeTo:"now",refreshPaused:"true",refreshInterval:"0"}},970:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var useFetcher_1=__webpack_require__(248);var xpack_1=__webpack_require__(4150);var InvalidLicenseNotification_1=__webpack_require__(4152);var initialLicense={features:{watcher:{is_available:false},ml:{is_available:false}},license:{is_active:false}};exports.LicenseContext=react_1.default.createContext(initialLicense);exports.LicenseProvider=function(_ref){var children=_ref.children;var _useFetcher_1$useFetc=useFetcher_1.useFetcher(function(){return xpack_1.loadLicense()},[]),_useFetcher_1$useFetc2=_useFetcher_1$useFetc.data,data=_useFetcher_1$useFetc2===void 0?initialLicense:_useFetcher_1$useFetc2,status=_useFetcher_1$useFetc.status;var hasValidLicense=data.license.is_active;if(status===useFetcher_1.FETCH_STATUS.SUCCESS&&!hasValidLicense){return react_1.default.createElement(InvalidLicenseNotification_1.InvalidLicenseNotification,null)}return react_1.default.createElement(exports.LicenseContext.Provider,{value:data,children:children})}},971:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__webpack_require__(3);var callApi_1=__webpack_require__(341);exports.getAPMIndexPattern=lodash_1.memoize(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return callApi_1.callApi({method:"GET",pathname:"/api/apm/index_pattern"});case 3:return _context.abrupt("return",_context.sent);case 6:_context.prev=6;_context.t0=_context["catch"](0);return _context.abrupt("return");case 9:case"end":return _context.stop()}}},_callee,null,[[0,6]])})))},972:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var url_1=tslib_1.__importDefault(__webpack_require__(31));var rison_node_1=tslib_1.__importDefault(__webpack_require__(239));var useAPMIndexPattern_1=__webpack_require__(4169);var useLocation_1=__webpack_require__(319);var rison_helpers_1=__webpack_require__(1559);function DiscoverLink(_ref){var _ref$query=_ref.query,query=_ref$query===void 0?{}:_ref$query,rest=_objectWithoutProperties(_ref,["query"]);var apmIndexPattern=useAPMIndexPattern_1.useAPMIndexPattern();var location=useLocation_1.useLocation();if(!apmIndexPattern.id){return null}var risonQuery={_g:rison_helpers_1.getTimepickerRisonData(location.search),_a:_objectSpread({},query._a,{index:apmIndexPattern.id})};var href=url_1.default.format({pathname:chrome_1.default.addBasePath("/app/kibana"),hash:"/discover?_g=".concat(rison_node_1.default.encode(risonQuery._g),"&_a=").concat(rison_node_1.default.encode(risonQuery._a))});return react_1.default.createElement(eui_1.EuiLink,Object.assign({},rest,{href:href}))}exports.DiscoverLink=DiscoverLink},973:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var eui_1=__webpack_require__(1);var metadata_1=__webpack_require__(241);var STACK_VERSION=metadata_1.metadata.branch;function ElasticDocsLink(_ref){var section=_ref.section,path=_ref.path,rest=_objectWithoutProperties(_ref,["section","path"]);var href="https://www.elastic.co/guide/en".concat(section,"/").concat(STACK_VERSION).concat(path);return react_1.default.createElement(eui_1.EuiLink,Object.assign({href:href},rest))}exports.ElasticDocsLink=ElasticDocsLink},974:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));function Ellipsis(_ref){var horizontal=_ref.horizontal;return react_1.default.createElement(eui_1.EuiIcon,{style:{transition:"transform 0.1s",transform:"rotate(".concat(horizontal?90:0,"deg)")},type:"arrowRight"})}exports.Ellipsis=Ellipsis},975:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3964)},976:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var ml_job_constants_1=__webpack_require__(1573);var MLLink_1=__webpack_require__(1574);exports.MLJobLink=function(_ref){var serviceName=_ref.serviceName,transactionType=_ref.transactionType,children=_ref.children;var jobId=ml_job_constants_1.getMlJobId(serviceName,transactionType);var query={ml:{jobIds:[jobId]}};return react_1.default.createElement(MLLink_1.MLLink,{children:children,query:query,path:"/timeseriesexplorer"})}},977:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var eui_1=__webpack_require__(1);var lodash_1=__webpack_require__(3);var react_1=tslib_1.__importStar(__webpack_require__(0));var ManagedTable=function(_react_1$Component){_inherits(ManagedTable,_react_1$Component);function ManagedTable(props){var _this;_classCallCheck(this,ManagedTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(ManagedTable).call(this,props));_this.onTableChange=function(_ref){var page=_ref.page,sort=_ref.sort;_this.setState({page:page,sort:sort})};var defaultSort={field:(props!=null&&props.columns!=null&&props.columns[0]!=null?props.columns[0].field:undefined)||"",direction:"asc"};var _props$initialPageInd=props.initialPageIndex,initialPageIndex=_props$initialPageInd===void 0?0:_props$initialPageInd,_props$initialPageSiz=props.initialPageSize,initialPageSize=_props$initialPageSiz===void 0?10:_props$initialPageSiz,_props$initialSort=props.initialSort,initialSort=_props$initialSort===void 0?defaultSort:_props$initialSort;_this.state={page:{index:initialPageIndex,size:initialPageSize},sort:initialSort};return _this}_createClass(ManagedTable,[{key:"getCurrentItems",value:function getCurrentItems(){var items=this.props.items;var _this$state=this.state,sort=_this$state.sort,page=_this$state.page;var sorted=lodash_1.sortByOrder(items,sort.field,sort.direction);return sorted.slice(page.index*page.size,(page.index+1)*page.size)}},{key:"render",value:function render(){var _this$props=this.props,columns=_this$props.columns,noItemsMessage=_this$props.noItemsMessage,items=_this$props.items,_this$props$hidePerPa=_this$props.hidePerPageOptions,hidePerPageOptions=_this$props$hidePerPa===void 0?true:_this$props$hidePerPa;var _this$state2=this.state,page=_this$state2.page,sort=_this$state2.sort;return react_1.default.createElement(eui_1.EuiBasicTable,{noItemsMessage:noItemsMessage,items:this.getCurrentItems(),columns:columns,pagination:{hidePerPageOptions:hidePerPageOptions,totalItemCount:items.length,pageIndex:page.index,pageSize:page.size},sorting:{sort:sort},onChange:this.onTableChange})}}]);return ManagedTable}(react_1.Component);exports.ManagedTable=ManagedTable},978:function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var chrome_1=tslib_1.__importDefault(__webpack_require__(9));var elasticsearch_fieldnames_1=__webpack_require__(320);var ml_job_constants_1=__webpack_require__(1573);var callApi_1=__webpack_require__(341);function startMLJob(_x){return _startMLJob.apply(this,arguments)}function _startMLJob(){_startMLJob=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var serviceName,transactionType,indexPatternName,groups,filter;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:serviceName=_ref.serviceName,transactionType=_ref.transactionType;indexPatternName=chrome_1.default.getInjected("apmIndexPatternTitle");groups=["apm",serviceName.toLowerCase()];filter=[{term:_defineProperty({},elasticsearch_fieldnames_1.SERVICE_NAME,serviceName)},{term:_defineProperty({},elasticsearch_fieldnames_1.PROCESSOR_EVENT,"transaction")},{term:_defineProperty({},elasticsearch_fieldnames_1.TRANSACTION_TYPE,transactionType)}];groups.push(transactionType.toLowerCase());return _context.abrupt("return",callApi_1.callApi({method:"POST",pathname:"/api/ml/modules/setup/apm_transaction",body:JSON.stringify({prefix:ml_job_constants_1.getMlPrefix(serviceName,transactionType),groups:groups,indexPatternName:indexPatternName,startDatafeed:true,query:{bool:{filter:filter}}})}));case 6:case"end":return _context.stop()}}},_callee)}));return _startMLJob.apply(this,arguments)}exports.startMLJob=startMLJob;function getHasMLJob(_x2){return _getHasMLJob.apply(this,arguments)}function _getHasMLJob(){_getHasMLJob=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref2){var serviceName,transactionType;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:serviceName=_ref2.serviceName,transactionType=_ref2.transactionType;_context2.prev=1;_context2.next=4;return callApi_1.callApi({method:"GET",pathname:"/api/ml/anomaly_detectors/".concat(ml_job_constants_1.getMlJobId(serviceName,transactionType))});case 4:return _context2.abrupt("return",true);case 7:_context2.prev=7;_context2.t0=_context2["catch"](1);return _context2.abrupt("return",false);case 10:case"end":return _context2.stop()}}},_callee2,null,[[1,7]])}));return _getHasMLJob.apply(this,arguments)}exports.getHasMLJob=getHasMLJob},979:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var APMLink_1=__webpack_require__(410);var url_helpers_1=__webpack_require__(219);exports.TransactionLink=function(_ref){var transaction=_ref.transaction,children=_ref.children;if(!transaction){return null}var serviceName=transaction.service.name;var transactionType=transaction.transaction.type;var traceId=transaction.trace.id;var transactionId=transaction.transaction.id;var name=transaction.transaction.name;var encodedName=url_helpers_1.legacyEncodeURIComponent(name);return react_1.default.createElement(APMLink_1.APMLink,{path:"/".concat(serviceName,"/transactions/").concat(transactionType,"/").concat(encodedName),query:{traceId:traceId,transactionId:transactionId}},children)}}})["plugin"];